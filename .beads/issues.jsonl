{"id":"test-e1","title":"Project Foundation \u0026 Infrastructure Setup","description":"Initialize the complete development environment including Next.js 16 frontend, Convex backend, Clerk authentication, and Telnyx telephony integration. Establish the foundational architecture that all features will build upon.\n\n**Context:** Before any feature can be built, the project infrastructure must exist. This includes database schema, authentication flows, and basic telephony capability to make and receive calls.\n\n**Testing Requirements:**\n- **Unit Tests:** Convex schema validators, authentication helper functions, Telnyx webhook signature verification\n- **Integration Tests:** Clerk-Convex user sync, Telnyx call initiation flow, recording upload to Convex storage\n- **Type Tests:** TypeScript types for all Convex schema models, API response types\n- **E2E Tests:** Complete sign-up flow, initiate test call and verify recording appears in dashboard","acceptance_criteria":"- Can run npm dev and see RealHerd branded landing page\n- Clerk authentication works (sign up, sign in, sign out)\n- Convex backend is connected with initial schema deployed\n- Telnyx account configured with phone number provisioned\n- Can make a basic outbound call that plays audio and hangs up\n- Call recording saves to Convex file storage\n- Basic call log displays in dashboard","status":"open","priority":1,"issue_type":"epic","owner":"david@habedank.org","estimated_minutes":3840,"created_at":"2026-01-30T14:13:14.126027-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:14.126027-06:00","labels":["auth","foundation","infrastructure","phase-0"]}
{"id":"test-e10","title":"Brokerage Dashboard \u0026 Visibility","description":"Build the broker and team lead dashboard views providing activity feeds, pipeline overview, agent summaries, stale lead alerts, and compliance reporting.\n\n**Context:** Brokers pay for RealHerd to get visibility they've never had. The dashboard is where they see ROI - which agents are using it, what's in the pipeline, which deals need attention. This is the 'killer feature' for decision makers.\n\n**Testing Requirements:**\n- **Unit Tests:** Activity feed filtering logic, compliance calculation, pipeline aggregation\n- **Integration Tests:** Real-time updates via Convex subscriptions, cross-agent data aggregation\n- **Type Tests:** Dashboard data shapes, filter parameter validation\n- **E2E Tests:** Broker views activity across all agents, filters work, exports download correctly","acceptance_criteria":"- Activity feed shows all calls across org/team with filtering\n- Pipeline overview displays leads by stage and temperature\n- Agent activity summary shows call counts, compliance rates\n- Stale lead alerts highlight leads needing attention\n- Check-in compliance report shows who's taking calls\n- Filtering by agent, date range, lead temperature\n- Export capabilities for reports\n- Mobile-responsive design for on-the-go checking","status":"tombstone","priority":1,"issue_type":"epic","owner":"david@habedank.org","estimated_minutes":1920,"created_at":"2026-01-30T12:47:21.316174-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:16.70124-06:00","labels":["dashboard","reporting","visibility"],"dependencies":[{"issue_id":"test-e10","depends_on_id":"test-e9","type":"blocks","created_at":"2026-01-30T12:52:24.067258-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:16.70124-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"test-e10t1","title":"Build activity feed component with real-time updates","description":"Create the core activity feed component that displays all call activity across the organization. Must support real-time updates via Convex subscriptions as new calls come in, showing call summaries, agent names, lead info, timestamps, and outcomes.\n\n**Context:** Brokers pay for RealHerd to get visibility they've never had. The activity feed is the heart of the dashboard - it's the first thing brokers see and proves the system is working. Real-time updates make it feel alive and valuable.\n\n**Testing Requirements:**\n- **Unit Tests:** ActivityFeedItem rendering, filter logic functions, date formatting, outcome badge mapping, pagination/infinite scroll logic\n- **Integration Tests:** Real-time subscription updates when new calls added, filter combinations (agent + date + temperature), data loading states","design":"Use Convex useQuery with live subscriptions for real-time updates. Create ActivityFeedItem component with call metadata, agent avatar, lead name, call duration, and outcome badge. Implement virtualized list for performance with many items. Filter state managed via URL params for shareability.","status":"tombstone","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T12:47:57.447772-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:57:43.883211-06:00","labels":["dashboard","frontend","real-time"],"dependencies":[{"issue_id":"test-e10t1","depends_on_id":"test-e10","type":"parent-child","created_at":"2026-01-30T12:47:57.597723-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:57:43.883211-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t1s1","title":"Create ActivityFeedItem component with call metadata display","description":"Build the ActivityFeedItem component that displays a single call activity entry. Include agent avatar (using initials or placeholder), lead name, call duration formatted as mm:ss, timestamp with relative time (e.g., '5 min ago'), and outcome badge with color coding (connected=green, voicemail=yellow, no-answer=red). Use shadcn/ui Card component as base. Create TypeScript types for ActivityItem matching Convex schema fields.\n\n**Context:** Each feed item needs to convey call status at a glance - brokers scanning the feed should immediately see who called whom and what happened without clicking. This is the atomic unit of the activity feed.\n\n**Testing Requirements:**\n- **Unit Tests:** Test ActivityFeedItem renders all props correctly, test duration formatting (0s, 59s, 1:00, 59:59), test relative timestamp display, test outcome badge color mapping for each outcome type, test missing/null field handling","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:50:39.82757-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:37.118591-06:00","labels":["component","frontend"],"dependencies":[{"issue_id":"test-e10t1s1","depends_on_id":"test-e10t1","type":"parent-child","created_at":"2026-01-30T12:50:40.034729-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:37.118591-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t1s2","title":"Implement Convex useQuery subscription for real-time call activity","description":"Create useActivityFeed hook that uses Convex useQuery with live subscription to calls table. Query should return recent calls (last 24h default) ordered by timestamp desc, joining agent and lead data. Include pagination cursor for loading older items. Handle loading and error states. The hook should accept filter params (agentId, outcome, dateRange) that map to URL search params.\n\n**Context:** Real-time updates are what make the dashboard feel alive - when an agent finishes a call, brokers see it appear instantly. This proves the system is working and creates urgency around pipeline management.\n\n**Testing Requirements:**\n- **Unit Tests:** Test hook returns loading state initially, test data transformation from Convex response, test filter params are passed to query correctly, test subscription updates when new calls arrive (mock Convex subscription behavior)","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:40.242264-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:36.856194-06:00","labels":["convex","data","frontend"],"dependencies":[{"issue_id":"test-e10t1s2","depends_on_id":"test-e10t1","type":"parent-child","created_at":"2026-01-30T12:50:40.414508-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t1s2","depends_on_id":"test-e10t1s1","type":"blocks","created_at":"2026-01-30T12:52:24.35091-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:36.856194-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t1s3","title":"Build virtualized ActivityFeed list with infinite scroll","description":"Create ActivityFeed container component using @tanstack/react-virtual for virtualized rendering. Implement infinite scroll that loads more items when user scrolls near bottom using the pagination cursor from useActivityFeed. Show skeleton loaders during initial load and 'Loading more...' indicator when fetching next page. Handle empty state with helpful message. Estimated row height ~80px for virtualization.\n\n**Context:** Brokerages can have hundreds of calls per day across 20-100 agents. Without virtualization, rendering all items kills performance. Infinite scroll keeps initial load fast while allowing full history access.\n\n**Testing Requirements:**\n- **Unit Tests:** Test virtualized list only renders visible items (check DOM node count), test infinite scroll triggers loadMore at threshold, test skeleton loading state, test empty state message, test scroll position preservation on data update","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:40.737322-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:36.455852-06:00","labels":["component","frontend","performance"],"dependencies":[{"issue_id":"test-e10t1s3","depends_on_id":"test-e10t1","type":"parent-child","created_at":"2026-01-30T12:50:40.898315-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t1s3","depends_on_id":"test-e10t1s1","type":"blocks","created_at":"2026-01-30T12:52:24.634189-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t1s3","depends_on_id":"test-e10t1s2","type":"blocks","created_at":"2026-01-30T12:52:25.035117-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:36.455852-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t1s4","title":"Add URL-synced filters and verify real-time behavior end-to-end","description":"Implement filter controls (agent dropdown, outcome multi-select, date range picker) that sync to URL search params using nuqs or useSearchParams. Filters should update the useActivityFeed query params reactively. Add filter reset button. Verify complete flow: start dev server, confirm real-time subscription works (can simulate by adding test data to Convex), confirm filters update feed immediately, confirm URL is shareable.\n\n**Context:** URL-synced filters let brokers share specific views with team leads ('here's all voicemails from yesterday'). This is a power-user feature that increases stickiness and proves sophistication.\n\n**Testing Requirements:**\n- **Unit Tests:** Test filter state syncs to URL params, test URL params restore filter state on page load, test filter changes trigger query update, test reset clears all filters and URL params, test multiple filters combine correctly","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:41.132298-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:35.927403-06:00","labels":["frontend","integration","ux"],"dependencies":[{"issue_id":"test-e10t1s4","depends_on_id":"test-e10t1","type":"parent-child","created_at":"2026-01-30T12:50:41.4283-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t1s4","depends_on_id":"test-e10t1s3","type":"blocks","created_at":"2026-01-30T12:52:25.397681-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:35.927403-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t2","title":"Create pipeline overview with stage visualization","description":"Build pipeline overview component showing leads organized by stage (New, Contacted, Qualified, Proposal, Closing) with temperature indicators (hot/warm/cold). Include counts per stage and visual representation of pipeline health.\n\n**Context:** The pipeline overview gives brokers the 30,000ft view they've always wanted - how many deals are in flight, where they are, which are hot. This is the ROI visualization that justifies the software purchase.\n\n**Testing Requirements:**\n- **Unit Tests:** Stage count calculations, temperature color mapping, lead card rendering, stage transition display\n- **Integration Tests:** Pipeline data accuracy against actual lead counts, click-through to filtered views, real-time count updates","design":"Use Convex aggregation queries to count leads by stage/temperature. Create Kanban-style columns or funnel visualization using shadcn/ui cards. Color-code temperature (red/orange/blue). Make stages clickable to filter the activity feed. Consider both card view and table view options.","status":"tombstone","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T12:47:57.820364-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:57:43.039663-06:00","labels":["dashboard","frontend","visualization"],"deleted_at":"2026-01-30T13:57:43.039663-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t2s1","title":"Create Convex aggregation queries for pipeline statistics","description":"Build Convex query functions to aggregate leads by stage and temperature. Create queries: getPipelineStats() returning counts per stage (New, Contacted, Qualified, Proposal, Closing), getTemperatureCounts() returning hot/warm/cold counts per stage, and getPipelineHealth() combining both for dashboard consumption. Use Convex's built-in aggregation patterns with proper indexing for performance.\n\n**Context:** The pipeline overview needs real-time data aggregation. These queries power both the visual display and the counts, so they need to be efficient and accurate. Brokers will trust these numbers for business decisions.\n\n**Testing Requirements:**\n- **Unit Tests:** Test getPipelineStats() returns correct counts with mock leads across all stages, test getTemperatureCounts() correctly groups by temperature within each stage, test empty state returns zeros not nulls, test queries handle 1000+ leads performantly","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:50:41.64287-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:35.733079-06:00","labels":["backend","convex"],"deleted_at":"2026-01-30T13:58:35.733079-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t2s2","title":"Build PipelineStageColumn component with temperature indicators","description":"Create a reusable PipelineStageColumn component using shadcn/ui Card as the base. Display stage name, lead count badge, and a mini temperature breakdown (colored dots or bar showing hot/warm/cold distribution). Props: stageName, leadCount, temperatureCounts, onClick. Style temperature indicators: red for hot, orange for warm, blue for cold. Make the entire column clickable to trigger filtering.\n\n**Context:** Each column represents a stage in the sales pipeline. The temperature visualization within each column is crucial - brokers need to see at a glance which stages have hot leads that need immediate attention versus cold leads that might be stalling.\n\n**Testing Requirements:**\n- **Unit Tests:** Test renders stage name and count correctly, test temperature indicators show correct colors, test onClick fires with stage identifier, test handles zero counts gracefully, test accessibility labels present","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:42.096795-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:35.388232-06:00","labels":["components","frontend"],"dependencies":[{"issue_id":"test-e10t2s2","depends_on_id":"test-e10t2s1","type":"blocks","created_at":"2026-01-30T12:52:26.246158-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:35.388232-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t2s3","title":"Assemble PipelineOverview container with Kanban layout","description":"Create PipelineOverview component that fetches data using the Convex queries and renders 5 PipelineStageColumn components in a horizontal Kanban-style layout. Use CSS Grid or Flexbox for responsive columns. Add a header showing total pipeline count and overall health indicator. Wire up column clicks to emit onStageFilter events that parent components can use to filter the activity feed. Include loading skeleton state.\n\n**Context:** This is the main dashboard widget brokers see first. The Kanban layout is intuitive for sales pipeline visualization and matches mental models from tools like Trello or Pipedrive. The stage filter connection is key for drilling down from overview to specifics.\n\n**Testing Requirements:**\n- **Unit Tests:** Test renders all 5 stage columns with correct data, test loading state shows skeletons, test onStageFilter callback fires with correct stage, test responsive layout adjusts for mobile, test error state displays user-friendly message","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:42.511165-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:35.116941-06:00","labels":["components","frontend"],"dependencies":[{"issue_id":"test-e10t2s3","depends_on_id":"test-e10t2s1","type":"blocks","created_at":"2026-01-30T12:52:26.510832-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t2s3","depends_on_id":"test-e10t2s2","type":"blocks","created_at":"2026-01-30T12:52:26.816963-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:35.116941-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t2s4","title":"Integrate pipeline overview into dashboard and verify end-to-end","description":"Add PipelineOverview to the main dashboard page layout. Connect the onStageFilter event to update the activity feed filter state. Add sample/seed data with leads in various stages and temperatures. Start dev server and manually verify: columns display correct counts, temperature colors render, clicking a stage filters the activity feed, loading states work, responsive on mobile viewport.\n\n**Context:** Integration testing ensures the ROI visualization actually works for brokers. This is where we prove the 30,000ft view they've always wanted is real and responsive. Any disconnect between overview and activity feed would break trust.\n\n**Testing Requirements:**\n- **Unit Tests:** Test dashboard renders PipelineOverview without errors, test stage filter state propagates to activity feed component, test seed data produces expected visual output","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T12:50:42.915636-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:34.890881-06:00","labels":["frontend","integration"],"dependencies":[{"issue_id":"test-e10t2s4","depends_on_id":"test-e10t2s3","type":"blocks","created_at":"2026-01-30T12:52:27.18127-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:34.890881-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t3","title":"Implement agent activity summary and compliance reporting","description":"Build agent performance cards showing call counts, compliance rates, average call duration, and leads contacted per agent. Include check-in compliance report showing which agents are taking calls vs. ignoring them.\n\n**Context:** Brokers need to know WHO is using RealHerd and who isn't. The agent summary answers 'is my team actually using this?' and the compliance report shows who needs a talking-to. This drives CRM adoption - the core problem we're solving.\n\n**Testing Requirements:**\n- **Unit Tests:** Compliance rate calculation, stats aggregation functions, threshold badge logic, date range filtering\n- **Integration Tests:** Agent metrics accuracy, compliance report data correctness, filtering by date range","design":"Create AgentSummaryCard with avatar, stats grid, and compliance indicator. Build aggregation queries in Convex for per-agent metrics. Compliance calculated as (calls taken / check-ins received). Use color-coded badges for compliance thresholds (green \u003e80%, yellow 50-80%, red \u003c50%).","status":"tombstone","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T12:47:58.192376-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:07.921026-06:00","labels":["compliance","dashboard","frontend"],"dependencies":[{"issue_id":"test-e10t3","depends_on_id":"test-e10","type":"parent-child","created_at":"2026-01-30T12:47:58.353031-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t3","depends_on_id":"test-e10t1","type":"blocks","created_at":"2026-01-30T12:52:27.544593-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:07.921026-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t3s1","title":"Create TypeScript types and Convex schema for agent metrics","description":"Define TypeScript interfaces for AgentMetrics (callCount, complianceRate, avgCallDuration, leadsContacted, checkInsReceived, callsTaken). Add any needed indexes to Convex schema for efficient per-agent aggregation queries. Include ComplianceThreshold enum (green \u003e80%, yellow 50-80%, red \u003c50%).\n\n**Context:** Type-safe foundation ensures the metrics we display match what we calculate. These types will be shared between Convex queries and React components.\n\n**Testing Requirements:**\n- **Unit Tests:** Test ComplianceThreshold calculation function with edge cases: 0/0 check-ins, 100% compliance, boundary values (exactly 50%, exactly 80%), and typical values. Verify TypeScript compilation succeeds.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T12:50:43.323753-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:34.59586-06:00","labels":["backend","types"],"dependencies":[{"issue_id":"test-e10t3s1","depends_on_id":"test-e10t3","type":"parent-child","created_at":"2026-01-30T12:50:43.499328-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:34.59586-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t3s2","title":"Build Convex aggregation queries for per-agent metrics","description":"Create Convex query functions: getAgentMetrics(agentId, dateRange) returning call counts, avg duration, leads contacted; getAgentCompliance(agentId, dateRange) calculating calls taken / check-ins received; getTeamAgentsSummary(brokerId) returning all agents' metrics for dashboard. Use efficient aggregation patterns, consider pagination for large teams.\n\n**Context:** These queries power the entire agent dashboard. Performance matters because brokers will view this frequently. The compliance calculation (calls taken / check-ins received) is the key metric showing who's actually using RealHerd.\n\n**Testing Requirements:**\n- **Unit Tests:** Test getAgentMetrics with mock data: agent with 0 calls, agent with typical activity, date range filtering. Test getAgentCompliance edge cases: 0 check-ins (avoid division by zero), 100% compliance, partial compliance. Test getTeamAgentsSummary returns correct agent count and aggregated data.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:43.801599-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:34.334422-06:00","labels":["backend","convex"],"dependencies":[{"issue_id":"test-e10t3s2","depends_on_id":"test-e10t3","type":"parent-child","created_at":"2026-01-30T12:50:43.963222-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t3s2","depends_on_id":"test-e10t3s1","type":"blocks","created_at":"2026-01-30T12:52:27.81512-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:34.334422-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t3s3","title":"Create AgentSummaryCard component with stats and compliance indicator","description":"Build React component AgentSummaryCard displaying: agent avatar/name, stats grid (call count, avg duration, leads contacted), compliance rate with color-coded badge (green/yellow/red per thresholds). Use existing design system components. Component should accept AgentMetrics props and handle loading/error states.\n\n**Context:** This card is the visual answer to 'is this agent using RealHerd?' Brokers will scan these cards daily to spot underperformers. The color-coded compliance badge provides instant visual feedback without reading numbers.\n\n**Testing Requirements:**\n- **Unit Tests:** Test AgentSummaryCard renders correctly with: full metrics data, zero values, loading state, error state. Test compliance badge shows correct color at boundaries (79% = yellow, 80% = green, 49% = red, 50% = yellow). Snapshot test for visual regression.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:44.304886-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:34.094571-06:00","labels":["frontend","react"],"dependencies":[{"issue_id":"test-e10t3s3","depends_on_id":"test-e10t3","type":"parent-child","created_at":"2026-01-30T12:50:44.607988-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t3s3","depends_on_id":"test-e10t3s1","type":"blocks","created_at":"2026-01-30T12:52:28.073287-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:34.094571-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t3s4","title":"Wire up agent summary dashboard and verify end-to-end","description":"Create AgentComplianceReport page/section that uses getTeamAgentsSummary query and renders grid of AgentSummaryCard components. Add sorting (by compliance rate, call count) and filtering (by compliance threshold). Connect to broker dashboard navigation. Run dev server and verify with test data.\n\n**Context:** This brings everything together into the actual feature brokers will use. The sorting and filtering let brokers quickly find agents who need attention - the whole point of this visibility feature.\n\n**Testing Requirements:**\n- **Unit Tests:** Test AgentComplianceReport renders correct number of cards, test sorting logic (compliance ascending/descending, call count), test filtering by threshold. Integration test: verify Convex query is called with correct broker ID, cards render with query data. Manual verification: start dev server, navigate to report, confirm cards display with test data.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:50:44.901515-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:33.678723-06:00","labels":["frontend","integration"],"dependencies":[{"issue_id":"test-e10t3s4","depends_on_id":"test-e10t3","type":"parent-child","created_at":"2026-01-30T12:50:45.0826-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t3s4","depends_on_id":"test-e10t3s2","type":"blocks","created_at":"2026-01-30T12:52:28.385118-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t3s4","depends_on_id":"test-e10t3s3","type":"blocks","created_at":"2026-01-30T12:52:28.783457-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:33.678723-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t4","title":"Build stale lead alerts and attention-needed queue","description":"Create alert system highlighting leads that need attention - no contact in X days, hot leads going cold, scheduled follow-ups missed. Display as prioritized queue with one-click actions to assign or contact.\n\n**Context:** Stale leads are lost deals. Brokers lose money when hot leads go cold because no one followed up. This alert system turns passive visibility into active deal-saving, directly impacting brokerage revenue.\n\n**Testing Requirements:**\n- **Unit Tests:** Staleness calculation logic, urgency scoring algorithm, alert filtering, snooze functionality\n- **Integration Tests:** Alert accuracy against actual lead data, action buttons trigger correct operations, real-time alert updates","design":"Define staleness rules: no contact in 7 days for hot, 14 for warm, 30 for cold. Query Convex for leads matching staleness criteria. Create AlertCard with lead info, days stale, last contact, and action buttons. Sort by urgency (temperature × days stale). Include 'snooze' and 'assign to agent' quick actions.","status":"tombstone","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":240,"created_at":"2026-01-30T12:47:58.630516-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:07.619334-06:00","labels":["alerts","dashboard","frontend"],"dependencies":[{"issue_id":"test-e10t4","depends_on_id":"test-e10","type":"parent-child","created_at":"2026-01-30T12:47:59.119895-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:07.619334-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t4s1","title":"Define staleness rules and TypeScript types for alert system","description":"Create TypeScript types for stale lead alerts including StalenessRule interface (temperature, daysThreshold), StaleLeadAlert interface (leadId, leadName, temperature, daysSinceContact, lastContactDate, urgencyScore, assignedAgent). Define the staleness thresholds as constants: HOT_STALE_DAYS=7, WARM_STALE_DAYS=14, COLD_STALE_DAYS=30. Include urgency calculation formula: urgencyScore = temperatureWeight × daysSinceContact (where hot=3, warm=2, cold=1).\n\n**Context:** Type-safe foundation ensures the alert system correctly identifies and prioritizes stale leads. The urgency formula makes hot leads going stale surface faster than cold leads, which matches business priority.\n\n**Testing Requirements:**\n- **Unit Tests:** Test urgencyScore calculation: hot lead 7 days stale should score higher than warm lead 14 days stale. Test type validation for StaleLeadAlert interface. Verify threshold constants are correctly typed.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":30,"created_at":"2026-01-30T12:50:45.392255-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:33.355977-06:00","labels":["backend","types"],"dependencies":[{"issue_id":"test-e10t4s1","depends_on_id":"test-e10t4","type":"parent-child","created_at":"2026-01-30T12:50:45.630918-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:33.355977-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t4s2","title":"Create Convex query for stale leads matching staleness criteria","description":"Build Convex query 'getStaleLeads' that: 1) Fetches all active leads with their last contact date and temperature, 2) Filters leads where daysSinceLastContact exceeds their temperature's threshold, 3) Calculates urgency score for each, 4) Returns sorted by urgencyScore descending. Include optional brokerage filter for multi-tenant support. Handle edge case of leads with no contact history (treat as infinitely stale).\n\n**Context:** This query powers the attention-needed queue. Sorting by urgency ensures brokers see the most critical leads first - a hot lead going cold is more urgent than an already-cold lead sitting longer.\n\n**Testing Requirements:**\n- **Unit Tests:** Test query returns leads exceeding threshold (hot lead at 8 days appears, hot lead at 6 days doesn't). Test urgency sorting (hot 10-day stale ranks above warm 20-day stale). Test no-contact leads appear with high urgency. Test brokerage filter isolation.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:50:45.958597-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:33.080393-06:00","labels":["backend","convex"],"dependencies":[{"issue_id":"test-e10t4s2","depends_on_id":"test-e10t4","type":"parent-child","created_at":"2026-01-30T12:50:46.193856-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t4s2","depends_on_id":"test-e10t4s1","type":"blocks","created_at":"2026-01-30T12:52:29.339649-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:33.080393-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t4s3","title":"Build AlertCard component with lead info and action buttons","description":"Create AlertCard React component displaying: lead name, temperature badge (color-coded), days stale with warning intensity, last contact date/type, assigned agent (if any). Include action buttons: 'Contact Now' (opens lead detail/contact flow), 'Assign to Agent' (dropdown of available agents), 'Snooze' (options: 1 day, 3 days, 1 week with visual indicator). Style urgency visually - more stale = more prominent warning styling.\n\n**Context:** One-click actions are critical. A broker seeing 20 stale leads won't act if each requires 3 clicks. Snooze prevents alert fatigue for leads intentionally waiting (e.g., 'call back next week').\n\n**Testing Requirements:**\n- **Unit Tests:** Test AlertCard renders all lead info correctly. Test temperature badge shows correct color. Test action button click handlers fire with correct lead ID. Test snooze dropdown options appear. Test urgency styling changes with days stale value.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:46.522608-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:32.700685-06:00","labels":["component","frontend"],"dependencies":[{"issue_id":"test-e10t4s3","depends_on_id":"test-e10t4","type":"parent-child","created_at":"2026-01-30T12:50:46.935884-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t4s3","depends_on_id":"test-e10t4s1","type":"blocks","created_at":"2026-01-30T12:52:29.59395-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:32.700685-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t4s4","title":"Build StaleLeadQueue container with real-time updates and mutations","description":"Create StaleLeadQueue component that: 1) Uses Convex useQuery to fetch stale leads with real-time updates, 2) Renders AlertCard list sorted by urgency, 3) Implements 'Assign to Agent' mutation updating lead's assignedAgent field, 4) Implements 'Snooze' mutation that sets snoozedUntil timestamp (query filters out snoozed leads), 5) Shows empty state when no stale leads ('All leads are being actively worked!'). Add count badge showing total stale leads for dashboard summary.\n\n**Context:** Real-time updates mean when an agent contacts a lead, it disappears from the queue instantly. This creates a satisfying 'inbox zero' dynamic that encourages action. The count badge gives brokers at-a-glance health metrics.\n\n**Testing Requirements:**\n- **Unit Tests:** Test queue renders AlertCards in urgency order. Test assign mutation updates lead and removes from queue. Test snooze mutation hides lead until snoozeUntil passes. Test empty state appears when no stale leads. Test count badge matches visible items. Test real-time update removes lead when contacted.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:47.185686-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:32.231713-06:00","labels":["convex","frontend"],"dependencies":[{"issue_id":"test-e10t4s4","depends_on_id":"test-e10t4","type":"parent-child","created_at":"2026-01-30T12:50:47.426286-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t4s4","depends_on_id":"test-e10t4s2","type":"blocks","created_at":"2026-01-30T12:52:29.877933-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t4s4","depends_on_id":"test-e10t4s3","type":"blocks","created_at":"2026-01-30T12:52:30.342634-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:32.231713-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t5","title":"Add filtering, export, and mobile-responsive layout","description":"Implement comprehensive filtering (agent, date range, lead temperature, stage), CSV/PDF export for reports, and ensure entire dashboard is mobile-responsive for brokers checking on-the-go.\n\n**Context:** Brokers check dashboards from their phones between meetings. Team leads need to export reports for weekly meetings. Without mobile and export, the dashboard is limited to desk use - missing half the value proposition.\n\n**Testing Requirements:**\n- **Unit Tests:** Filter logic functions, CSV generation, URL param parsing/serialization, responsive breakpoint utilities\n- **Integration Tests:** Filter combinations across all dashboard components, export data accuracy, mobile layout at various breakpoints","design":"Build FilterBar component with agent multi-select, date picker, temperature toggles. Use URL search params for filter state (shareable links). Export via client-side CSV generation and server-side PDF (if needed). Mobile: stack columns vertically, collapsible filter panel, touch-friendly action buttons. Use shadcn/ui Sheet for mobile filters.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T12:47:59.337159-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:00:05.661097-06:00","labels":["dashboard","export","frontend","mobile"],"dependencies":[{"issue_id":"test-e10t5","depends_on_id":"test-e10","type":"parent-child","created_at":"2026-01-30T12:47:59.475657-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t5","depends_on_id":"test-e10t1","type":"blocks","created_at":"2026-01-30T12:52:30.880731-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t5","depends_on_id":"test-e10t3","type":"blocks","created_at":"2026-01-30T12:52:31.519736-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t5","depends_on_id":"test-e10t4","type":"blocks","created_at":"2026-01-30T12:52:31.779962-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T14:00:05.661097-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t5s1","title":"Build FilterBar component with URL state management","description":"Create FilterBar component with agent multi-select dropdown, date range picker, lead temperature toggles (hot/warm/cold), and pipeline stage filter. Use URL search params (useSearchParams) to persist filter state so links are shareable. Include a 'Clear filters' button. For mobile, wrap in shadcn/ui Sheet component that slides in from left with a filter icon trigger.\n\n**Context:** URL-based filter state lets brokers share specific views with team leads ('here's our hot leads this month'). Essential for collaboration and bookmarking common views.\n\n**Testing Requirements:**\n- **Unit Tests:** Test filter state serialization to/from URL params, test multi-select agent filtering, test date range validation (end \u003e= start), test temperature toggle combinations, test clear filters resets all state","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:47.664941-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:31.846701-06:00","labels":["dashboard","frontend"],"dependencies":[{"issue_id":"test-e10t5s1","depends_on_id":"test-e10t5","type":"parent-child","created_at":"2026-01-30T12:50:47.852324-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:31.846701-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t5s2","title":"Wire FilterBar to dashboard data queries","description":"Connect FilterBar state to the dashboard's data fetching layer. Modify existing queries (metrics, pipeline, agent performance) to accept filter parameters. Ensure filtered state updates all dashboard cards/charts simultaneously. Add loading states during filter changes. Debounce rapid filter changes to avoid excessive API calls.\n\n**Context:** Filters must affect the entire dashboard view consistently - brokers expect clicking 'Agent: John' to show only John's metrics everywhere, not just one section.\n\n**Testing Requirements:**\n- **Unit Tests:** Test query parameters are correctly passed to API calls, test debounce prevents multiple rapid calls, test all dashboard sections receive filtered data, test empty state when filters return no results","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:48.286239-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:31.465477-06:00","labels":["backend","dashboard","frontend"],"dependencies":[{"issue_id":"test-e10t5s2","depends_on_id":"test-e10t5","type":"parent-child","created_at":"2026-01-30T12:50:48.602234-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t5s2","depends_on_id":"test-e10t5s1","type":"blocks","created_at":"2026-01-30T12:52:32.080169-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:31.465477-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t5s3","title":"Implement CSV and PDF export functionality","description":"Add export dropdown with CSV and PDF options. CSV: client-side generation using current filtered view data - include metrics summary, pipeline deals, and agent stats in separate sheets. PDF: generate via server-side API route using filtered data, return downloadable file. Include current filter context in export filename (e.g., 'dashboard-2024-01-hot-leads.csv'). Add loading spinner during PDF generation.\n\n**Context:** Team leads export reports for weekly meetings. CSV for spreadsheet analysis, PDF for printing/sharing. Filename with filter context prevents confusion when multiple exports are saved.\n\n**Testing Requirements:**\n- **Unit Tests:** Test CSV generation includes all visible data, test CSV handles special characters and commas in data, test PDF API route returns valid file, test filename includes current filter parameters, test export respects current filter state","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:48.975893-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:31.114518-06:00","labels":["backend","dashboard","frontend"],"dependencies":[{"issue_id":"test-e10t5s3","depends_on_id":"test-e10t5","type":"parent-child","created_at":"2026-01-30T12:50:49.224927-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t5s3","depends_on_id":"test-e10t5s2","type":"blocks","created_at":"2026-01-30T12:52:32.367985-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:31.114518-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e10t5s4","title":"Make dashboard fully mobile-responsive with touch-friendly interactions","description":"Apply responsive layout to entire dashboard: stack metric cards vertically on mobile, make charts full-width with horizontal scroll for data tables, ensure touch targets are minimum 44px. FilterBar becomes collapsible Sheet on mobile (from 10.5.1). Add swipe gestures for pipeline stage navigation if applicable. Test on actual mobile viewport sizes (375px, 414px). Ensure action buttons (export, filters) are thumb-reachable at bottom of screen on mobile.\n\n**Context:** Brokers check dashboards from phones between client meetings - if it's not mobile-friendly, they won't use it in the field where quick decisions matter most.\n\n**Testing Requirements:**\n- **Unit Tests:** Test responsive breakpoints render correct layouts (mobile/tablet/desktop), test touch targets meet 44px minimum, test Sheet filter panel opens/closes correctly on mobile, test charts remain readable at mobile widths, test export buttons are accessible on small screens","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:49.649577-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:30.848916-06:00","labels":["dashboard","frontend","mobile"],"dependencies":[{"issue_id":"test-e10t5s4","depends_on_id":"test-e10t5","type":"parent-child","created_at":"2026-01-30T12:50:49.888765-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t5s4","depends_on_id":"test-e10t5s1","type":"blocks","created_at":"2026-01-30T12:52:32.646564-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t5s4","depends_on_id":"test-e10t5s2","type":"blocks","created_at":"2026-01-30T12:52:32.951403-06:00","created_by":"David Habedank"},{"issue_id":"test-e10t5s4","depends_on_id":"test-e10t5s3","type":"blocks","created_at":"2026-01-30T12:52:33.327441-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:30.848916-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11","title":"Polish, Empty States \u0026 Production Readiness","description":"Final polish including Shep mascot empty states, comprehensive error handling, loading states, settings pages, help integration, and performance optimization for production launch.\n\n**Context:** A product that works isn't enough - it needs to feel delightful and handle edge cases gracefully. Empty states with Shep, clear error recovery, and smooth onboarding are what turn a functional tool into a product people love.\n\n**Testing Requirements:**\n- **Unit Tests:** Error boundary behavior, loading state transitions, settings validation\n- **Integration Tests:** Full onboarding flow timing, error recovery paths, settings persistence\n- **Type Tests:** Settings schema validation, error message types\n- **E2E Tests:** New user complete onboarding in \u003c30 min, empty states display correctly, errors recover gracefully","acceptance_criteria":"- Shep mascot appears in all empty states (no calls yet, no leads, etc.)\n- Comprehensive error handling with friendly recovery messages\n- Loading states feel smooth, not jarring\n- All settings pages complete (org, team, personal preferences)\n- Help/support integration for stuck users\n- Mobile-responsive polish across all views\n- Performance optimized (\u003c2s page loads)\n- New brokerage can go live within 30 minutes","status":"tombstone","priority":1,"issue_type":"epic","owner":"david@habedank.org","estimated_minutes":1920,"created_at":"2026-01-30T12:47:21.729357-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:16.426798-06:00","labels":["polish","production","ux"],"dependencies":[{"issue_id":"test-e11","depends_on_id":"test-e10","type":"blocks","created_at":"2026-01-30T12:52:33.766558-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:16.426798-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"test-e11t1","title":"Design and implement Shep mascot empty states","description":"Create the Shep mascot component and implement it across all empty state scenarios throughout the app. This includes designing the mascot's various expressions/poses and integrating them with contextual messaging.\n\n**Context:** Empty states are critical user experience moments - they're when users first encounter features or when they've completed work. A friendly mascot transforms these from dead-ends into engaging moments that guide users forward. This directly impacts first impressions and user delight.\n\n**Testing Requirements:**\n- **Unit Tests:** EmptyState component renders correct variant, displays appropriate message and CTA, accessibility testing for alt text\n- **Integration Tests:** Empty states appear correctly when data is empty in CallList, LeadList, Dashboard, Pipeline views","design":"Create a reusable EmptyState component with Shep mascot SVG/illustration that accepts variants (welcome, no-calls, no-leads, all-caught-up, error). Each variant should have appropriate messaging and a clear CTA. Consider animation on mascot for extra polish. Store mascot assets in public folder or as React components.","status":"tombstone","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T12:47:59.721845-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:07.125516-06:00","labels":["design","frontend","ui"],"dependencies":[{"issue_id":"test-e11t1","depends_on_id":"test-e11","type":"parent-child","created_at":"2026-01-30T12:47:59.926147-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:07.125516-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t1s1","title":"Create Shep mascot SVG assets with variant expressions","description":"Design and create the Shep mascot SVG illustrations for each empty state variant: welcome (friendly wave), no-calls (curious/encouraging), no-leads (searching pose), all-caught-up (celebrating/relaxed), and error (apologetic/helpful). Export as optimized SVGs. Store in src/components/ui/shep/ as individual React components for flexibility.\n\n**Context:** The mascot needs distinct expressions to convey different emotional states - welcoming new users, encouraging action, celebrating completion, or softening errors. Having these as React components allows for future animation and dynamic styling.\n\n**Testing Requirements:**\n- **Unit Tests:** Test each Shep variant component renders without errors, accepts className prop for styling, renders valid SVG elements, snapshot tests for visual regression","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:50.275393-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:30.331342-06:00","labels":["design","frontend"],"dependencies":[{"issue_id":"test-e11t1s1","depends_on_id":"test-e11t1","type":"parent-child","created_at":"2026-01-30T12:50:50.625791-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:30.331342-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t1s2","title":"Build reusable EmptyState component with Shep integration","description":"Create EmptyState component that accepts variant prop ('welcome' | 'no-calls' | 'no-leads' | 'all-caught-up' | 'error'), renders appropriate Shep mascot, displays contextual title and description, and includes optional CTA button. Use composition pattern for flexibility. Include subtle CSS animation on Shep (gentle bounce or float) using Tailwind animate classes.\n\n**Context:** A single reusable component ensures consistent empty state UX across the app. The variant system makes it easy to add new states while maintaining the Shep personality throughout.\n\n**Testing Requirements:**\n- **Unit Tests:** Test EmptyState renders correct Shep variant for each variant prop, test title/description/CTA rendering, test CTA onClick callback fires, test animation classes are applied, test accessibility (proper heading hierarchy, button labeling)","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:51.091119-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:29.799752-06:00","labels":["frontend"],"dependencies":[{"issue_id":"test-e11t1s2","depends_on_id":"test-e11t1","type":"parent-child","created_at":"2026-01-30T12:50:51.588315-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t1s2","depends_on_id":"test-e11t1s1","type":"blocks","created_at":"2026-01-30T12:52:34.086042-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:29.799752-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t1s3","title":"Integrate EmptyState component across app screens","description":"Replace existing empty states or add EmptyState component to: Dashboard (welcome state for new users, all-caught-up when no pending items), Calls list (no-calls variant), Leads/Contacts list (no-leads variant), and any error boundaries (error variant). Wire up CTAs to appropriate actions (e.g., 'Import contacts' button, 'Make your first call').\n\n**Context:** Empty states should guide users to the next logical action. Each placement needs a thoughtful CTA that moves users forward rather than leaving them stranded.\n\n**Testing Requirements:**\n- **Unit Tests:** Test each page component renders EmptyState when data is empty, test CTA buttons navigate/trigger correct actions, test conditional rendering logic (show EmptyState only when truly empty, not during loading)","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:50:52.255644-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:27.896444-06:00","labels":["frontend"],"dependencies":[{"issue_id":"test-e11t1s3","depends_on_id":"test-e11t1","type":"parent-child","created_at":"2026-01-30T12:50:52.722676-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t1s3","depends_on_id":"test-e11t1s2","type":"blocks","created_at":"2026-01-30T12:52:34.389165-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:27.896444-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t1s4","title":"Visual QA and polish empty states across all viewports","description":"Test all EmptyState implementations across mobile, tablet, and desktop breakpoints. Verify Shep animations perform well (no jank), mascot scales appropriately, text remains readable, and CTAs are easily tappable on mobile. Fix any responsive issues. Take screenshots for documentation.\n\n**Context:** Empty states are often the first thing users see - they need to look polished across all devices. Mobile is especially important as agents may check the app from their phones.\n\n**Testing Requirements:**\n- **Unit Tests:** Test responsive classes are applied correctly, verify animation keyframes exist in CSS, run Lighthouse accessibility audit on pages with empty states","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T12:50:53.361679-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:27.433895-06:00","labels":["frontend","qa"],"dependencies":[{"issue_id":"test-e11t1s4","depends_on_id":"test-e11t1","type":"parent-child","created_at":"2026-01-30T12:50:53.575372-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t1s4","depends_on_id":"test-e11t1s3","type":"blocks","created_at":"2026-01-30T12:52:34.736122-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:27.433895-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t2","title":"Implement comprehensive error handling and recovery UI","description":"Create a unified error boundary system with friendly error messages, recovery actions, and fallback UI. Handle API failures, network issues, auth errors, and unexpected exceptions gracefully.\n\n**Context:** When things go wrong, users need to understand what happened and have a clear path forward. Cryptic errors or blank screens destroy trust. Friendly recovery messaging is especially important for less tech-savvy brokerage owners who may panic at errors.\n\n**Testing Requirements:**\n- **Unit Tests:** ErrorBoundary catches errors and renders fallback, retry button triggers refetch, toast notifications display and dismiss correctly\n- **Integration Tests:** Simulate API failures, network disconnection, auth expiration - verify graceful degradation and recovery flows","design":"Create ErrorBoundary wrapper components at route and feature levels. Build toast notification system for transient errors. Implement retry mechanisms for failed API calls. Create dedicated error page for unrecoverable states. Use Shep mascot in error states where appropriate. Log errors to monitoring service.","status":"tombstone","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T12:48:00.264767-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:06.736548-06:00","labels":["error-handling","frontend","ux"],"dependencies":[{"issue_id":"test-e11t2","depends_on_id":"test-e11","type":"parent-child","created_at":"2026-01-30T12:48:00.519352-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t2","depends_on_id":"test-e11t1","type":"blocks","created_at":"2026-01-30T12:52:35.131633-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:06.736548-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t2s1","title":"Create ErrorBoundary component system with fallback UI","description":"Build React ErrorBoundary components for route-level and feature-level error catching. Create friendly fallback UI components that display the Shep mascot, human-readable error messages, and clear recovery actions (retry, go home, contact support). Include different severity levels: warning (yellow), error (red), info (blue).\n\n**Context:** ErrorBoundaries are React's way to catch JavaScript errors anywhere in the component tree. Without them, a single component crash takes down the whole app - terrifying for non-technical brokerage owners.\n\n**Testing Requirements:**\n- **Unit Tests:** Test ErrorBoundary catches thrown errors, test fallback UI renders correctly, test recovery button calls reset function, test different error severity levels display correct styling, test Shep mascot renders in error state","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:53.863684-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:27.058252-06:00","labels":["error-handling","frontend"],"dependencies":[{"issue_id":"test-e11t2s1","depends_on_id":"test-e11t2","type":"parent-child","created_at":"2026-01-30T12:50:54.064636-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:27.058252-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t2s2","title":"Implement toast notification system for transient errors","description":"Create a toast/snackbar notification system for non-blocking errors and status messages. Use react-hot-toast or similar library. Implement toast types: success (green), error (red), warning (yellow), info (blue). Include auto-dismiss timers, manual dismiss, and optional action buttons. Position toasts consistently (top-right or bottom-right).\n\n**Context:** Transient errors like 'Failed to save, retrying...' shouldn't block the UI. Toasts let users continue working while being informed. Critical for busy team leads who can't afford workflow interruptions.\n\n**Testing Requirements:**\n- **Unit Tests:** Test toast appears on trigger, test auto-dismiss after timeout, test manual dismiss works, test action button callback fires, test multiple toasts stack correctly, test different toast types have correct styling","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:50:54.331446-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:26.707037-06:00","labels":["error-handling","frontend"],"dependencies":[{"issue_id":"test-e11t2s2","depends_on_id":"test-e11t2","type":"parent-child","created_at":"2026-01-30T12:50:54.552966-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:26.707037-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t2s3","title":"Build API error handling utilities with retry logic","description":"Create centralized error handling utilities for API calls. Implement exponential backoff retry for network failures (max 3 retries). Build error classification: isNetworkError, isAuthError (401), isRateLimited (429), isServerError (5xx). Create user-friendly error message mapper that converts technical errors to plain English. Integrate with toast system for automatic error notifications.\n\n**Context:** API calls fail for many reasons - network blips, auth expiration, rate limits. Smart retry logic with friendly messages prevents users from seeing cryptic 'Error 500' messages that cause panic.\n\n**Testing Requirements:**\n- **Unit Tests:** Test retry logic attempts correct number of times, test exponential backoff timing, test error classification correctly identifies error types, test auth errors (401) trigger logout flow, test rate limit (429) shows appropriate message, test error message mapper returns friendly strings for each error type","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:54.86304-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:26.443916-06:00","labels":["api","error-handling","frontend"],"dependencies":[{"issue_id":"test-e11t2s3","depends_on_id":"test-e11t2","type":"parent-child","created_at":"2026-01-30T12:50:55.099561-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t2s3","depends_on_id":"test-e11t2s2","type":"blocks","created_at":"2026-01-30T12:52:35.475236-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:26.443916-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t2s4","title":"Create dedicated error pages and wire up error logging","description":"Build dedicated error pages: 404 Not Found, 500 Server Error, Network Offline, Session Expired. Each page includes Shep mascot, friendly explanation, and clear next steps. Implement error logging utility that captures errors with context (user ID, route, action attempted) ready for future monitoring service integration. Wire ErrorBoundaries to use these pages for unrecoverable errors.\n\n**Context:** When something truly breaks, users need a friendly dead-end that explains what happened and what to do. Logging captures the details developers need to fix issues users report.\n\n**Testing Requirements:**\n- **Unit Tests:** Test 404 page renders with correct messaging, test 500 page shows retry and contact support options, test offline page detects network restoration, test session expired page has login redirect, test error logger captures error stack and context, test ErrorBoundary routes to correct error page based on error type","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:55.342943-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:26.085885-06:00","labels":["error-handling","frontend","logging"],"dependencies":[{"issue_id":"test-e11t2s4","depends_on_id":"test-e11t2","type":"parent-child","created_at":"2026-01-30T12:50:55.587564-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t2s4","depends_on_id":"test-e11t2s1","type":"blocks","created_at":"2026-01-30T12:52:35.815694-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t2s4","depends_on_id":"test-e11t2s3","type":"blocks","created_at":"2026-01-30T12:52:36.085958-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:26.085885-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t3","title":"Polish loading states and skeleton screens","description":"Replace spinner-only loading states with contextual skeleton screens. Ensure loading states feel smooth with appropriate animations and don't cause layout shift.\n\n**Context:** Perceived performance is as important as actual performance. Users feel like the app is faster when they see meaningful skeleton content rather than spinners. Smooth transitions prevent the 'jarring' feeling that makes apps feel cheap.\n\n**Testing Requirements:**\n- **Unit Tests:** Skeleton components render with correct dimensions, shimmer animation runs, Suspense boundaries trigger skeletons\n- **Integration Tests:** Loading states appear during data fetches, no layout shift when content loads, transitions feel smooth on throttled network","design":"Create skeleton variants for each major component (CallCard, LeadCard, DashboardStats, etc.). Use CSS shimmer animation for skeletons. Implement Suspense boundaries strategically. Ensure skeleton dimensions match loaded content to prevent layout shift. Consider optimistic UI updates for user actions.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":240,"created_at":"2026-01-30T12:48:00.74951-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:00:05.281369-06:00","labels":["frontend","performance","ui"],"dependencies":[{"issue_id":"test-e11t3","depends_on_id":"test-e11","type":"parent-child","created_at":"2026-01-30T12:48:00.914522-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T14:00:05.281369-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t3s1","title":"Create base skeleton component with shimmer animation","description":"Build a reusable Skeleton component with CSS shimmer animation. Support variants: 'text' (single line), 'title' (larger text), 'circle' (avatar), 'rectangle' (card/image). Props should include width, height, and className for customization. Use CSS keyframes for the shimmer effect - gradient that moves left to right. Match Tailwind's color system (gray-200 base, gray-100 shimmer highlight).\n\n**Context:** A consistent skeleton component ensures all loading states look cohesive and professional. The shimmer animation gives visual feedback that something is happening, reducing perceived wait time.\n\n**Testing Requirements:**\n- **Unit Tests:** Test Skeleton renders each variant correctly, test custom width/height props apply, test className prop merges correctly, verify shimmer animation CSS class is applied","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T12:50:55.907161-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:25.726224-06:00","labels":["components","frontend"],"dependencies":[{"issue_id":"test-e11t3s1","depends_on_id":"test-e11t3","type":"parent-child","created_at":"2026-01-30T12:50:56.089168-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:25.726224-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t3s2","title":"Create skeleton variants for CallCard and LeadCard","description":"Build CallCardSkeleton and LeadCardSkeleton components that exactly match the dimensions of their loaded counterparts. CallCardSkeleton: avatar circle, title line, two smaller text lines, action button area. LeadCardSkeleton: name line, property address line, status badge placeholder, contact info lines. Use flexbox/grid matching actual components to prevent layout shift. Export from same files as real components.\n\n**Context:** These are the most frequently seen components in the app. Their skeletons need to exactly match dimensions to prevent jarring layout shifts when data loads.\n\n**Testing Requirements:**\n- **Unit Tests:** Test CallCardSkeleton renders correct number of skeleton elements, test LeadCardSkeleton structure matches LeadCard, verify skeleton height matches loaded component height (snapshot or computed style), test components render without props","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:50:56.332461-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:25.313109-06:00","labels":["components","frontend"],"dependencies":[{"issue_id":"test-e11t3s2","depends_on_id":"test-e11t3","type":"parent-child","created_at":"2026-01-30T12:50:56.552197-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t3s2","depends_on_id":"test-e11t3s1","type":"blocks","created_at":"2026-01-30T12:52:36.378745-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:25.313109-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t3s3","title":"Create skeleton variants for DashboardStats and list views","description":"Build DashboardStatsSkeleton (grid of stat card skeletons with number + label placeholders), CallListSkeleton (renders 3-5 CallCardSkeleton items), and LeadListSkeleton (renders 4-6 LeadCardSkeleton items). List skeletons should accept optional 'count' prop to customize number of items. Add subtle stagger to shimmer animations on list items for visual polish.\n\n**Context:** Dashboard is the first thing users see - its skeleton sets the tone for perceived performance. List skeletons prevent the empty void feeling while data loads.\n\n**Testing Requirements:**\n- **Unit Tests:** Test DashboardStatsSkeleton renders correct grid structure, test list skeletons render default item count, test custom count prop works, verify stagger animation delay increases per item","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T12:50:56.782552-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:25.021454-06:00","labels":["components","frontend"],"dependencies":[{"issue_id":"test-e11t3s3","depends_on_id":"test-e11t3","type":"parent-child","created_at":"2026-01-30T12:50:57.135502-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t3s3","depends_on_id":"test-e11t3s2","type":"blocks","created_at":"2026-01-30T12:52:36.647857-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:25.021454-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t3s4","title":"Replace existing loading states with skeleton screens and add Suspense boundaries","description":"Audit all current loading states (search for 'loading', 'isLoading', 'Spinner'). Replace each with appropriate skeleton component. Add React Suspense boundaries around: dashboard sections, call lists, lead lists, agent views. Ensure fallback props use correct skeleton components. Test that layout doesn't shift when data loads. Remove old spinner-only implementations. Add 150ms minimum display time for skeletons to prevent flash for fast loads.\n\n**Context:** This is where the UX improvement actually lands. Users will now see meaningful skeleton content instead of generic spinners, making the app feel faster and more polished.\n\n**Testing Requirements:**\n- **Unit Tests:** Test Suspense boundaries render skeleton fallbacks, test skeleton-to-content transition doesn't cause layout shift (measure container dimensions), test minimum display time prevents skeleton flash, verify no remaining spinner-only loading states in codebase","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:57.403873-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:24.631291-06:00","labels":["frontend","ux"],"dependencies":[{"issue_id":"test-e11t3s4","depends_on_id":"test-e11t3","type":"parent-child","created_at":"2026-01-30T12:50:57.585478-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t3s4","depends_on_id":"test-e11t3s3","type":"blocks","created_at":"2026-01-30T12:52:37.006764-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:24.631291-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t4","title":"Build settings pages (org, team, personal preferences)","description":"Create complete settings interface including organization settings (branding, integrations), team management (roles, permissions), and personal preferences (notifications, display). Include FUB connection management.\n\n**Context:** Settings are where admins configure the product for their brokerage. Without complete settings pages, customers can't customize their experience or manage their team - blocking production deployment for any brokerage with specific needs.\n\n**Testing Requirements:**\n- **Unit Tests:** Settings forms validate input, save handlers update Convex, role-based visibility works correctly\n- **Integration Tests:** Full settings flow - update org name, invite team member, change personal preferences, reconnect FUB integration","design":"Create tabbed settings layout with sections: Organization (name, logo, FUB integration status), Team (member list, role assignment, invites), Personal (notification preferences, timezone, display settings). Use forms with validation. Show current FUB sync status and reconnection options. Implement role-based access to different settings sections.","status":"tombstone","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":420,"created_at":"2026-01-30T12:48:01.158488-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:06.367363-06:00","labels":["backend","frontend","settings"],"dependencies":[{"issue_id":"test-e11t4","depends_on_id":"test-e11","type":"parent-child","created_at":"2026-01-30T12:48:01.348962-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:06.367363-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t4s1","title":"Create settings layout with tabbed navigation structure","description":"Build the main settings page layout with tab navigation for Organization, Team, and Personal sections. Create the routing structure (/settings, /settings/organization, /settings/team, /settings/personal). Implement tab component that highlights active section and handles navigation. Include role-based visibility logic to hide tabs users don't have access to (e.g., non-admins can't see Organization tab).\n\n**Context:** The tabbed layout is the foundation for all settings content. Getting the navigation and access control right first means subsequent subtasks can focus purely on form content without worrying about structure or permissions.\n\n**Testing Requirements:**\n- **Unit Tests:** Test tab navigation renders correct tabs based on user role, test route changes update active tab, test unauthorized users are redirected from restricted tabs, test tab keyboard navigation accessibility","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:50:57.855603-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:24.36432-06:00","labels":["frontend","navigation"],"dependencies":[{"issue_id":"test-e11t4s1","depends_on_id":"test-e11t4","type":"parent-child","created_at":"2026-01-30T12:50:58.149611-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:24.36432-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t4s2","title":"Build Organization settings section with FUB integration status","description":"Create Organization settings tab content with forms for: brokerage name, logo upload, and FUB integration management. Display current FUB sync status (connected/disconnected, last sync time, sync health). Include reconnect button that triggers OAuth flow and disconnect option with confirmation. Show API usage stats if available. Use react-hook-form with zod validation for all form fields.\n\n**Context:** Organization settings control the brokerage's identity and their crucial FUB connection. FUB integration status is especially important since the entire product depends on this data pipeline working - admins need visibility into sync health and easy recovery options.\n\n**Testing Requirements:**\n- **Unit Tests:** Test form validation for org name (required, max length), test logo upload preview and file type validation, test FUB status display for connected/disconnected states, test reconnect button triggers auth flow, test disconnect shows confirmation modal","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:58.387648-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:24.056599-06:00","labels":["forms","frontend","integrations"],"dependencies":[{"issue_id":"test-e11t4s2","depends_on_id":"test-e11t4","type":"parent-child","created_at":"2026-01-30T12:50:58.712817-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t4s2","depends_on_id":"test-e11t4s1","type":"blocks","created_at":"2026-01-30T12:52:37.385759-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:24.056599-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t4s3","title":"Build Team management section with roles and invites","description":"Create Team settings tab with: member list table showing name, email, role, and status; role assignment dropdown (Admin, Manager, Agent); invite new member form with email and role selection; pending invites list with resend/revoke options. Implement bulk actions for role changes. Show last active timestamp for each member. Include search/filter for larger teams.\n\n**Context:** Team management is how brokerage owners control who has access and what they can do. With teams of 20-100 agents, the list needs to be scannable and bulk operations save significant time. Role assignments directly affect what settings users can access.\n\n**Testing Requirements:**\n- **Unit Tests:** Test member list renders with correct columns, test role dropdown updates member role, test invite form validates email format, test pending invites show resend/revoke actions, test search filters member list correctly, test bulk role change applies to selected members","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:59.286608-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:23.604634-06:00","labels":["forms","frontend","team-management"],"dependencies":[{"issue_id":"test-e11t4s3","depends_on_id":"test-e11t4","type":"parent-child","created_at":"2026-01-30T12:50:59.46929-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t4s3","depends_on_id":"test-e11t4s1","type":"blocks","created_at":"2026-01-30T12:52:37.960513-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:23.604634-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t4s4","title":"Build Personal preferences section and verify all settings save correctly","description":"Create Personal settings tab with: notification preferences (email frequency, alert types toggles), timezone selection dropdown, display settings (date format, default view preferences). All forms should auto-save or have explicit save buttons with loading states. Add success/error toast notifications for all save operations. Run through all three tabs ensuring forms submit correctly, validation works, and saved values persist on page refresh.\n\n**Context:** Personal preferences let each user customize their experience without affecting others. This is also the verification step - settings that don't actually save are worse than no settings at all. Testing the full save/load cycle ensures the settings pages actually work end-to-end.\n\n**Testing Requirements:**\n- **Unit Tests:** Test notification toggles save state correctly, test timezone dropdown shows user's current selection, test display format changes apply immediately, test form submission shows loading state, test success toast appears after save, test error toast appears on API failure, test refreshing page loads previously saved values","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:59.84296-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:23.349386-06:00","labels":["forms","frontend","preferences"],"dependencies":[{"issue_id":"test-e11t4s4","depends_on_id":"test-e11t4","type":"parent-child","created_at":"2026-01-30T12:51:00.090073-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t4s4","depends_on_id":"test-e11t4s1","type":"blocks","created_at":"2026-01-30T12:52:38.224017-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:23.349386-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t5","title":"Mobile responsive polish and help/support integration","description":"Audit and fix mobile responsiveness across all views. Add help integration points including contextual tooltips, help links, and support contact options for stuck users.\n\n**Context:** Agents and team leads often check pipeline on mobile between showings. Broken mobile views mean lost engagement. Help integration ensures users can self-serve or reach support rather than churning when confused.\n\n**Testing Requirements:**\n- **Unit Tests:** Components render correctly at mobile breakpoints, HelpTooltip displays on hover/tap, help drawer opens and closes\n- **Integration Tests:** Full mobile user flow - login, view dashboard, check calls, access settings on mobile viewport. Help integration accessible from all main views.","design":"Audit each view at 375px, 768px, 1024px breakpoints. Fix navigation collapse, table responsiveness, modal sizing. Add HelpTooltip component for complex features. Create help drawer/modal with FAQ and support contact. Consider Intercom or similar for chat support. Add onboarding tour for first-time users.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T12:48:01.563908-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:00:04.730914-06:00","labels":["frontend","mobile","support","ux"],"dependencies":[{"issue_id":"test-e11t5","depends_on_id":"test-e11","type":"parent-child","created_at":"2026-01-30T12:48:01.726723-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t5","depends_on_id":"test-e11t1","type":"blocks","created_at":"2026-01-30T12:52:38.519322-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t5","depends_on_id":"test-e11t2","type":"blocks","created_at":"2026-01-30T12:52:38.899756-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t5","depends_on_id":"test-e11t3","type":"blocks","created_at":"2026-01-30T12:52:39.144799-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t5","depends_on_id":"test-e11t4","type":"blocks","created_at":"2026-01-30T12:52:39.44223-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T14:00:04.730914-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t5s1","title":"Audit and fix mobile responsive issues across all views","description":"Systematically test all views at 375px, 768px, and 1024px breakpoints. Document issues in each view (dashboard, pipeline, agent detail, settings). Fix navigation collapse behavior, ensure hamburger menu works correctly. Fix table responsiveness - consider horizontal scroll or card layout for narrow screens. Fix modal sizing to not overflow on mobile. Ensure touch targets are minimum 44px. Test form inputs don't zoom on iOS.\n\n**Context:** Agents check pipeline between showings on mobile. Broken layouts mean they won't use the app, defeating the accountability purpose. Mobile-first real estate workflows are common.\n\n**Testing Requirements:**\n- **Unit Tests:** Test responsive breakpoint CSS classes apply correctly. Test navigation collapse state management. Test table component renders card view below 768px. Visual regression tests at each breakpoint.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:51:00.413378-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:22.701061-06:00","labels":["frontend","mobile","polish"],"dependencies":[{"issue_id":"test-e11t5s1","depends_on_id":"test-e11t5","type":"parent-child","created_at":"2026-01-30T12:51:00.614837-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:22.701061-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t5s2","title":"Create HelpTooltip component for contextual help","description":"Build a reusable HelpTooltip component that shows explanatory text on hover/tap. Props: content (string or ReactNode), placement (top/bottom/left/right), trigger (hover/click for mobile). Use Radix UI Tooltip or similar accessible primitive. Style consistently with design system. Add to complex features: pipeline stages, score explanations, sync status indicators, filter options.\n\n**Context:** Users need in-context help for domain-specific concepts like 'stale contact' or 'pipeline stage'. Tooltips reduce confusion without requiring users to leave their workflow.\n\n**Testing Requirements:**\n- **Unit Tests:** Test tooltip renders on hover, test click trigger for mobile, test keyboard accessibility (focus shows tooltip), test placement options, test custom content renders correctly.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:51:00.924165-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:22.244764-06:00","labels":["accessibility","component","frontend"],"dependencies":[{"issue_id":"test-e11t5s2","depends_on_id":"test-e11t5","type":"parent-child","created_at":"2026-01-30T12:51:01.162709-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:22.244764-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t5s3","title":"Build help drawer with FAQ and support contact","description":"Create a HelpDrawer component accessible from header help icon (?). Include: searchable FAQ section with common questions (What does stale mean? How do I sync? Why is my data delayed?), support contact form or mailto link, link to documentation/guides. Use Sheet/Drawer pattern for mobile-friendly slide-in. Consider keyboard shortcut (? key) to open. Store FAQ content in separate file for easy updates.\n\n**Context:** When users are stuck, they need a clear path to answers or support. A help drawer keeps them in the app rather than abandoning. Self-serve FAQ reduces support load.\n\n**Testing Requirements:**\n- **Unit Tests:** Test drawer opens/closes correctly, test FAQ search filters results, test support form validation, test keyboard shortcut opens drawer, test focus trap when open.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:51:01.46216-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:21.938985-06:00","labels":["component","frontend","support"],"dependencies":[{"issue_id":"test-e11t5s3","depends_on_id":"test-e11t5","type":"parent-child","created_at":"2026-01-30T12:51:01.640616-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t5s3","depends_on_id":"test-e11t5s2","type":"blocks","created_at":"2026-01-30T12:52:39.759478-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:21.938985-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t5s4","title":"Add onboarding tour for first-time users","description":"Implement a guided tour using react-joyride or similar library. Tour should highlight: main navigation, pipeline overview, how to view agent details, where to find help. Trigger on first login (check localStorage or user metadata). Allow skip and 'don't show again'. Show progress indicators (step 3 of 5). Ensure tour works on mobile with appropriate positioning. Add 'Restart tour' option in help drawer.\n\n**Context:** First-time users need orientation to understand what RealHerd offers. A quick tour increases activation and reduces early churn from confusion.\n\n**Testing Requirements:**\n- **Unit Tests:** Test tour starts on first visit, test skip functionality persists preference, test tour step navigation (next/prev/skip), test mobile positioning doesn't overflow, test 'restart tour' resets state.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:51:01.931575-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:21.671305-06:00","labels":["frontend","onboarding","ux"],"dependencies":[{"issue_id":"test-e11t5s4","depends_on_id":"test-e11t5","type":"parent-child","created_at":"2026-01-30T12:51:02.123353-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t5s4","depends_on_id":"test-e11t5s3","type":"blocks","created_at":"2026-01-30T12:52:40.027223-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:21.671305-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t6","title":"Performance optimization and production readiness verification","description":"Optimize for \u003c2s page loads including bundle analysis, image optimization, query efficiency, and caching. Verify new brokerage onboarding completes within 30 minutes. Create production checklist.\n\n**Context:** Performance directly impacts user perception and engagement. The 30-minute onboarding target is a business commitment - new customers need to see value quickly or they'll churn before they've even started. This task gates production launch.\n\n**Testing Requirements:**\n- **Unit Tests:** Lazy-loaded components load correctly, image optimization applied, query performance within bounds\n- **Integration Tests:** Lighthouse performance score \u003e80, full page loads \u003c2s on average connection, complete new brokerage setup (Clerk org → FUB connection → first sync → dashboard view) under 30 minutes","design":"Run Lighthouse audits, analyze bundle with @next/bundle-analyzer. Implement dynamic imports for heavy components. Optimize images with Next.js Image. Review Convex queries for N+1 problems. Add appropriate caching headers. Test onboarding flow end-to-end and document steps. Create production deployment checklist.","status":"tombstone","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T12:48:02.224573-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:57:42.444315-06:00","labels":["devops","performance","production"],"deleted_at":"2026-01-30T13:57:42.444315-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t6s1","title":"Bundle analysis and code splitting optimization","description":"Install and configure @next/bundle-analyzer. Run analysis to identify large dependencies. Implement dynamic imports for heavy components (charts, rich text editors, modals). Split code by route. Target: main bundle under 200KB gzipped.\n\n**Context:** Large bundles are the #1 cause of slow initial loads. Identifying and splitting heavy dependencies is the foundation for meeting the \u003c2s target.\n\n**Testing Requirements:**\n- **Unit Tests:** Verify dynamic imports load correctly with React.lazy/Suspense. Test that split chunks load on demand. Verify no import errors in console during navigation.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:51:02.364274-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:21.457033-06:00","labels":["frontend","performance"],"deleted_at":"2026-01-30T13:58:21.457033-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t6s2","title":"Image optimization and asset performance","description":"Audit all images and convert to Next.js Image component with proper sizing, formats (WebP/AVIF), and lazy loading. Implement blur placeholders for above-fold images. Add appropriate Cache-Control headers for static assets. Optimize any SVG icons.\n\n**Context:** Images often account for 50%+ of page weight. Next.js Image provides automatic optimization but requires proper configuration for each use case.\n\n**Testing Requirements:**\n- **Unit Tests:** Test Image components render with correct dimensions and srcset. Verify lazy loading triggers on scroll. Check blur placeholders display during load.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:51:02.841103-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:21.148121-06:00","labels":["frontend","performance"],"deleted_at":"2026-01-30T13:58:21.148121-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t6s3","title":"Convex query optimization and caching","description":"Review all Convex queries for N+1 problems using Convex dashboard. Add indexes for frequently filtered/sorted fields. Implement query result caching where appropriate. Optimize subscription patterns to avoid over-fetching. Test with realistic data volumes (100 agents, 1000 deals).\n\n**Context:** Database queries are often the bottleneck in perceived performance. N+1 queries multiply latency and Convex's real-time subscriptions need careful management to avoid unnecessary re-renders.\n\n**Testing Requirements:**\n- **Unit Tests:** Test queries return expected data with mock Convex. Verify index usage via Convex dashboard. Test query performance with 100+ records returns in \u003c100ms.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:51:03.291214-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:20.810105-06:00","labels":["backend","performance"],"deleted_at":"2026-01-30T13:58:20.810105-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e11t6s4","title":"Lighthouse audits, onboarding verification, and production checklist","description":"Run Lighthouse audits on key pages (dashboard, pipeline, agent detail). Fix any performance, accessibility, or SEO issues until scores are 90+. Time complete onboarding flow end-to-end (FUB connection, agent import, first pipeline view) - must complete in \u003c30 minutes. Create production checklist covering: environment variables, DNS/SSL, error tracking, analytics, backup verification, rollback procedure.\n\n**Context:** This is the final gate before production. Lighthouse provides objective performance metrics, the onboarding timing validates the business commitment, and the checklist ensures nothing is forgotten during deployment.\n\n**Testing Requirements:**\n- **Unit Tests:** Document Lighthouse scores for each key page (target 90+). Record onboarding completion time with timestamps for each step. Verify checklist items are actionable and complete.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":120,"created_at":"2026-01-30T12:51:03.848488-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:20.455861-06:00","labels":["devops","documentation","frontend"],"dependencies":[{"issue_id":"test-e11t6s4","depends_on_id":"test-e11t6s1","type":"blocks","created_at":"2026-01-30T12:52:40.834894-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t6s4","depends_on_id":"test-e11t6s2","type":"blocks","created_at":"2026-01-30T12:52:41.125083-06:00","created_by":"David Habedank"},{"issue_id":"test-e11t6s4","depends_on_id":"test-e11t6s3","type":"blocks","created_at":"2026-01-30T12:52:41.453603-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:20.455861-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e1t1","title":"Initialize Next.js 16 Project with Tailwind v4 and shadcn/ui","description":"Create the Next.js 16 application with proper TypeScript configuration, Tailwind CSS v4 setup, and shadcn/ui component library. Configure the brand design system including the color palette (Warm Cream #FAF7F2, Terracotta #C4704D, Deep Walnut #3D3029), typography (Inter font family), and spacing scale from the brand guidelines.\n\n**Context:** This is the absolute foundation of RealHerd. Every page, component, and feature depends on this project structure. The brand identity must be embedded from day one - this isn't generic SaaS, it's warm, professional, and trustworthy. Real estate brokers and agents need to feel this is a reliable partner, not cold tech.\n\n**Testing Requirements:**\n- **Unit Tests:** Tailwind config compilation, CSS variable resolution, component rendering with correct styles\n- **Integration Tests:** Full page render with brand colors applied, responsive breakpoints working, shadcn components styled correctly","design":"Use Next.js 16 app router. Configure Tailwind v4 with custom theme extending brand colors. Set up shadcn/ui with custom CSS variables matching the brand palette. Create a basic component library structure. Include the RealHerd wordmark in the layout.","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":240,"created_at":"2026-01-30T14:13:15.648143-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:15.648143-06:00","labels":["design-system","foundation","frontend","infrastructure","setup"],"dependencies":[{"issue_id":"test-e1t1","depends_on_id":"test-e1","type":"parent-child","created_at":"2026-01-30T14:13:15.773612-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t1s1","title":"Create Next.js 16 application with TypeScript","description":"Run `npx create-next-app@latest realherd` with TypeScript, ESLint, App Router enabled, and src/ directory. Select Tailwind CSS during setup (this will install Tailwind v4 with latest create-next-app). Verify the project runs with `npm run dev`.\n\n**Context:** This creates the foundational project structure that all RealHerd features will build upon. Next.js 16 with App Router is required for modern React Server Components patterns.\n\n**Testing Requirements:**\n- **Unit Tests:** Verify `npm run dev` starts without errors, verify localhost:3000 loads, verify TypeScript compiles with `npm run build`, verify tsconfig.json has strict mode enabled","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":15,"created_at":"2026-01-30T14:13:34.353537-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:34.353537-06:00","labels":["backend","frontend","infrastructure","setup"],"dependencies":[{"issue_id":"test-e1t1s1","depends_on_id":"test-e1t1","type":"parent-child","created_at":"2026-01-30T14:13:34.492115-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t1s2","title":"Configure Tailwind v4 with RealHerd brand design tokens","description":"Extend Tailwind configuration with RealHerd brand colors: Warm Cream (#FAF7F2), Terracotta (#C4704D), Deep Walnut (#3D3029), Soft Sage (#A8B5A0), Warm Sand (#E8DFD4), Rust (#9E5A3C), Sky (#7BA3C4). Add semantic colors: Success Green (#5B8A5B), Warning Amber (#D4A84B), Error Coral (#C45D4D). Configure spacing scale (4, 8, 16, 24, 32, 48, 64px) and border-radius tokens (8px small, 12px cards, 16px large). Set up Inter font family via next/font/google.\n\n**Context:** The brand identity must be embedded from day one. These colors create warmth and trustworthiness - Terracotta for CTAs, Deep Walnut for text, Warm Cream backgrounds. Real estate professionals need to feel this is a reliable partner, not cold tech.\n\n**Testing Requirements:**\n- **Unit Tests:** Create test page using `bg-warm-cream`, `text-terracotta`, `text-deep-walnut` classes and verify colors render correctly. Test spacing utilities like `p-comfortable` (24px). Verify Inter font loads in browser dev tools.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:13:34.669781-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:34.669781-06:00","labels":["backend","design-system","frontend","schema","styling","typescript"],"dependencies":[{"issue_id":"test-e1t1s2","depends_on_id":"test-e1t1","type":"parent-child","created_at":"2026-01-30T14:13:34.805436-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t1s2","depends_on_id":"test-e1t1s1","type":"blocks","created_at":"2026-01-30T14:14:55.691998-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t1s3","title":"Install and configure shadcn/ui with brand CSS variables","description":"Run `npx shadcn@latest init` selecting New York style, Slate base color, and CSS variables. Update the generated CSS variables in globals.css to map to RealHerd brand: --background to Warm Cream, --primary to Terracotta, --foreground to Deep Walnut, --muted to Warm Sand, --accent to Terracotta, --destructive to Error Coral. Configure border-radius to 8px (0.5rem). Install initial components: Button, Card, Input for verification.\n\n**Context:** shadcn/ui provides accessible, customizable components. By mapping CSS variables to our brand palette, every shadcn component automatically inherits RealHerd's warm, professional aesthetic without custom styling each component.\n\n**Testing Requirements:**\n- **Unit Tests:** Import Button and render with variant='default' - verify Terracotta background. Render Card - verify white background with Warm Sand border. Render Input - verify focus ring uses Terracotta with 10% opacity. Check CSS variables in browser dev tools match brand hex values.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:13:35.005559-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:35.005559-06:00","labels":["backend","components","design-system","frontend","relationships","schema","styling"],"dependencies":[{"issue_id":"test-e1t1s3","depends_on_id":"test-e1t1s1","type":"blocks","created_at":"2026-01-30T12:51:04.514415-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t1s3","depends_on_id":"test-e1t1","type":"parent-child","created_at":"2026-01-30T14:13:35.169603-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t1s3","depends_on_id":"test-e1t1s2","type":"blocks","created_at":"2026-01-30T14:14:55.829509-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t1s4","title":"Create root layout with RealHerd wordmark and verify brand integration","description":"Update app/layout.tsx with Inter font applied globally, Warm Cream background on body. Create a minimal header component in components/layout/header.tsx displaying 'RealHerd' wordmark text using Deep Walnut color (#3D3029), semibold weight, slightly tight tracking (-0.01em) per brand guidelines. Create a test page at app/page.tsx showcasing: brand colors, typography scale (Display through Caption), Button variants, Card, and Input components. Run `npm run build` and `npm run dev` to verify everything works.\n\n**Context:** This final subtask validates the entire foundation works together. The wordmark in the header establishes brand presence on every page. The test page serves as a living style guide and catches any configuration issues before feature development begins.\n\n**Testing Requirements:**\n- **Unit Tests:** Verify build completes without errors. Visual check: header shows 'RealHerd' in Deep Walnut. Visual check: page background is Warm Cream. Visual check: primary button is Terracotta with white text. Verify all typography sizes render (48px Display down to 12px Caption). Check no console errors in browser.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:35.394397-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:35.394397-06:00","labels":["backend","design-system","documentation","frontend","setup","testing","verification"],"dependencies":[{"issue_id":"test-e1t1s4","depends_on_id":"test-e1t1s2","type":"blocks","created_at":"2026-01-30T12:51:04.863513-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t1s4","depends_on_id":"test-e1t1","type":"parent-child","created_at":"2026-01-30T14:13:35.532286-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t1s4","depends_on_id":"test-e1t1s3","type":"blocks","created_at":"2026-01-30T14:14:55.973144-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t2","title":"Set Up Convex Backend with Initial Schema","description":"Initialize Convex backend, deploy the development environment, and create the foundational database schema including: users table (linked to Clerk), calls table (call logs, recordings, status), contacts table (synced from FUB), and file storage configuration for call recordings.\n\n**Context:** Convex is the entire backend - database, serverless functions, file storage, and scheduled jobs. The schema design here impacts every feature. Call logs, recordings, and contact data all flow through Convex. This is where RealHerd's intelligence lives.\n\n**Testing Requirements:**\n- **Unit Tests:** Schema validation, type definitions compile, mutation/query function signatures\n- **Integration Tests:** Convex dev deployment succeeds, can insert/query test data, file storage accepts uploads","design":"Use Convex schema with strict TypeScript types. Design for the call-centric data model: calls have recordings (file storage), transcripts, and link to contacts. Include indexes for common queries (calls by user, calls by date, contacts by status). Set up file storage bucket for recordings.","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:15.935188-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:15.935188-06:00","labels":["backend","convex","database","setup"],"dependencies":[{"issue_id":"test-e1t2","depends_on_id":"test-e1t1","type":"blocks","created_at":"2026-01-30T12:51:05.380715-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t2","depends_on_id":"test-e1","type":"parent-child","created_at":"2026-01-30T14:13:16.116872-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t2s1","title":"Initialize Convex project and deploy development environment","description":"Run `npx convex dev` to initialize Convex in the project. This creates the convex/ directory structure, generates convex/_generated/ types, and deploys to a development backend. Configure convex.json if needed. Verify the Convex dashboard shows the new project.\n\n**Context:** Convex initialization creates the foundation for all backend functionality. The development deployment gives us a live backend to test against immediately. This must complete before any schema or functions can be defined.\n\n**Testing Requirements:**\n- **Unit Tests:** Verify convex/ directory exists with _generated/ folder, verify `npx convex dev` starts without errors, verify Convex dashboard shows project with 'development' deployment","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":20,"created_at":"2026-01-30T14:13:35.700287-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:35.700287-06:00","labels":["auth","backend","frontend","setup"],"dependencies":[{"issue_id":"test-e1t2s1","depends_on_id":"test-e1t2","type":"parent-child","created_at":"2026-01-30T14:13:35.848181-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t2s2","title":"Create foundational database schema with TypeScript types","description":"Create convex/schema.ts with tables: (1) users - id, clerkId (indexed), email, name, role, createdAt; (2) contacts - id, userId (indexed), fubContactId, name, email, phone, status (indexed), lastContactedAt, source, createdAt, updatedAt; (3) calls - id, userId (indexed), contactId (indexed), direction (inbound/outbound), status (scheduled/in_progress/completed/failed), startedAt (indexed), endedAt, duration, recordingStorageId, transcriptStorageId, summary, createdAt. Define proper indexes for common queries: calls by user+date, contacts by user+status.\n\n**Context:** The schema is RealHerd's data backbone. Following PRD's call-centric model: calls link to contacts, have recordings/transcripts in file storage. Indexes on userId, contactId, status, and startedAt enable efficient dashboard queries. Strict TypeScript types from Convex schema ensure type safety across all functions.\n\n**Testing Requirements:**\n- **Unit Tests:** Verify schema.ts compiles without TypeScript errors, verify `npx convex dev` accepts schema and generates types in _generated/, verify all three tables appear in Convex dashboard schema view, verify indexes are created for userId, clerkId, contactId, status, startedAt fields","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:13:36.038108-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:36.038108-06:00","labels":["auth","backend","database"],"dependencies":[{"issue_id":"test-e1t2s2","depends_on_id":"test-e1t2","type":"parent-child","created_at":"2026-01-30T14:13:36.182859-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t2s2","depends_on_id":"test-e1t2s1","type":"blocks","created_at":"2026-01-30T14:14:56.127984-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t2s3","title":"Configure file storage for call recordings and transcripts","description":"Set up Convex file storage configuration for storing call recordings (audio files) and transcripts (text/JSON). Create convex/files.ts with mutation functions: generateUploadUrl (for client uploads), storeRecording (links storage ID to call record), and getRecordingUrl (generates signed URL for playback). Include proper validation that only authenticated users can access their own recordings.\n\n**Context:** Call recordings are central to RealHerd's value proposition - they're transcribed for AI insights and available for playback. Convex file storage handles the heavy lifting, but we need secure access patterns. Storage IDs in the calls table link to actual files.\n\n**Testing Requirements:**\n- **Unit Tests:** Test generateUploadUrl returns valid URL structure, test storeRecording updates call record with storageId, test getRecordingUrl returns null for non-existent files, test access control rejects requests for other users' recordings","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":40,"created_at":"2026-01-30T14:13:36.391788-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:36.391788-06:00","labels":["auth","backend","database","frontend","security","setup","storage"],"dependencies":[{"issue_id":"test-e1t2s3","depends_on_id":"test-e1t2s1","type":"blocks","created_at":"2026-01-30T12:51:05.913999-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t2s3","depends_on_id":"test-e1t2","type":"parent-child","created_at":"2026-01-30T14:13:36.523499-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t2s3","depends_on_id":"test-e1t2s2","type":"blocks","created_at":"2026-01-30T14:14:56.271287-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t2s4","title":"Create basic CRUD query and mutation functions for all tables","description":"Create Convex functions: (1) convex/users.ts - getUser (by clerkId), createUser, updateUser; (2) convex/contacts.ts - listContacts (paginated, filterable by status), getContact, createContact, updateContact, deleteContact; (3) convex/calls.ts - listCalls (paginated, filterable by date range/status), getCall, createCall, updateCall. All functions should validate user authentication and only return/modify data belonging to the authenticated user.\n\n**Context:** These CRUD operations are the API layer the frontend consumes. Every dashboard view, every form submission flows through these functions. Pagination is essential for agents with hundreds of contacts. User-scoping prevents data leakage between accounts.\n\n**Testing Requirements:**\n- **Unit Tests:** Test each query returns only data for authenticated user, test listContacts pagination returns correct page size, test listCalls date filtering works correctly, test mutations reject unauthenticated requests, test createContact/createCall link to correct userId, test updateCall properly updates status field","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:36.713629-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:36.713629-06:00","labels":["api","auth","backend","database","frontend","integration","voice"],"dependencies":[{"issue_id":"test-e1t2s4","depends_on_id":"test-e1t2s3","type":"blocks","created_at":"2026-01-30T12:51:06.520796-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t2s4","depends_on_id":"test-e1t2","type":"parent-child","created_at":"2026-01-30T14:13:36.855106-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t2s4","depends_on_id":"test-e1t2s2","type":"blocks","created_at":"2026-01-30T14:14:56.416269-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t3","title":"Integrate Clerk Authentication with Convex","description":"Set up Clerk authentication with sign up, sign in, and sign out flows. Connect Clerk to Convex for user identity, ensuring authenticated users are created in the Convex users table. Protect routes appropriately and display user state in the UI.\n\n**Context:** Authentication gates everything in RealHerd. Brokers need to see only their team's data, agents only their own calls. Clerk provides the identity layer, but it must sync to Convex so our backend knows who's who. This is security and personalization foundation.\n\n**Testing Requirements:**\n- **Unit Tests:** Auth middleware blocks unauthenticated access, Clerk webhook handler parses payload correctly\n- **Integration Tests:** Full sign-up flow creates user in both Clerk and Convex, sign-in redirects to dashboard, sign-out clears session","design":"Use Clerk's Next.js SDK with app router. Implement Clerk webhook to sync user creation to Convex. Use Convex's built-in auth integration. Create sign-in/sign-up pages with RealHerd branding. Add user menu in header showing current user.","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":240,"created_at":"2026-01-30T14:13:16.27474-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:16.27474-06:00","labels":["auth","backend","clerk","convex","frontend","security"],"dependencies":[{"issue_id":"test-e1t3","depends_on_id":"test-e1","type":"parent-child","created_at":"2026-01-30T14:13:16.403325-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t3","depends_on_id":"test-e1t1","type":"blocks","created_at":"2026-01-30T14:14:56.553615-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t3","depends_on_id":"test-e1t2","type":"blocks","created_at":"2026-01-30T14:14:56.716196-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t3s1","title":"Configure Clerk SDK and environment variables","description":"Install @clerk/nextjs package. Add Clerk environment variables (NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY, CLERK_SECRET_KEY) to .env.local. Configure ClerkProvider in app/layout.tsx wrapping the application. Set up Clerk middleware in middleware.ts to protect routes.\n\n**Context:** Clerk is the identity foundation - nothing else works until the SDK is properly configured and the app can communicate with Clerk's services.\n\n**Testing Requirements:**\n- **Unit Tests:** Verify ClerkProvider renders children, test middleware exports correctly, verify environment variables are loaded (mock process.env)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:13:37.038284-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:37.038284-06:00","labels":["auth","backend","config","frontend","setup","telephony"],"dependencies":[{"issue_id":"test-e1t3s1","depends_on_id":"test-e1t3","type":"parent-child","created_at":"2026-01-30T14:13:37.173844-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t3s2","title":"Create branded sign-in and sign-up pages","description":"Create app/(auth)/sign-in/[[...sign-in]]/page.tsx with Clerk's SignIn component. Create app/(auth)/sign-up/[[...sign-up]]/page.tsx with SignUp component. Apply RealHerd branding: Warm Cream background (#FAF7F2), Terracotta (#C4704D) accent colors, Deep Walnut (#3D3029) text. Add RealHerd logo/wordmark above the auth forms. Configure Clerk appearance prop with brand colors.\n\n**Context:** First impression for brokers and agents. Auth pages should feel like part of RealHerd, not a generic third-party login. Brand consistency builds trust.\n\n**Testing Requirements:**\n- **Unit Tests:** Test SignIn page renders SignIn component, test SignUp page renders SignUp component, verify appearance props include correct hex color values, snapshot test for layout structure","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:37.349932-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:37.349932-06:00","labels":["auth","backend","branding","convex","frontend","middleware","telephony"],"dependencies":[{"issue_id":"test-e1t3s2","depends_on_id":"test-e1t3","type":"parent-child","created_at":"2026-01-30T14:13:37.504298-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t3s2","depends_on_id":"test-e1t3s1","type":"blocks","created_at":"2026-01-30T14:14:56.938272-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t3s3","title":"Set up Convex auth integration and user sync webhook","description":"Configure Convex auth with Clerk using convex/auth.config.ts. Create convex/users.ts with mutations: createUser (called on first login), getOrCreateUser (idempotent). Set up Clerk webhook endpoint at app/api/webhooks/clerk/route.ts to handle 'user.created' events - extract userId, email, name and call Convex createUser mutation. Add webhook secret to environment variables. Ensure user record includes clerkId, email, name, role (default 'agent'), createdAt.\n\n**Context:** The bridge between Clerk (who you are) and Convex (what you can access). Without this sync, the backend can't enforce data isolation - brokers seeing only their team, agents seeing only their calls.\n\n**Testing Requirements:**\n- **Unit Tests:** Test createUser mutation creates user with correct fields, test getOrCreateUser returns existing user if found, test webhook route validates signature, test webhook extracts correct fields from Clerk payload, test webhook returns 200 on success and 400 on invalid payload","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:37.67645-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:37.67645-06:00","labels":["auth","backend","convex","frontend","rbac","webhooks"],"dependencies":[{"issue_id":"test-e1t3s3","depends_on_id":"test-e1t3","type":"parent-child","created_at":"2026-01-30T14:13:37.803118-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t3s3","depends_on_id":"test-e1t3s1","type":"blocks","created_at":"2026-01-30T14:14:57.097104-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t3s4","title":"Add authenticated user menu to header","description":"Create UserMenu component using Clerk's UserButton or custom implementation. Display current user's name/avatar in header. Include sign-out option using Clerk's signOut. Style with RealHerd design: Warm Sand (#E8DFD4) dropdown background, 12px border-radius, 1px border. Position in header's right section. Show loading skeleton while auth state resolves.\n\n**Context:** Users need to know they're logged in and have a clear way to sign out. This is basic UX hygiene and reinforces the personalized experience - 'Hey Marcus' moments from the PRD.\n\n**Testing Requirements:**\n- **Unit Tests:** Test UserMenu renders user name when authenticated, test UserMenu shows sign-out option, test loading state displays skeleton, test signOut function is called on click","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:13:37.994095-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:37.994095-06:00","labels":["auth","backend","convex","database","frontend","testing","ui","webhook"],"dependencies":[{"issue_id":"test-e1t3s4","depends_on_id":"test-e1t3s1","type":"blocks","created_at":"2026-01-30T12:09:19.114257-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t3s4","depends_on_id":"test-e1t3s3","type":"blocks","created_at":"2026-01-30T12:51:09.375108-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t3s4","depends_on_id":"test-e1t3","type":"parent-child","created_at":"2026-01-30T14:13:38.124393-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t3s4","depends_on_id":"test-e1t3s2","type":"blocks","created_at":"2026-01-30T14:14:57.279624-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t3s5","title":"Implement route protection and verify end-to-end auth flow","description":"Configure middleware.ts publicRoutes (sign-in, sign-up, webhooks) and protectedRoutes (dashboard, calls, contacts). Test complete flow: visit protected route while logged out → redirect to sign-in → sign in → redirect back → user created in Convex → user menu shows name. Verify webhook fires on new signup by checking Convex dashboard for user record. Test sign-out clears session and redirects appropriately.\n\n**Context:** Integration testing ensures all the pieces work together. A broken auth flow means brokers can't access RealHerd at all - this is the critical path.\n\n**Testing Requirements:**\n- **Unit Tests:** Test middleware redirects unauthenticated users from protected routes, test middleware allows access to public routes, test authenticated users can access protected routes, manual E2E verification of signup→webhook→Convex user creation flow","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:38.29985-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:38.29985-06:00","labels":["auth","integration","testing"],"dependencies":[{"issue_id":"test-e1t3s5","depends_on_id":"test-e1t3","type":"parent-child","created_at":"2026-01-30T14:13:38.43667-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t3s5","depends_on_id":"test-e1t3s3","type":"blocks","created_at":"2026-01-30T14:14:57.470941-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t3s5","depends_on_id":"test-e1t3s4","type":"blocks","created_at":"2026-01-30T14:14:57.606305-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t4","title":"Configure Telnyx Account and Implement Basic Outbound Calling","description":"Set up Telnyx account with SIP credentials, provision a phone number, and implement a basic outbound call function that can dial a number, play audio (TTS or file), and hang up. Include call recording configuration and webhook endpoint for call events.\n\n**Context:** Voice is RealHerd's core interface - 'RealHerd calls agents.' Telnyx handles all telephony. This task proves we can make calls, which unlocks the entire debrief and check-in feature set. Recording is essential for AI processing later.\n\n**Testing Requirements:**\n- **Unit Tests:** Telnyx API client methods, webhook signature verification, call state machine transitions\n- **Integration Tests:** Make actual test call to verified number, receive webhook events, recording file is accessible","design":"Use Telnyx Call Control API. Create Convex HTTP action for Telnyx webhooks (call.initiated, call.answered, call.recording.saved, call.hangup). Store Telnyx credentials in environment variables. Implement basic TeXML or Call Control for the call flow. Configure recording to upload to a URL we control.","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:16.56124-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:16.56124-06:00","labels":["api","backend","design","frontend","navigation","telephony","telnyx","ui"],"dependencies":[{"issue_id":"test-e1t4","depends_on_id":"test-e1t3","type":"blocks","created_at":"2026-01-30T12:09:19.955001-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t4","depends_on_id":"test-e1t1","type":"blocks","created_at":"2026-01-30T12:51:09.579167-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t4","depends_on_id":"test-e1","type":"parent-child","created_at":"2026-01-30T14:13:16.698269-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t4","depends_on_id":"test-e1t2","type":"blocks","created_at":"2026-01-30T14:14:57.782695-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t4s1","title":"Configure Telnyx Account and Store Credentials","description":"Set up Telnyx account with SIP credentials, provision a phone number for outbound calling, and configure environment variables in Convex. Create a Call Control Application in Telnyx dashboard with webhook URL pointing to our Convex HTTP endpoint. Store TELNYX_API_KEY, TELNYX_CONNECTION_ID, and TELNYX_PHONE_NUMBER in Convex environment variables.\n\n**Context:** Telnyx credentials must be properly configured before any telephony features can work. The Call Control Application in Telnyx routes call events to our webhooks.\n\n**Testing Requirements:**\n- **Unit Tests:** Verify environment variables are accessible in Convex actions. Test that TELNYX_API_KEY, TELNYX_CONNECTION_ID, and TELNYX_PHONE_NUMBER are defined and non-empty strings.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":30,"created_at":"2026-01-30T14:13:38.614944-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:38.614944-06:00","labels":["backend","frontend","infrastructure","layout","setup","telnyx"],"dependencies":[{"issue_id":"test-e1t4s1","depends_on_id":"test-e1t4","type":"parent-child","created_at":"2026-01-30T14:13:38.83211-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t4s2","title":"Create Telnyx Webhook HTTP Endpoint","description":"Implement Convex HTTP action at /api/telnyx/webhooks to receive Telnyx Call Control events. Handle event types: call.initiated, call.answered, call.recording.saved, call.hangup. Log all incoming events for debugging. Validate webhook signatures using Telnyx's signature verification. Return 200 OK for valid webhooks.\n\n**Context:** Telnyx sends real-time call events via webhooks. This endpoint is the foundation for all call state management and recording retrieval. Voice is RealHerd's core interface - we need to know what's happening on calls.\n\n**Testing Requirements:**\n- **Unit Tests:** Test webhook handler with mock payloads for each event type (call.initiated, call.answered, call.recording.saved, call.hangup). Test signature validation passes for valid signatures and rejects invalid ones. Test 200 response for valid webhooks, 401 for invalid signatures.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:39.015473-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:39.015473-06:00","labels":["backend","design","frontend","routing","telnyx","ui","webhooks"],"dependencies":[{"issue_id":"test-e1t4s2","depends_on_id":"test-e1t4","type":"parent-child","created_at":"2026-01-30T14:13:39.146358-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t4s2","depends_on_id":"test-e1t4s1","type":"blocks","created_at":"2026-01-30T14:14:57.950547-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t4s3","title":"Implement Outbound Call Function with Recording","description":"Create Convex action 'makeOutboundCall' that uses Telnyx Call Control API to: 1) Initiate a call to a given phone number from our Telnyx number, 2) Configure call recording to start automatically on answer, 3) Play TTS message using speak command with a configurable message. Use the Telnyx REST API v2 Call Control endpoints. Include proper error handling for API failures (invalid number, rate limits, auth errors).\n\n**Context:** This is the core capability that proves we can make calls - unlocking the entire debrief and check-in feature set. Recording is essential for AI processing of debriefs later.\n\n**Testing Requirements:**\n- **Unit Tests:** Test makeOutboundCall with mocked Telnyx API responses. Test successful call initiation returns call_control_id. Test error handling for 401 (bad credentials), 422 (invalid phone number), 429 (rate limit). Test that recording is enabled in the call parameters.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:39.345052-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:39.345052-06:00","labels":["auth","backend","components","contacts","frontend","telnyx","voice"],"dependencies":[{"issue_id":"test-e1t4s3","depends_on_id":"test-e1t4","type":"parent-child","created_at":"2026-01-30T14:13:39.483298-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t4s3","depends_on_id":"test-e1t4s1","type":"blocks","created_at":"2026-01-30T14:14:58.100074-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t4s3","depends_on_id":"test-e1t4s2","type":"blocks","created_at":"2026-01-30T14:14:58.264311-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t4s4","title":"Test End-to-End Outbound Call Flow","description":"Verify the complete outbound calling flow works: 1) Call makeOutboundCall action with a real test phone number, 2) Confirm call.initiated webhook received and logged, 3) Answer the call and confirm call.answered webhook, 4) Verify TTS audio plays on the call, 5) Hang up and confirm call.hangup webhook, 6) Verify call.recording.saved webhook contains recording URL. Document the test results and any Telnyx dashboard configurations needed.\n\n**Context:** Integration testing proves the entire telephony stack works before building features on top of it. This validates that RealHerd can actually make calls - the foundation of the product.\n\n**Testing Requirements:**\n- **Unit Tests:** Manual integration test checklist: verify call connects, TTS plays, recording URL is received in webhook, all webhook events are logged with correct call_control_id correlation.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:13:39.668471-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:39.668471-06:00","labels":["backend","calling","frontend","integration-test","mobile","responsive","telnyx","testing"],"dependencies":[{"issue_id":"test-e1t4s4","depends_on_id":"test-e1t4s1","type":"blocks","created_at":"2026-01-30T12:09:20.614282-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t4s4","depends_on_id":"test-e1t4s2","type":"blocks","created_at":"2026-01-30T12:09:20.83289-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t4s4","depends_on_id":"test-e1t4","type":"parent-child","created_at":"2026-01-30T14:13:39.810382-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t4s4","depends_on_id":"test-e1t4s3","type":"blocks","created_at":"2026-01-30T14:14:58.430096-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t5","title":"Build Dashboard with Call Log Display","description":"Create the authenticated dashboard page showing the user's recent calls. Display call logs from Convex with key information: date/time, duration, contact name (if linked), status, and link to recording. Include the RealHerd branded landing page for unauthenticated users.\n\n**Context:** Users need to see that RealHerd is working. The dashboard is proof of value - every call made, every recording captured. For brokers, this becomes pipeline visibility. For agents, it's their activity log. The landing page converts visitors to sign-ups.\n\n**Testing Requirements:**\n- **Unit Tests:** Call log query returns correct data shape, date formatting functions, status badge rendering logic\n- **Integration Tests:** Dashboard loads with real call data from Convex, recording playback works, empty state displays correctly for new users","design":"Landing page: Hero with value prop ('Keep your CRM current without the busywork'), feature highlights, CTA to sign up. Use brand colors and warm tone. Dashboard: Card-based call list with sorting by date. Each call card shows status badge, duration, timestamp. Link to play recording. Empty state with Shep mascot ('No calls yet - let's get started').","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:16.853525-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:16.853525-06:00","labels":["config","dashboard","devops","frontend","integration","navigation","ui"],"dependencies":[{"issue_id":"test-e1t5","depends_on_id":"test-e1t2","type":"blocks","created_at":"2026-01-30T12:09:21.463571-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t5","depends_on_id":"test-e1","type":"parent-child","created_at":"2026-01-30T14:13:16.977435-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t5","depends_on_id":"test-e1t3","type":"blocks","created_at":"2026-01-30T14:14:58.587314-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t5","depends_on_id":"test-e1t4","type":"blocks","created_at":"2026-01-30T14:14:58.746304-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t5s1","title":"Create branded landing page for unauthenticated users","description":"Build the RealHerd landing page shown to visitors before sign-up. Include: hero section with headline 'Keep your CRM current without the busywork', value proposition subtext, feature highlights (voice-first, automatic sync, pipeline visibility), and prominent CTA button to sign up via Clerk. Use brand colors: Warm Cream (#FAF7F2) background, Terracotta (#C4704D) for CTA, Deep Walnut (#3D3029) for text. Apply typography scale from PRD (Display 48px for hero headline).\n\n**Context:** The landing page is the conversion point - it must communicate value quickly and warmly. Per PRD, tone should be 'warm without being folksy, modern without being cold'. This is the first impression of RealHerd.\n\n**Testing Requirements:**\n- **Unit Tests:** Test landing page renders without auth, test CTA button links to Clerk sign-up, test responsive layout at mobile/tablet/desktop breakpoints, test brand colors match PRD hex values","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:39.994853-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:39.994853-06:00","labels":["backend","config","design","documentation","frontend","telnyx","webhooks"],"dependencies":[{"issue_id":"test-e1t5s1","depends_on_id":"test-e1t5","type":"parent-child","created_at":"2026-01-30T14:13:40.120518-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t5s2","title":"Build authenticated dashboard layout with call log cards","description":"Create the main dashboard page for authenticated users. Display call logs from Convex in card-based layout per PRD card style (white background, 1px #E8DFD4 border, 12px border-radius). Each call card shows: status badge (color-coded per functional colors), duration, timestamp formatted human-friendly, contact name if linked, and clickable link to recording. Sort by date descending. Use Convex useQuery hook to fetch user's calls.\n\n**Context:** This is proof of value - users see every call captured. For brokers, it's pipeline visibility. The card-based design keeps information scannable while maintaining the warm, professional aesthetic.\n\n**Testing Requirements:**\n- **Unit Tests:** Test dashboard requires authentication (redirects if not logged in), test call cards render with mock data, test sorting by date works correctly, test status badge colors match PRD functional colors, test recording link is clickable","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:40.41033-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:40.41033-06:00","labels":["api","audio","backend","convex","file-storage","frontend"],"dependencies":[{"issue_id":"test-e1t5s2","depends_on_id":"test-e1t5","type":"parent-child","created_at":"2026-01-30T14:13:40.541122-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t5s2","depends_on_id":"test-e1t5s1","type":"blocks","created_at":"2026-01-30T14:14:59.189935-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t5s3","title":"Create empty state with Shep mascot","description":"Design and implement the empty state shown when user has no calls yet. Include Shep the sheepdog mascot in minimal geometric style (cream, terracotta, walnut palette only, 2D flat, no outlines). Display friendly message: 'No calls yet — let's get started' with guidance on next steps. Per PRD, Shep appears in empty states to provide a friendly face when there's no data.\n\n**Context:** Empty states are critical for new user experience. Shep softens what could feel like a broken or useless product into an inviting 'getting started' moment. This is where onboarding begins.\n\n**Testing Requirements:**\n- **Unit Tests:** Test empty state renders when calls array is empty, test Shep illustration displays correctly, test message text matches spec, test empty state does not show when calls exist","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:40.891488-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:40.891488-06:00","labels":["backend","database","design","dx","frontend","schema","tooling"],"dependencies":[{"issue_id":"test-e1t5s3","depends_on_id":"test-e1t5s1","type":"blocks","created_at":"2026-01-30T12:51:11.240171-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t5s3","depends_on_id":"test-e1t5","type":"parent-child","created_at":"2026-01-30T14:13:41.055224-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t5s3","depends_on_id":"test-e1t5s2","type":"blocks","created_at":"2026-01-30T14:14:59.336338-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t5s4","title":"Wire up auth routing between landing and dashboard","description":"Implement conditional routing: unauthenticated users see landing page, authenticated users see dashboard. Use Clerk's authentication hooks to check auth state. Ensure smooth transition after sign-up/sign-in (redirect to dashboard). Handle loading states during auth check to prevent flash of wrong content.\n\n**Context:** Seamless auth flow is table stakes for SaaS. Users shouldn't see jarring transitions or wrong pages. This connects the public-facing landing with the authenticated experience.\n\n**Testing Requirements:**\n- **Unit Tests:** Test unauthenticated user sees landing page, test authenticated user sees dashboard, test sign-in redirects to dashboard, test sign-out redirects to landing, test loading state displays during auth check","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:13:41.249954-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:41.249954-06:00","labels":["audio-player","auth","documentation","frontend","integration","ui"],"dependencies":[{"issue_id":"test-e1t5s4","depends_on_id":"test-e1t5s3","type":"blocks","created_at":"2026-01-30T12:51:12.134922-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t5s4","depends_on_id":"test-e1t5","type":"parent-child","created_at":"2026-01-30T14:13:41.394574-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t5s4","depends_on_id":"test-e1t5s1","type":"blocks","created_at":"2026-01-30T14:14:59.481113-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t5s4","depends_on_id":"test-e1t5s2","type":"blocks","created_at":"2026-01-30T14:14:59.640405-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t5s5","title":"Create dashboard index page and verify complete shell","description":"Create app/(dashboard)/page.tsx with placeholder content (welcome message, empty state cards for Pipeline/Agents sections). Wire everything together and verify: layout renders correctly, navigation works between placeholder pages, mobile menu functions, UserButton shows avatar and sign-out works, responsive behavior at all breakpoints.\n\n**Context:** Integration verification ensures the shell actually works end-to-end before teams build features on top of it. This is the first thing users see after login.\n\n**Testing Requirements:**\n- **Unit Tests:** Test dashboard page renders within layout, test navigation between routes maintains layout, test sign-out flow redirects to home, manual verification of responsive behavior at 375px/768px/1024px/1440px","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T12:48:18.591175-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:59:54.834732-06:00","labels":["frontend"],"dependencies":[{"issue_id":"test-e1t5s5","depends_on_id":"test-e1t5","type":"parent-child","created_at":"2026-01-30T12:48:18.779713-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t5s5","depends_on_id":"test-e1t5s4","type":"blocks","created_at":"2026-01-30T12:51:12.352093-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:59:54.834732-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e1t6","title":"Implement Call Recording Storage in Convex","description":"Create the pipeline to receive call recordings from Telnyx, upload them to Convex file storage, and link them to the corresponding call record. Include a basic audio player component for playback in the dashboard.\n\n**Context:** Recordings are the raw material for AI transcription and analysis. Without reliable storage and retrieval, the entire AI pipeline breaks. Users also need to listen to calls for quality assurance and training.\n\n**Testing Requirements:**\n- **Unit Tests:** File upload mutation, recording URL validation, audio player component state management\n- **Integration Tests:** End-to-end: Telnyx webhook triggers download, file appears in Convex storage, playback works in browser","design":"Telnyx sends recording URL via webhook. Create Convex action to download from Telnyx URL and upload to Convex storage. Store file ID on call record. Build simple audio player component with play/pause, progress bar, using HTML5 audio element styled to brand.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":240,"created_at":"2026-01-30T14:13:17.14566-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:17.14566-06:00","labels":["audio","backend","convex","integration","storage","testing","verification"],"dependencies":[{"issue_id":"test-e1t6","depends_on_id":"test-e1t5","type":"blocks","created_at":"2026-01-30T12:51:12.571815-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t6","depends_on_id":"test-e1","type":"parent-child","created_at":"2026-01-30T14:13:17.280978-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t6","depends_on_id":"test-e1t4","type":"blocks","created_at":"2026-01-30T14:14:59.804684-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t6","depends_on_id":"test-e1t2","type":"blocks","created_at":"2026-01-30T14:15:00.11313-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t6s1","title":"Extend Convex schema with recording fields on calls table","description":"Add recording-related fields to the calls table: recordingFileId (optional, Id\u003c'_storage'\u003e), recordingUrl (optional string for original Telnyx URL), recordingDuration (optional number in seconds), recordingStatus (enum: 'pending' | 'downloading' | 'stored' | 'failed'). Run `npx convex dev` to apply schema changes.\n\n**Context:** The calls table needs to track recording metadata and link to stored files. The status field enables UI feedback during the async download process.\n\n**Testing Requirements:**\n- **Unit Tests:** Verify schema compiles without errors, test that calls can be created/updated with all new fields, test that recordingFileId accepts valid storage IDs","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":30,"created_at":"2026-01-30T14:13:41.58206-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:41.58206-06:00","labels":["auth","backend","convex","database","setup","testing"],"dependencies":[{"issue_id":"test-e1t6s1","depends_on_id":"test-e1t6","type":"parent-child","created_at":"2026-01-30T14:13:41.714104-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t6s2","title":"Create Convex action to download recording from Telnyx and upload to storage","description":"Create convex/recordings.ts with an action 'storeRecording' that: 1) Takes callId and telnyxRecordingUrl as args, 2) Updates call recordingStatus to 'downloading', 3) Fetches the audio file from Telnyx URL using fetch(), 4) Uploads to Convex storage using ctx.storage.store(), 5) Updates call record with recordingFileId and status 'stored', 6) On error, sets status to 'failed'. Use ctx.runMutation for database updates within the action.\n\n**Context:** Telnyx provides a temporary URL for recordings. We need to download and store in Convex before the URL expires. Actions can make HTTP requests; mutations cannot.\n\n**Testing Requirements:**\n- **Unit Tests:** Test action with mock Telnyx URL returns success, test error handling when URL is invalid/expired (should set status to 'failed'), test that storage.store is called with correct blob, test call record is updated with file ID","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:41.897832-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:41.897832-06:00","labels":["api","backend","calling","frontend","integration","react","testing"],"dependencies":[{"issue_id":"test-e1t6s2","depends_on_id":"test-e1t6","type":"parent-child","created_at":"2026-01-30T14:13:42.030118-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t6s2","depends_on_id":"test-e1t6s1","type":"blocks","created_at":"2026-01-30T14:15:00.369314-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t6s3","title":"Add webhook handler to trigger recording storage on Telnyx recording.completed event","description":"Extend the Telnyx webhook handler (from task 1.5) to handle 'recording.completed' events. Extract the recording_url and call_control_id from the webhook payload, find the corresponding call record by telnyxCallControlId, and schedule the storeRecording action. Add appropriate logging for debugging.\n\n**Context:** Telnyx sends a webhook when recording is ready. This is the trigger that kicks off our storage pipeline. Must happen automatically without user intervention.\n\n**Testing Requirements:**\n- **Unit Tests:** Test webhook correctly parses recording.completed payload, test it finds correct call by call_control_id, test storeRecording action is scheduled with correct params, test graceful handling when call record not found","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:13:42.221738-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:42.221738-06:00","labels":["api","backend","dx","frontend","react","recording","storage","testing","webhooks"],"dependencies":[{"issue_id":"test-e1t6s3","depends_on_id":"test-e1t6","type":"parent-child","created_at":"2026-01-30T14:13:42.343416-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t6s3","depends_on_id":"test-e1t6s2","type":"blocks","created_at":"2026-01-30T14:15:00.542892-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t6s4","title":"Build AudioPlayer component with brand-styled play/pause and progress bar","description":"Create components/AudioPlayer.tsx using HTML5 audio element. Features: play/pause button (Terracotta #C4704D), progress bar showing current position, duration display (MM:SS format), seek by clicking progress bar. Style per brand: 8px border radius, Warm Sand background, Deep Walnut text. Accept storageId prop and use Convex storage URL. Handle loading and error states with appropriate UI feedback.\n\n**Context:** Users need to listen to call recordings for QA and training. Per PRD brand guidelines: Terracotta for interactive elements, 8px radius for small elements, warm palette throughout.\n\n**Testing Requirements:**\n- **Unit Tests:** Test component renders with valid storageId, test play/pause toggle updates button state, test progress bar reflects audio currentTime, test duration displays correctly, test click on progress bar seeks audio, test loading state shows while audio loads, test error state when audio fails to load","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:13:42.536859-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:42.536859-06:00","labels":["component","frontend","integration","performance","testing","validation","verification"],"dependencies":[{"issue_id":"test-e1t6s4","depends_on_id":"test-e1t6s3","type":"blocks","created_at":"2026-01-30T12:51:13.318216-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t6s4","depends_on_id":"test-e1t6","type":"parent-child","created_at":"2026-01-30T14:13:42.673086-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t6s4","depends_on_id":"test-e1t6s2","type":"blocks","created_at":"2026-01-30T14:15:00.698835-06:00","created_by":"David Habedank"}]}
{"id":"test-e1t6s5","title":"Integrate AudioPlayer into call detail view and verify end-to-end flow","description":"Add AudioPlayer to the call detail page/modal, conditionally rendered when call.recordingFileId exists. Show recording status indicator when status is 'pending' or 'downloading'. Test full flow: trigger a test call with recording enabled, verify webhook receives recording.completed, verify file appears in Convex storage, verify AudioPlayer can play the recording.\n\n**Context:** This verifies the entire pipeline works: Telnyx recording → webhook → Convex storage → UI playback. Critical integration point before building AI transcription on top.\n\n**Testing Requirements:**\n- **Unit Tests:** Test AudioPlayer only renders when recordingFileId exists, test status indicator shows for pending/downloading states, test no player shown when recordingStatus is 'failed', integration test: manual verification of end-to-end flow with real Telnyx recording","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:13:42.860966-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:42.860966-06:00","labels":["frontend","integration"],"dependencies":[{"issue_id":"test-e1t6s5","depends_on_id":"test-e1t6","type":"parent-child","created_at":"2026-01-30T14:13:42.97948-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t6s5","depends_on_id":"test-e1t6s3","type":"blocks","created_at":"2026-01-30T14:15:00.8532-06:00","created_by":"David Habedank"},{"issue_id":"test-e1t6s5","depends_on_id":"test-e1t6s4","type":"blocks","created_at":"2026-01-30T14:15:01.031721-06:00","created_by":"David Habedank"}]}
{"id":"test-e2","title":"Voice AI Conversation Engine","description":"Integrate LFM 2.5-Audio for real-time bidirectional voice conversations. Implement the debrief conversation flow with natural dialogue, transcript generation, and basic data extraction from conversations.\n\n**Context:** The core value proposition is natural voice conversations that feel human. This epic delivers the AI conversation capability that makes the product work - without good voice AI, nothing else matters.\n\n**Testing Requirements:**\n- **Unit Tests:** Transcript segment parsing, conversation state machine, audio chunk processing\n- **Integration Tests:** LFM API streaming connection, Telnyx audio bridge to LFM, transcript storage flow\n- **Type Tests:** TranscriptSegment types, conversation state types, LFM response types\n- **E2E Tests:** Complete 2-minute debrief conversation with transcript verification, interruption handling test","acceptance_criteria":"- LFM 2.5-Audio streams bidirectional audio in real-time with \u003c500ms latency\n- Debrief conversation follows scripted flow with contextual follow-ups\n- Full transcript generated and stored for each call\n- Transcript displays in dashboard with speaker labels and timestamps\n- Recording playback works alongside transcript\n- Conversation handles interruptions gracefully\n- OpenRouter fallback triggers for low-confidence extractions","status":"open","priority":1,"issue_type":"epic","owner":"david@habedank.org","estimated_minutes":4800,"created_at":"2026-01-30T14:13:14.313628-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:14.313628-06:00","labels":["core-feature","core-infrastructure","infrastructure","phase-1","telephony","telnyx","voice","voice-ai"],"dependencies":[{"issue_id":"test-e2","depends_on_id":"test-e1","type":"blocks","created_at":"2026-01-30T14:15:01.191542-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t1","title":"Set up LFM 2.5-Audio SDK and WebSocket infrastructure","description":"Install and configure the LFM 2.5-Audio SDK. Create the WebSocket connection infrastructure for bidirectional audio streaming. Set up audio encoding/decoding pipelines for real-time voice transmission.\n\n**Context:** LFM 2.5-Audio is the foundation of the entire product - it's what makes conversations feel human rather than robotic. Without proper real-time streaming infrastructure, the voice experience will feel laggy and unnatural. The PRD specifies \u003c500ms latency requirement which is critical for natural conversation flow.\n\n**Testing Requirements:**\n- **Unit Tests:** WebSocket connection lifecycle, audio chunk encoding/decoding, reconnection logic, audio buffer management\n- **Integration Tests:** End-to-end audio round-trip latency measurement, LFM API connection with test credentials, audio quality verification","design":"Use WebSocket for persistent bidirectional connection. Implement audio chunking for streaming (likely 20-40ms chunks). Handle audio format conversion between browser MediaRecorder and LFM expected format. Consider using AudioWorklet for low-latency audio processing on the client side.","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":480,"created_at":"2026-01-30T14:13:17.460975-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:17.460975-06:00","labels":["audio","backend","infrastructure","telnyx"],"dependencies":[{"issue_id":"test-e2t1","depends_on_id":"test-e2","type":"parent-child","created_at":"2026-01-30T14:13:17.612529-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t1s1","title":"Install and configure LFM 2.5-Audio SDK with TypeScript types","description":"Install the LFM 2.5-Audio SDK package and configure it for the Next.js project. Set up environment variables for API authentication (LIFM_API_KEY, LIFM_API_URL). Create TypeScript type definitions for the SDK if not provided. Configure the SDK client with proper initialization options for voice streaming mode.\n\n**Context:** The LFM 2.5-Audio SDK is the core dependency that enables natural voice conversations. Proper configuration with TypeScript types ensures type safety across the codebase and catches integration errors at compile time rather than runtime.\n\n**Testing Requirements:**\n- **Unit Tests:** Test SDK initialization with valid/invalid API keys, test that environment variables are properly loaded, test TypeScript types compile correctly, test SDK client instantiation doesn't throw errors","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:43.159033-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:43.159033-06:00","labels":["ai","ai-integration","backend","config","infrastructure","setup","voice-ai"],"dependencies":[{"issue_id":"test-e2t1s1","depends_on_id":"test-e2t1","type":"parent-child","created_at":"2026-01-30T14:13:43.549489-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t1s2","title":"Create WebSocket connection manager for bidirectional audio streaming","description":"Build a WebSocket connection manager class that handles: persistent connection establishment to LFM audio endpoint, automatic reconnection with exponential backoff (max 5 retries), connection state management (connecting, connected, disconnected, error), heartbeat/ping-pong for connection health monitoring, and graceful disconnection. Implement event emitters for connection state changes.\n\n**Context:** WebSocket is required for real-time bidirectional streaming to meet the \u003c500ms latency requirement specified in the PRD. The connection manager must be robust to handle real-world network conditions without dropping conversations.\n\n**Testing Requirements:**\n- **Unit Tests:** Test connection establishment with mock WebSocket, test reconnection logic triggers after disconnect, test exponential backoff timing (1s, 2s, 4s...), test max retry limit stops reconnection, test heartbeat sends pings at correct interval, test state transitions emit correct events","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:43.790369-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:43.790369-06:00","labels":["backend","frontend","infrastructure","realtime","setup","telephony","voice-ai"],"dependencies":[{"issue_id":"test-e2t1s2","depends_on_id":"test-e2t1","type":"parent-child","created_at":"2026-01-30T14:13:43.939895-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t1s2","depends_on_id":"test-e2t1s1","type":"blocks","created_at":"2026-01-30T14:15:01.369151-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t1s3","title":"Implement audio encoding/decoding pipeline for real-time transmission","description":"Create audio processing utilities that handle: converting browser MediaRecorder output (webm/opus) to LFM expected format, chunking outgoing audio into 20-40ms segments for streaming, reassembling incoming audio chunks into playable audio, handling sample rate conversion if needed (typically 16kHz for voice AI). Include utilities for audio format detection and validation.\n\n**Context:** Audio format conversion is critical for the voice experience. Browser audio formats don't directly match what LFM expects, so a clean encoding/decoding pipeline ensures audio quality is maintained while meeting the low-latency requirements for natural conversation flow.\n\n**Testing Requirements:**\n- **Unit Tests:** Test audio chunk size is within 20-40ms range, test format conversion produces valid output, test chunking maintains audio continuity (no gaps/overlaps), test sample rate conversion accuracy, test handling of malformed audio data, test memory cleanup after processing","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:44.108005-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:44.108005-06:00","labels":["audio","backend","config","infrastructure","streaming","voice-ai"],"dependencies":[{"issue_id":"test-e2t1s3","depends_on_id":"test-e2t1s2","type":"blocks","created_at":"2026-01-30T12:09:23.483674-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t1s3","depends_on_id":"test-e2t1","type":"parent-child","created_at":"2026-01-30T14:13:44.251043-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t1s3","depends_on_id":"test-e2t1s1","type":"blocks","created_at":"2026-01-30T14:15:01.527652-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t1s4","title":"Build AudioWorklet processor for low-latency client-side audio handling","description":"Create an AudioWorklet processor for the client that runs on a separate audio thread. Implement: audio capture from microphone with minimal latency, real-time audio level monitoring for VAD (voice activity detection) hints, buffering strategy that balances latency vs. reliability, and integration points for the WebSocket manager to send/receive audio chunks. Export as a module that can be loaded by the main audio context.\n\n**Context:** The PRD emphasizes conversations that 'feel human rather than robotic.' AudioWorklet runs on a dedicated audio thread, avoiding main thread jank that would cause perceptible delays. This is essential for the \u003c500ms latency target.\n\n**Testing Requirements:**\n- **Unit Tests:** Test AudioWorklet processor registers correctly, test audio capture produces valid PCM data, test buffer size stays within latency budget, test audio level calculation is accurate, test processor handles start/stop without memory leaks, test integration with WebSocket send method","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:13:44.44759-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:44.44759-06:00","labels":["audio","backend","frontend","infrastructure","integration","monitoring","performance","testing","voice-ai"],"dependencies":[{"issue_id":"test-e2t1s4","depends_on_id":"test-e2t1","type":"parent-child","created_at":"2026-01-30T14:13:44.572202-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t1s4","depends_on_id":"test-e2t1s2","type":"blocks","created_at":"2026-01-30T14:15:01.680851-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t1s4","depends_on_id":"test-e2t1s3","type":"blocks","created_at":"2026-01-30T14:15:01.887491-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t1s5","title":"Verify end-to-end audio streaming with test harness","description":"Create a minimal test harness page that demonstrates the complete audio pipeline: start recording from microphone, stream to LFM via WebSocket, receive audio response, play through speakers. Add console logging for latency measurements at each step. Verify the round-trip latency is under 500ms. Document any configuration needed for optimal performance.\n\n**Context:** This verification ensures all components work together before building higher-level features. The \u003c500ms latency requirement from the PRD must be validated with real audio, not just mocked tests. This test harness will also serve as a debugging tool during future development.\n\n**Testing Requirements:**\n- **Unit Tests:** Test harness page loads without errors, test microphone permission request works, test audio captures and sends to WebSocket, test response audio plays correctly, measure and log round-trip latency (must be \u003c500ms), test graceful handling of permission denial","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:44.80341-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:44.80341-06:00","labels":["integration","testing","voice-ai"],"dependencies":[{"issue_id":"test-e2t1s5","depends_on_id":"test-e2t1","type":"parent-child","created_at":"2026-01-30T14:13:44.939075-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t1s5","depends_on_id":"test-e2t1s4","type":"blocks","created_at":"2026-01-30T14:15:02.063462-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t2","title":"Implement debrief conversation flow engine","description":"Build the conversation state machine that manages the debrief call flow. Implement the scripted conversation structure with contextual follow-up questions based on agent responses. Handle conversation branching based on appointment outcomes (made offer, showing scheduled, lead not interested, etc.).\n\n**Context:** The debrief conversation is the primary value delivery mechanism - it's how RealHerd captures the information that keeps CRMs current. The PRD shows specific question flows: 'Did you meet with them?', 'How did it go?', then contextual follow-ups. The conversation must feel natural and adapt to what the agent says, not feel like a rigid survey.\n\n**Testing Requirements:**\n- **Unit Tests:** State machine transitions, follow-up question selection logic, conversation script loading, intent routing\n- **Integration Tests:** Full conversation flow with mocked LFM responses, edge cases like agent saying 'I don't know' or going off-script","design":"Model conversation as a state machine with defined states and transitions. Store conversation scripts in Convex for easy iteration. Use LFM's context window to maintain conversation history. Implement intent detection to route to appropriate follow-up questions. Design for extensibility to support other call types later.","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":480,"created_at":"2026-01-30T14:13:17.807402-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:17.807402-06:00","labels":["ai","api","backend","conversation","convex","database","telnyx","webhooks"],"dependencies":[{"issue_id":"test-e2t2","depends_on_id":"test-e2","type":"parent-child","created_at":"2026-01-30T14:13:17.934075-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t2","depends_on_id":"test-e2t1","type":"blocks","created_at":"2026-01-30T14:15:02.229174-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t2s1","title":"Define conversation state machine types and schema","description":"Create TypeScript types for the debrief conversation state machine. Define ConversationState enum (greeting, outcome_question, follow_up_positive, follow_up_negative, closing, etc.), TransitionEvent types (user_response, intent_detected, timeout), and ConversationContext interface to track current state, history, detected intents, and extracted data. Create Convex schema for conversation_scripts table storing question templates, valid transitions, and intent triggers per state.\n\n**Context:** The conversation flow must feel natural ('Hey Marcus, ready for a quick debrief?') not robotic. The state machine enables structured conversation while maintaining the warm, professional tone from the PRD. Storing scripts in Convex allows iteration without code deploys.\n\n**Testing Requirements:**\n- **Unit Tests:** Test ConversationState transitions are valid (no invalid state jumps), test ConversationContext serialization/deserialization, test schema validation for conversation_scripts documents","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:45.113281-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:45.113281-06:00","labels":["api","backend","database","security","types"],"dependencies":[{"issue_id":"test-e2t2s1","depends_on_id":"test-e2t2","type":"parent-child","created_at":"2026-01-30T14:13:45.324745-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t2s2","title":"Implement conversation state machine engine","description":"Build ConversationEngine class that manages state transitions. Implement transition(event: TransitionEvent): ConversationState method that validates transitions and updates context. Add getNextPrompt(): string that retrieves appropriate question from conversation_scripts based on current state and context. Implement intent detection routing using LFM's context window to classify responses into intents (made_offer, scheduled_showing, not_interested, needs_follow_up, unclear). Handle conversation branching based on appointment outcomes.\n\n**Context:** This is the core value delivery mechanism. The engine must adapt to what the agent says - if they mention 'they loved the house', route to positive follow-ups; if 'they weren't interested', route to objection capture. Must maintain conversation history in LFM context for natural flow.\n\n**Testing Requirements:**\n- **Unit Tests:** Test state transitions for each valid path (greeting→outcome→positive_followup→closing), test intent detection with mock responses ('They want to make an offer' → made_offer intent), test invalid transition rejection, test getNextPrompt returns contextually appropriate questions","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:45.505002-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:45.505002-06:00","labels":["ai","api","backend","crm","state-management","types"],"dependencies":[{"issue_id":"test-e2t2s2","depends_on_id":"test-e2t2","type":"parent-child","created_at":"2026-01-30T14:13:45.632493-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t2s2","depends_on_id":"test-e2t2s1","type":"blocks","created_at":"2026-01-30T14:15:02.384546-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t2s3","title":"Create debrief conversation scripts and seed data","description":"Author the actual conversation scripts following PRD tone guidelines. Create scripts for: greeting ('Hey {agent_name}, ready for a quick debrief about your {appointment_type} with {contact_name}?'), outcome question ('Did you meet with them?', 'How did it go?'), positive follow-ups (offer details, showing feedback, next steps), negative follow-ups (objection capture, reschedule interest), and closing (confirmation, next appointment preview). Include intent trigger patterns for each state. Seed into Convex conversation_scripts table.\n\n**Context:** The PRD emphasizes warm but professional tone - 'Hey Marcus, ready for a quick debrief?' not 'Howdy partner!' Scripts must feel like a trusted colleague asking natural questions, not a rigid survey. Use contractions, acknowledge context, respect the agent's time.\n\n**Testing Requirements:**\n- **Unit Tests:** Test all script templates render correctly with sample context data, test each state has at least one valid outbound transition, test intent patterns match expected sample responses","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:13:45.835144-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:45.835144-06:00","labels":["ai-prompts","backend","content","convex","data-processing","storage"],"dependencies":[{"issue_id":"test-e2t2s3","depends_on_id":"test-e2t2s2","type":"blocks","created_at":"2026-01-30T12:51:15.530487-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t2s3","depends_on_id":"test-e2t2","type":"parent-child","created_at":"2026-01-30T14:13:45.995924-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t2s3","depends_on_id":"test-e2t2s1","type":"blocks","created_at":"2026-01-30T14:15:02.547526-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t2s4","title":"Integrate conversation engine with voice pipeline and verify end-to-end","description":"Wire ConversationEngine into the Pipecat voice pipeline from task 2.1. Connect LFM transcription output to engine's transition() method. Feed getNextPrompt() output to TTS for responses. Implement conversation context persistence between turns using Convex. Add conversation completion detection and handoff to data extraction. Test complete debrief flow: greeting → outcome question → contextual follow-ups → closing.\n\n**Context:** This integration makes the conversation actually work over the phone. The voice pipeline handles speech-to-text and text-to-speech; the conversation engine provides the intelligence for what to say next. Must maintain natural pacing and handle interruptions gracefully.\n\n**Testing Requirements:**\n- **Unit Tests:** Test engine receives transcribed text and returns appropriate next prompt, test conversation context persists across multiple turns, test completion detection triggers correctly, test conversation history is accessible for data extraction","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:46.180747-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:46.180747-06:00","labels":["api","backend","integration","monitoring","real-estate","reliability"],"dependencies":[{"issue_id":"test-e2t2s4","depends_on_id":"test-e2t2s1","type":"blocks","created_at":"2026-01-30T12:09:24.322765-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t2s4","depends_on_id":"test-e2t2","type":"parent-child","created_at":"2026-01-30T14:13:46.330177-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t2s4","depends_on_id":"test-e2t2s2","type":"blocks","created_at":"2026-01-30T14:15:02.704226-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t2s4","depends_on_id":"test-e2t2s3","type":"blocks","created_at":"2026-01-30T14:15:02.875821-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t2s5","title":"Verify complete calls schema with manual test and dev server","description":"Run npx convex dev to deploy schema and functions. Use Convex dashboard to manually create a test call, update its status through the lifecycle, attach a mock recording, and query it back via getCallLog and getCallsByContact. Verify all indexes are created correctly.\n\n**Context:** Manual verification ensures the entire call data flow works before integrating with Twilio. Catching schema or mutation issues here is much easier than debugging through the full Twilio integration.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":30,"created_at":"2026-01-30T12:07:29.247609-06:00","created_by":"David Habedank","updated_at":"2026-01-30T12:31:33.877847-06:00","labels":["backend","testing"],"dependencies":[{"issue_id":"test-e2t2s5","depends_on_id":"test-e2t2s2","type":"blocks","created_at":"2026-01-30T12:09:24.539513-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t2s5","depends_on_id":"test-e2t2s3","type":"blocks","created_at":"2026-01-30T12:09:24.717867-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t2s5","depends_on_id":"test-e2t2s4","type":"blocks","created_at":"2026-01-30T12:09:24.947484-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T12:31:33.877847-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e2t3","title":"Build interruption handling and turn-taking logic","description":"Implement graceful handling of conversation interruptions when the agent talks over the AI. Build natural turn-taking that doesn't cut off the agent and knows when to yield. Handle awkward pauses and conversation repair.\n\n**Context:** The PRD explicitly requires 'Conversation handles interruptions gracefully' in acceptance criteria. Real conversations have interruptions, overlapping speech, and pauses - if the AI plows through or gets confused by these, the experience feels robotic and frustrating. This is what separates good voice AI from bad.\n\n**Testing Requirements:**\n- **Unit Tests:** VAD threshold tuning, interruption detection timing, turn-taking state machine, debounce logic\n- **Integration Tests:** Simulated interruption scenarios, conversation recovery after interruptions, latency impact of interruption handling","design":"Implement voice activity detection (VAD) to detect when agent starts speaking. Use LFM's interruption handling capabilities. Add debounce logic for brief overlaps vs intentional interruptions. Implement conversation repair phrases ('Sorry, go ahead' or 'I didn't catch that'). Track conversation rhythm for natural pacing.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:18.106848-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:18.106848-06:00","labels":["ai","api","audio","backend","convex","database","telnyx"],"dependencies":[{"issue_id":"test-e2t3","depends_on_id":"test-e2","type":"parent-child","created_at":"2026-01-30T14:13:18.257291-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t3","depends_on_id":"test-e2t1","type":"blocks","created_at":"2026-01-30T14:15:03.058177-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t3","depends_on_id":"test-e2t2","type":"blocks","created_at":"2026-01-30T14:15:03.199029-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t3s1","title":"Implement Voice Activity Detection (VAD) integration","description":"Set up voice activity detection to detect when the agent starts or stops speaking during AI audio playback. Integrate with LiveKit's VAD capabilities or implement client-side VAD using audio analysis. Configure sensitivity thresholds to distinguish speech from background noise. Track speaking state changes with timestamps for turn-taking decisions.\n\n**Context:** VAD is the foundation of interruption handling - we can't respond to interruptions we don't detect. This must work reliably in various acoustic environments (office, car, home) that real estate agents work in.\n\n**Testing Requirements:**\n- **Unit Tests:** Test VAD state transitions (silence→speech, speech→silence), test sensitivity threshold configuration, test noise filtering (keyboard sounds, HVAC shouldn't trigger), mock audio input streams for consistent testing","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:46.517445-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:46.517445-06:00","labels":["audio","backend","database","scheduling","types","voice"],"dependencies":[{"issue_id":"test-e2t3s1","depends_on_id":"test-e2t3","type":"parent-child","created_at":"2026-01-30T14:13:46.64302-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t3s2","title":"Build interruption classification with debounce logic","description":"Implement logic to distinguish intentional interruptions from brief overlaps (coughs, 'uh-huh' acknowledgments, background noise). Add debounce timing - brief speech (\u003c300ms) during AI output should not interrupt. Longer speech (\u003e500ms) or speech that continues after a pause should trigger interruption. Use LFM's interruption handling capabilities to stop generation gracefully.\n\n**Context:** Without proper classification, the AI will either never yield (frustrating) or constantly stop mid-sentence at every noise (equally frustrating). The debounce timing creates natural conversation flow.\n\n**Testing Requirements:**\n- **Unit Tests:** Test debounce with various speech durations (100ms, 300ms, 500ms, 1s), test that 'uh-huh' acknowledgments don't interrupt, test that sustained speech does interrupt, test LFM stop signal is sent correctly, test state cleanup after interruption","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:13:46.819141-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:46.819141-06:00","labels":["ai","api","backend","state-machine","telnyx","types","voice"],"dependencies":[{"issue_id":"test-e2t3s2","depends_on_id":"test-e2t3","type":"parent-child","created_at":"2026-01-30T14:13:46.949654-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t3s2","depends_on_id":"test-e2t3s1","type":"blocks","created_at":"2026-01-30T14:15:03.347758-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t3s3","title":"Implement conversation repair and graceful yielding","description":"Create conversation repair phrases that feel natural when interruptions occur: 'Sorry, go ahead', 'Oh please, continue', 'I didn't catch that - could you repeat?'. Implement context-aware selection (use different phrases based on how much AI had spoken, whether user's speech was clear). Handle the transition smoothly - stop AI audio, brief pause, then yield or repair.\n\n**Context:** This is what makes voice AI feel human vs robotic. Real conversations have overlaps and the graceful recovery ('sorry, go ahead') is a social norm that users expect. The PRD emphasizes conversations should feel natural.\n\n**Testing Requirements:**\n- **Unit Tests:** Test repair phrase selection based on context, test that AI audio stops before repair phrase plays, test appropriate pause duration before yielding, test phrase rotation (don't repeat same phrase consecutively), test recovery when user speech was unclear","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:47.131142-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:47.131142-06:00","labels":["api-integration","backend","database","integration","sms","telnyx","voice","webhooks"],"dependencies":[{"issue_id":"test-e2t3s3","depends_on_id":"test-e2t3s1","type":"blocks","created_at":"2026-01-30T12:51:17.23738-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t3s3","depends_on_id":"test-e2t3","type":"parent-child","created_at":"2026-01-30T14:13:47.272658-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t3s3","depends_on_id":"test-e2t3s2","type":"blocks","created_at":"2026-01-30T14:15:03.523135-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t3s4","title":"Add conversation rhythm tracking and pause handling","description":"Track conversation rhythm metrics: average response time, pause patterns, speaking pace. Implement awkward pause detection (\u003e2s silence after AI yields) with gentle prompts like 'Still there?' or 'Take your time'. Adapt AI response timing to match user's conversational pace. Store rhythm profile per user for personalization across sessions.\n\n**Context:** Natural turn-taking requires understanding the rhythm of conversation. Some agents speak quickly, others need processing time. Adapting to individual patterns makes the experience feel personalized and patient rather than rushed or awkward.\n\n**Testing Requirements:**\n- **Unit Tests:** Test rhythm metric calculation (average response times), test awkward pause detection at various thresholds, test gentle prompt triggering after silence, test pace adaptation logic, test rhythm persistence across mock sessions, verify prompts don't fire during expected pauses (user thinking)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:13:47.446167-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:47.446167-06:00","labels":["backend","configuration","database","e2e","frontend","testing","verification","voice"],"dependencies":[{"issue_id":"test-e2t3s4","depends_on_id":"test-e2t3","type":"parent-child","created_at":"2026-01-30T14:13:47.591511-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t3s4","depends_on_id":"test-e2t3s3","type":"blocks","created_at":"2026-01-30T14:15:03.683192-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t4","title":"Implement transcript generation and storage","description":"Generate full conversation transcripts with speaker labels (Agent vs AI) and accurate timestamps. Store transcripts in Convex with proper schema for querying. Handle transcript formatting for display.\n\n**Context:** Transcripts serve dual purposes: they're the audit trail for what was discussed, and they're the source for data extraction. The PRD shows transcripts displayed in the dashboard with speaker labels and timestamps alongside recording playback. Brokers and team leads need to be able to review what their agents reported.\n\n**Testing Requirements:**\n- **Unit Tests:** Transcript segment creation, timestamp calculation, speaker attribution logic, transcript formatting\n- **Integration Tests:** Full call transcript generation, transcript storage and retrieval from Convex, transcript accuracy spot-checks","design":"Use LFM's built-in transcription or run parallel speech-to-text. Store transcript as array of segments with speaker, text, start_time, end_time. Index by call_id for efficient retrieval. Consider streaming transcript updates for long calls. Format timestamps as relative to call start.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:18.436255-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:18.436255-06:00","labels":["ai","backend","convex","database","storage","telnyx"],"dependencies":[{"issue_id":"test-e2t4","depends_on_id":"test-e2t3","type":"blocks","created_at":"2026-01-30T12:51:17.886555-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t4","depends_on_id":"test-e2","type":"parent-child","created_at":"2026-01-30T14:13:18.574239-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t4","depends_on_id":"test-e2t2","type":"blocks","created_at":"2026-01-30T14:15:03.921796-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t4s1","title":"Create transcript schema and types in Convex","description":"Define the transcript data model in Convex schema. Create a transcript_segments table with fields: id, call_id (indexed), speaker ('agent' | 'ai'), text (string), start_time (number - ms from call start), end_time (number - ms from call start), created_at. Also add a transcripts table with call_id (indexed), segments (array reference or embedded), status ('processing' | 'complete' | 'error'), total_duration_ms. Create corresponding TypeScript types.\n\n**Context:** The PRD shows transcripts displayed alongside recording playback with speaker labels and timestamps. Brokers/team leads need to review what agents reported. Schema must support efficient querying by call_id and proper indexing for dashboard display.\n\n**Testing Requirements:**\n- **Unit Tests:** Test schema validation accepts valid transcript segments, rejects invalid speaker types, validates start_time \u003c end_time, validates call_id is required. Test index on call_id exists.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:13:47.858569-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:47.858569-06:00","labels":["backend","configuration","conversation-design","database","frontend","product","telephony","telnyx","ui"],"dependencies":[{"issue_id":"test-e2t4s1","depends_on_id":"test-e2t4","type":"parent-child","created_at":"2026-01-30T14:13:48.321668-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t4s2","title":"Implement transcript generation from LFM audio","description":"Create a transcription service that processes call audio. First check if LFM provides built-in transcription via their API - if so, use it directly. Otherwise, integrate a speech-to-text service (Deepgram or AssemblyAI recommended for real-time). Implement speaker diarization to distinguish Agent vs AI voices. Parse transcription results into segment format with accurate timestamps relative to call start. Handle streaming updates for long calls by storing partial transcripts.\n\n**Context:** Transcripts are the source for data extraction and audit trail. Need accurate speaker identification since the AI voice vs human agent distinction is critical for understanding what was said by whom.\n\n**Testing Requirements:**\n- **Unit Tests:** Test parseTranscriptionResponse() correctly maps API response to segment format. Test speaker label assignment. Test timestamp calculation relative to call start. Test handling of partial/streaming results. Mock LFM/speech-to-text API responses.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:48.509498-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:48.509498-06:00","labels":["backend","conversation-engine","convex","frontend","integration","telephony","webhook","webrtc"],"dependencies":[{"issue_id":"test-e2t4s2","depends_on_id":"test-e2t4","type":"parent-child","created_at":"2026-01-30T14:13:48.637278-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t4s2","depends_on_id":"test-e2t4s1","type":"blocks","created_at":"2026-01-30T14:15:04.07628-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t4s3","title":"Create Convex mutations and queries for transcript storage/retrieval","description":"Implement Convex mutations: createTranscript(call_id), appendSegments(transcript_id, segments[]), finalizeTranscript(transcript_id). Implement queries: getTranscriptByCallId(call_id), getSegmentsByTimeRange(call_id, start, end). Mutations should handle idempotency for retry safety. Queries should return segments ordered by start_time.\n\n**Context:** Dashboard needs to display transcripts alongside recording playback. Must support both real-time updates during calls and full retrieval for review.\n\n**Testing Requirements:**\n- **Unit Tests:** Test createTranscript creates record with 'processing' status. Test appendSegments adds to existing transcript. Test finalizeTranscript updates status to 'complete'. Test getTranscriptByCallId returns null for non-existent call. Test segments returned in chronological order.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:48.901282-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:48.901282-06:00","labels":["backend","convex","crm-integration","database","frontend","real-time","storage"],"dependencies":[{"issue_id":"test-e2t4s3","depends_on_id":"test-e2t4s2","type":"blocks","created_at":"2026-01-30T12:51:18.356601-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t4s3","depends_on_id":"test-e2t4","type":"parent-child","created_at":"2026-01-30T14:13:49.04541-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t4s3","depends_on_id":"test-e2t4s1","type":"blocks","created_at":"2026-01-30T14:15:04.26469-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t4s4","title":"Build transcript display component with speaker labels and timestamps","description":"Create a React component TranscriptViewer that displays conversation transcripts. Show speaker labels using visual distinction: 'Agent' in one style (e.g., aligned left with agent color), 'AI' in another (aligned right or different color per brand guidelines - use Deep Walnut for text, Terracotta accents). Display timestamps as relative to call start (e.g., '0:45', '1:23'). Support highlighting current segment during audio playback sync. Use monospace font (JetBrains Mono per brand guide) for timestamps.\n\n**Context:** PRD shows transcripts in dashboard with speaker labels and timestamps alongside recording playback. Brokers/team leads review what agents reported. Must be scannable and clearly show who said what.\n\n**Testing Requirements:**\n- **Unit Tests:** Test component renders segments with correct speaker labels. Test timestamp formatting (seconds to mm:ss). Test empty state handling. Test highlighting of active segment prop. Test accessibility - proper ARIA labels for speaker identification.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:13:49.23604-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:49.23604-06:00","labels":["api","backend","convex","frontend","integration","security","testing","ui"],"dependencies":[{"issue_id":"test-e2t4s4","depends_on_id":"test-e2t4s2","type":"blocks","created_at":"2026-01-30T11:10:46.167821-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t4s4","depends_on_id":"test-e2t4","type":"parent-child","created_at":"2026-01-30T14:13:49.377441-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t4s4","depends_on_id":"test-e2t4s3","type":"blocks","created_at":"2026-01-30T14:15:04.435148-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t5","title":"Build transcript display UI with recording playback","description":"Create the dashboard component that displays call transcripts with speaker labels and timestamps. Implement synchronized recording playback that highlights the current transcript segment. Add playback controls (play/pause, speed, seek).\n\n**Context:** Brokers and team leads need to review calls quickly - the PRD shows this as a key dashboard feature. Synchronized transcript + audio is industry standard for call review (like Gong/Chorus). This lets managers skim the transcript and jump to specific moments in the recording.\n\n**Testing Requirements:**\n- **Unit Tests:** Timestamp-to-segment matching, playback state management, seek position calculation\n- **Integration Tests:** Audio playback with real recordings, transcript sync accuracy, cross-browser audio compatibility","design":"Use audio element with custom controls styled to brand. Implement transcript auto-scroll during playback. Highlight current segment based on playback timestamp. Allow clicking transcript segments to seek audio. Store recordings in Convex file storage. Consider waveform visualization for quick scanning.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:18.839183-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:18.839183-06:00","labels":["api","audio","backend","frontend","sms","telnyx","ui","webhooks"],"dependencies":[{"issue_id":"test-e2t5","depends_on_id":"test-e2t1","type":"blocks","created_at":"2026-01-30T12:51:18.936729-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t5","depends_on_id":"test-e2","type":"parent-child","created_at":"2026-01-30T14:13:18.974599-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t5","depends_on_id":"test-e2t4","type":"blocks","created_at":"2026-01-30T14:15:04.601295-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t5s1","title":"Create transcript display component with speaker labels and timestamps","description":"Build a TranscriptViewer component that renders call transcripts with clear visual distinction between speakers. Each segment should show: speaker name/role with colored indicator, timestamp in MM:SS format, and the transcript text. Use monospace font (JetBrains Mono per brand guidelines) for timestamps. Style with Warm Cream background (#FAF7F2), cards with 12px border radius, and Deep Walnut (#3D3029) text. Implement auto-scroll container that follows playback position.\n\n**Context:** The PRD emphasizes transcripts as a key dashboard feature for brokers and team leads to review calls quickly. Clear speaker labels help managers identify who said what without listening to the entire recording.\n\n**Testing Requirements:**\n- **Unit Tests:** Test TranscriptViewer renders segments with correct speaker labels, test timestamp formatting (edge cases: 0:00, 59:59, 1:00:00+), test empty transcript state shows Shep mascot, test segment highlighting updates when currentTime prop changes","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:50.457252-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:50.457252-06:00","labels":["audio","backend","database","frontend","integration","ui"],"dependencies":[{"issue_id":"test-e2t5s1","depends_on_id":"test-e2t5","type":"parent-child","created_at":"2026-01-30T14:13:50.681283-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t5s2","title":"Build custom audio player with brand-styled controls","description":"Create an AudioPlayer component wrapping HTML5 audio element with custom controls matching RealHerd brand. Include: play/pause button (Terracotta #C4704D primary), playback speed selector (0.5x, 1x, 1.25x, 1.5x, 2x), seek slider with Warm Sand (#E8DFD4) track and Terracotta progress, current time / duration display. Add waveform visualization using a lightweight library (wavesurfer.js or similar) for quick visual scanning of the call. Style controls with 8px border radius per brand guidelines.\n\n**Context:** The PRD specifies custom controls styled to brand with waveform visualization for quick scanning. Industry-standard call review tools (Gong/Chorus) use waveforms to let managers visually identify conversation patterns and jump to specific moments.\n\n**Testing Requirements:**\n- **Unit Tests:** Test play/pause toggles audio state, test speed selector changes playbackRate, test seek slider updates currentTime, test time display formats correctly, test waveform renders from audio source, test loading state while audio buffers","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":120,"created_at":"2026-01-30T14:13:50.887322-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:50.887322-06:00","labels":["api-integration","audio","backend","database","frontend","integration","ui"],"dependencies":[{"issue_id":"test-e2t5s2","depends_on_id":"test-e2t5s1","type":"blocks","created_at":"2026-01-30T12:51:19.187644-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t5s2","depends_on_id":"test-e2t5","type":"parent-child","created_at":"2026-01-30T14:13:51.059191-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t5s3","title":"Implement synchronized transcript-audio playback with segment highlighting","description":"Wire TranscriptViewer and AudioPlayer together so transcript auto-scrolls and highlights the current segment based on audio playback position. Use timeupdate event from audio element to track position. Match current time against transcript segment timestamps to determine active segment. Highlight active segment with Terracotta (#C4704D) left border and subtle Warm Sand (#E8DFD4) background. Implement click-to-seek: clicking any transcript segment should seek audio to that segment's start time.\n\n**Context:** Synchronized transcript + audio is the core value of this feature - it lets managers skim the transcript and jump to specific moments. The PRD explicitly calls for 'synchronized recording playback that highlights the current transcript segment' and 'clicking transcript segments to seek audio'.\n\n**Testing Requirements:**\n- **Unit Tests:** Test segment highlighting updates on timeupdate, test auto-scroll moves viewport to active segment, test clicking segment seeks audio to correct timestamp, test edge cases: clicking during playback vs paused, rapid clicks, seeking beyond transcript","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:51.253548-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:51.253548-06:00","labels":["ai","api","audio","backend","frontend","integration","webhooks"],"dependencies":[{"issue_id":"test-e2t5s3","depends_on_id":"test-e2t5","type":"parent-child","created_at":"2026-01-30T14:13:51.38136-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t5s3","depends_on_id":"test-e2t5s1","type":"blocks","created_at":"2026-01-30T14:15:04.77114-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t5s3","depends_on_id":"test-e2t5s2","type":"blocks","created_at":"2026-01-30T14:15:04.932639-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t5s4","title":"Integrate with Convex file storage and create call review page","description":"Create a CallReviewPage that fetches recording from Convex file storage and transcript data from the calls table. Generate signed URL for audio playback. Handle loading states with skeleton UI, error states with Shep mascot and friendly message ('Shep couldn't fetch that recording'). Add call metadata header showing: contact name, call date/time, duration, call outcome. Wire everything together and verify end-to-end: load page → fetch data → play audio → transcript syncs → click to seek works.\n\n**Context:** The PRD specifies recordings stored in Convex file storage. This final integration task ensures the feature works end-to-end for the real use case of brokers reviewing their agents' calls.\n\n**Testing Requirements:**\n- **Unit Tests:** Test page fetches call data and recording URL on mount, test loading skeleton displays while fetching, test error state renders when fetch fails, test metadata header displays correct call info, test audio source is set from Convex storage URL","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:13:51.570461-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:51.570461-06:00","labels":["backend","conversation-flow","convex","frontend","integration","testing","webhooks"],"dependencies":[{"issue_id":"test-e2t5s4","depends_on_id":"test-e2t5s2","type":"blocks","created_at":"2026-01-30T12:51:19.600391-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t5s4","depends_on_id":"test-e2t5","type":"parent-child","created_at":"2026-01-30T14:13:51.716812-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t5s4","depends_on_id":"test-e2t5s3","type":"blocks","created_at":"2026-01-30T14:15:05.094702-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t6","title":"Implement OpenRouter fallback for low-confidence extractions","description":"Set up OpenRouter integration with GPT-4-turbo and Claude as fallback for when LFM extraction confidence is low. Implement confidence scoring for extracted data. Route low-confidence extractions through OpenRouter for verification or re-extraction.\n\n**Context:** The PRD acceptance criteria includes 'OpenRouter fallback triggers for low-confidence extractions'. LFM is optimized for real-time voice, but may not always extract structured data perfectly. OpenRouter provides access to stronger reasoning models that can review transcripts and extract data more reliably when needed.\n\n**Testing Requirements:**\n- **Unit Tests:** Confidence scoring logic, extraction prompt generation, fallback routing decision, response parsing\n- **Integration Tests:** OpenRouter API calls with test transcripts, extraction quality comparison between LFM and fallback, end-to-end extraction pipeline","design":"Define confidence thresholds for extraction fields. Create extraction prompt templates for OpenRouter models. Implement async extraction pipeline that runs after call ends. Log extraction source (LFM vs OpenRouter) for quality monitoring. Consider cost optimization by batching low-confidence items.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:19.16866-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:19.16866-06:00","labels":["ai","backend","dashboard","frontend","integration","ui"],"dependencies":[{"issue_id":"test-e2t6","depends_on_id":"test-e2t3","type":"blocks","created_at":"2026-01-30T12:51:20.010566-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t6","depends_on_id":"test-e2","type":"parent-child","created_at":"2026-01-30T14:13:19.31802-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t6","depends_on_id":"test-e2t2","type":"blocks","created_at":"2026-01-30T14:15:05.375132-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t6","depends_on_id":"test-e2t4","type":"blocks","created_at":"2026-01-30T14:15:05.776573-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t6s1","title":"Define confidence scoring system and thresholds","description":"Create TypeScript types and constants for extraction confidence scoring. Define field-level confidence scores (0-1) for each extracted data type (contact info, intent, follow-up dates, property details). Set thresholds: high confidence (\u003e0.85) uses LFM directly, low confidence (\u003c0.85) triggers OpenRouter fallback. Include confidence aggregation logic for overall extraction quality.\n\n**Context:** The PRD specifies 'OpenRouter fallback triggers for low-confidence extractions'. Need clear, measurable thresholds to determine when LFM extraction is good enough vs when stronger reasoning models are needed. Field-level scoring allows partial fallbacks (e.g., only re-extract unclear property details).\n\n**Testing Requirements:**\n- **Unit Tests:** Test confidence score calculation for various extraction scenarios, test threshold boundary conditions (0.84 vs 0.85 vs 0.86), test aggregate confidence from field-level scores, test confidence type validation","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:13:51.94646-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:51.94646-06:00","labels":["ai","backend","convex","data","frontend","infrastructure","integration","testing"],"dependencies":[{"issue_id":"test-e2t6s1","depends_on_id":"test-e2t6","type":"parent-child","created_at":"2026-01-30T14:13:52.098398-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t6s2","title":"Implement OpenRouter client with GPT-4-turbo and Claude models","description":"Create OpenRouter API client class with authentication, model selection (GPT-4-turbo primary, Claude as secondary), and error handling. Implement extraction prompt templates optimized for reviewing transcripts and extracting structured contact data, intent signals, and follow-up details. Include retry logic with model fallback (try GPT-4-turbo, fall back to Claude on failure).\n\n**Context:** OpenRouter provides access to stronger reasoning models than LFM for complex extraction tasks. GPT-4-turbo and Claude excel at understanding nuanced conversation context and extracting accurate structured data from messy real-world transcripts.\n\n**Testing Requirements:**\n- **Unit Tests:** Test OpenRouter authentication, test prompt template rendering with sample transcripts, test model fallback logic when primary fails, test response parsing into extraction types, test rate limit handling (429), test timeout handling","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:52.291982-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:52.291982-06:00","labels":["admin","ai","backend","frontend","integration","monitoring","performance","react","testing","ui"],"dependencies":[{"issue_id":"test-e2t6s2","depends_on_id":"test-e2t6","type":"parent-child","created_at":"2026-01-30T14:13:52.421183-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t6s2","depends_on_id":"test-e2t6s1","type":"blocks","created_at":"2026-01-30T14:15:05.97865-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t6s3","title":"Build async extraction pipeline with source tracking","description":"Create async extraction service that runs after call ends. Pipeline: 1) Check LFM extraction confidence scores, 2) Route low-confidence fields to OpenRouter for re-extraction, 3) Merge results preferring higher-confidence values, 4) Log extraction source (lfm|openrouter) per field for quality monitoring. Support batching multiple low-confidence items for cost optimization. Store final extraction with source metadata.\n\n**Context:** The design notes specify 'async extraction pipeline that runs after call ends' and 'log extraction source for quality monitoring'. This enables post-call enhancement without affecting real-time voice experience, plus data to evaluate LFM vs OpenRouter quality over time.\n\n**Testing Requirements:**\n- **Unit Tests:** Test pipeline triggers only for low-confidence extractions, test field-level routing (some fields LFM, some OpenRouter), test result merging logic, test source tracking in output, test batch aggregation for multiple pending extractions, test pipeline handles OpenRouter failures gracefully","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:52.594245-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:52.594245-06:00","labels":["ai","backend","conversation","demo","frontend","optimization","performance","react","ui"],"dependencies":[{"issue_id":"test-e2t6s3","depends_on_id":"test-e2t6","type":"parent-child","created_at":"2026-01-30T14:13:52.762719-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t6s3","depends_on_id":"test-e2t6s1","type":"blocks","created_at":"2026-01-30T14:15:06.137412-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t6s3","depends_on_id":"test-e2t6s2","type":"blocks","created_at":"2026-01-30T14:15:06.305692-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t6s4","title":"Add extraction quality monitoring and cost tracking","description":"Implement monitoring for extraction pipeline: track LFM vs OpenRouter usage rates, confidence score distributions, extraction success rates by source, and OpenRouter API costs. Add logging for quality analysis (which fields most often need fallback). Create simple metrics endpoint or logging format for operational visibility.\n\n**Context:** Design notes emphasize 'log extraction source for quality monitoring' and 'cost optimization'. Monitoring reveals if LFM confidence thresholds need tuning, which extraction types are problematic, and whether OpenRouter costs are acceptable. Essential for iterating on extraction quality.\n\n**Testing Requirements:**\n- **Unit Tests:** Test metrics increment correctly for LFM vs OpenRouter extractions, test confidence distribution tracking, test cost calculation from OpenRouter usage, test logging format includes required fields (source, confidence, field type)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:53.006902-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:53.006902-06:00","labels":["admin","backend","frontend","integration","monitoring","testing","validation","verification"],"dependencies":[{"issue_id":"test-e2t6s4","depends_on_id":"test-e2t6","type":"parent-child","created_at":"2026-01-30T14:13:53.154268-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t6s4","depends_on_id":"test-e2t6s3","type":"blocks","created_at":"2026-01-30T14:15:06.470916-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t7","title":"Verify voice conversation end-to-end flow","description":"Conduct end-to-end testing of the complete voice conversation system: initiate call → bidirectional audio streaming → debrief conversation flow → interruption handling → transcript generation → recording storage → dashboard display → data extraction with fallback. Verify \u003c500ms latency requirement.\n\n**Context:** This epic is the core product - voice conversations that feel human. Before moving to other epics, we need confidence that all the pieces work together smoothly. The PRD's acceptance criteria are specific and measurable - this task ensures we actually meet them.\n\n**Testing Requirements:**\n- **Unit Tests:** N/A - this is an integration verification task\n- **Integration Tests:** Full conversation flow testing, latency measurement under load, error recovery scenarios, acceptance criteria verification checklist","design":"Create test scenarios covering happy path and edge cases. Measure and log latency at each stage. Document any gaps or issues found. Create checklist against PRD acceptance criteria. Test with realistic network conditions (some latency, occasional packet loss).","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":240,"created_at":"2026-01-30T14:13:19.538216-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:19.538216-06:00","labels":["backend","integration","qa","reliability","testing","verification"],"dependencies":[{"issue_id":"test-e2t7","depends_on_id":"test-e2","type":"parent-child","created_at":"2026-01-30T14:13:19.702312-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t7","depends_on_id":"test-e2t3","type":"blocks","created_at":"2026-01-30T14:15:06.62273-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t7","depends_on_id":"test-e2t4","type":"blocks","created_at":"2026-01-30T14:15:06.859388-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t7","depends_on_id":"test-e2t5","type":"blocks","created_at":"2026-01-30T14:15:07.066157-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t7","depends_on_id":"test-e2t6","type":"blocks","created_at":"2026-01-30T14:15:07.240852-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t7s1","title":"Create E2E test scenarios and acceptance criteria checklist","description":"Document comprehensive test scenarios based on PRD requirements: happy path (full conversation flow), edge cases (interruptions, network issues, long silences), and specific acceptance criteria. Include latency measurement points at each stage: call initiation, first audio byte, AI response time, transcript generation, storage completion. Create checklist mapping to PRD's \u003c500ms latency requirement and conversation quality standards.\n\n**Context:** Before testing, we need a clear definition of success. The PRD specifies \u003c500ms latency and natural conversation flow - this ensures we test against actual requirements, not assumptions.\n\n**Testing Requirements:**\n- **Unit Tests:** Validate test scenario document completeness: all PRD acceptance criteria covered, latency measurement points defined, edge cases enumerated","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:13:53.351094-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:53.351094-06:00","labels":["backend","documentation","error-handling","telephony","testing"],"dependencies":[{"issue_id":"test-e2t7s1","depends_on_id":"test-e2t7","type":"parent-child","created_at":"2026-01-30T14:13:53.523102-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t7s2","title":"Execute happy path E2E test with latency instrumentation","description":"Run complete conversation flow: initiate call → establish bidirectional audio → conduct debrief conversation with AI → complete call → verify transcript generation → confirm recording storage → check dashboard display → validate data extraction. Add timing instrumentation at each stage boundary. Log all latency measurements. Test should simulate realistic broker-agent conversation (3-5 minute call with natural pauses, interruptions).\n\n**Context:** The happy path must work flawlessly before edge cases matter. Latency measurement proves we meet the \u003c500ms requirement that makes conversations feel human.\n\n**Testing Requirements:**\n- **Unit Tests:** Verify: call connects \u003c2s, first AI audio \u003c500ms after user speech ends, transcript appears within 30s of call end, recording accessible in dashboard, extracted data matches conversation content","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:53.777396-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:53.777396-06:00","labels":["backend","integration","resilience","telephony","testing"],"dependencies":[{"issue_id":"test-e2t7s2","depends_on_id":"test-e2t7","type":"parent-child","created_at":"2026-01-30T14:13:54.217489-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t7s2","depends_on_id":"test-e2t7s1","type":"blocks","created_at":"2026-01-30T14:15:07.413474-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t7s3","title":"Execute edge case tests with degraded network simulation","description":"Test interruption handling (user interrupts AI mid-sentence, AI should stop gracefully), long silence handling (\u003e5 seconds), network degradation (add 100-200ms latency, 1-2% packet loss using network throttling). Test data extraction fallback when LLM extraction fails. Verify graceful degradation - calls should complete even if non-critical features fail.\n\n**Context:** Real estate agents are often in cars, at properties with poor signal. The system must handle imperfect conditions gracefully while still feeling professional.\n\n**Testing Requirements:**\n- **Unit Tests:** Verify: interruptions stop AI within 200ms, silences prompt gentle re-engagement, network issues don't crash call, fallback extraction produces usable (if less complete) data","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:54.412663-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:54.412663-06:00","labels":["backend","integration","observability","security","telephony","testing"],"dependencies":[{"issue_id":"test-e2t7s3","depends_on_id":"test-e2t7s1","type":"blocks","created_at":"2026-01-30T12:51:22.626453-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t7s3","depends_on_id":"test-e2t7","type":"parent-child","created_at":"2026-01-30T14:13:54.537315-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t7s3","depends_on_id":"test-e2t7s2","type":"blocks","created_at":"2026-01-30T14:15:07.575381-06:00","created_by":"David Habedank"}]}
{"id":"test-e2t7s4","title":"Document test results and create latency performance report","description":"Compile all test results into structured report: pass/fail against each PRD acceptance criterion, latency measurements at each stage (min/max/avg/p95), identified gaps or issues with severity ratings, screenshots of dashboard display. Create actionable issue list for any failures. Update any relevant documentation with actual measured performance baselines.\n\n**Context:** This documentation proves the system works and identifies what needs fixing before launch. The latency report becomes our baseline for performance monitoring.\n\n**Testing Requirements:**\n- **Unit Tests:** Validate report completeness: all test scenarios have results, all latency points have measurements, all failures have associated issues created in beads","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:54.720731-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:54.720731-06:00","labels":["backend","documentation","integration","telephony","testing"],"dependencies":[{"issue_id":"test-e2t7s4","depends_on_id":"test-e2t7","type":"parent-child","created_at":"2026-01-30T14:13:54.872408-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t7s4","depends_on_id":"test-e2t7s2","type":"blocks","created_at":"2026-01-30T14:15:07.739652-06:00","created_by":"David Habedank"},{"issue_id":"test-e2t7s4","depends_on_id":"test-e2t7s3","type":"blocks","created_at":"2026-01-30T14:15:07.907275-06:00","created_by":"David Habedank"}]}
{"id":"test-e3","title":"Data Extraction \u0026 CRM Sync Pipeline","description":"Build the extraction pipeline that turns conversation transcripts into structured CRM data. Implement Follow Up Boss API integration for automatic syncing of lead updates, notes, and tasks.\n\n**Context:** Extracted data that syncs to the CRM is where agents see real value - their CRM stays current without typing. This is the 'magic' that makes conversations actionable.\n\n**Testing Requirements:**\n- **Unit Tests:** Extraction prompt parsing, confidence calculation, FUB payload formatting, lead matching algorithms\n- **Integration Tests:** FUB API authentication, note creation, lead update, task creation, rate limit handling\n- **Type Tests:** ExtractedData types, FUB API response types, CRMSyncLog types\n- **E2E Tests:** Complete flow: debrief call → extraction → FUB sync → verify in FUB dashboard","acceptance_criteria":"- ExtractedData populated from debrief conversations (temperature, stage, summary, tasks, timeline)\n- Confidence scoring flags low-confidence extractions for review\n- Follow Up Boss API key configuration in organization settings\n- Connection testing validates FUB credentials\n- Lead matching works by phone, email, or name\n- Notes created in FUB with formatted summary\n- Lead fields updated (stage, temperature, custom fields)\n- Tasks created for follow-ups with due dates\n- Sync status displays in dashboard (pending, syncing, synced, failed)\n- CRM sync logs track all operations","status":"open","priority":1,"issue_type":"epic","owner":"david@habedank.org","estimated_minutes":3840,"created_at":"2026-01-30T14:13:14.495615-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:14.495615-06:00","labels":["conversation","core-feature","crm-integration","extraction","lfm","phase-2","phase-3","voice-ai"],"dependencies":[{"issue_id":"test-e3","depends_on_id":"test-e1","type":"blocks","created_at":"2026-01-30T14:15:08.073031-06:00","created_by":"David Habedank"},{"issue_id":"test-e3","depends_on_id":"test-e2","type":"blocks","created_at":"2026-01-30T14:15:08.240071-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t1","title":"Build extraction schema and confidence scoring system","description":"Define the TypeScript interfaces and Convex schema for extracted CRM data including temperature (hot/warm/cold), stage, summary, tasks, timeline, and next steps. Implement confidence scoring algorithm that flags low-confidence extractions for human review based on transcript clarity, contradiction detection, and extraction completeness.\n\n**Context:** This is the foundation for the 'magic' - turning conversations into structured data. Confidence scoring is critical because agents need to trust the system. Bad extractions that silently sync to CRM will destroy trust faster than no extractions at all.\n\n**Testing Requirements:**\n- **Unit Tests:** Confidence scoring algorithm with various transcript qualities, extraction type definitions, flag generation logic\n- **Integration Tests:** Full extraction pipeline from transcript to scored ExtractedData object","design":"Create ExtractedData type with fields: temperature (enum), stage (string), summary (string), tasks (array), timeline (date), nextSteps (array), confidenceScore (0-1), confidenceFlags (array of reasons). Scoring algorithm should weight: transcript length, speaker clarity, explicit vs inferred data, contradictions detected. Flag threshold around 0.7 for human review.","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:19.931327-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:19.931327-06:00","labels":["ai","audio","backend","data-model","infrastructure"],"dependencies":[{"issue_id":"test-e3t1","depends_on_id":"test-e3","type":"parent-child","created_at":"2026-01-30T14:13:20.064846-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t1s1","title":"Define TypeScript interfaces for ExtractedData types","description":"Create TypeScript interfaces for all extracted CRM data types including: ExtractedData with fields for temperature (enum: 'hot' | 'warm' | 'cold'), stage (string), summary (string), tasks (array of task objects), timeline (date), nextSteps (array of strings), confidenceScore (number 0-1), and confidenceFlags (array of ConfidenceFlag objects). Also define ConfidenceFlag type with reason string and severity level. Define Task type with title, dueDate, assignee, and priority fields.\n\n**Context:** These types are the contract between the AI extraction and the CRM sync. Well-defined types prevent bad data from reaching agents' CRMs and enable TypeScript to catch issues at compile time.\n\n**Testing Requirements:**\n- **Unit Tests:** Test type guards for temperature enum values, test confidenceScore range validation (0-1), test that ExtractedData objects with missing required fields fail type checks, test ConfidenceFlag array serialization","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:13:55.061753-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:55.061753-06:00","labels":["ai","backend","infrastructure","integration","ml-integration","types"],"dependencies":[{"issue_id":"test-e3t1s1","depends_on_id":"test-e3t1","type":"parent-child","created_at":"2026-01-30T14:13:55.260708-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t1s2","title":"Create Convex schema for extracted_data table","description":"Define Convex schema in convex/schema.ts for the extracted_data table that persists ExtractedData. Include fields: callId (reference to calls table), temperature (string with validator), stage, summary, tasks (array), timeline (optional number/timestamp), nextSteps (array), confidenceScore (float64), confidenceFlags (array of objects), extractedAt (number timestamp), reviewedAt (optional), reviewedBy (optional reference to users). Add index on callId and confidenceScore for querying low-confidence extractions.\n\n**Context:** The Convex schema enables persistence and querying of extracted data. The confidenceScore index is critical for the review queue - agents need to quickly find extractions that need human verification.\n\n**Testing Requirements:**\n- **Unit Tests:** Test schema validates temperature enum values, test confidenceScore accepts 0-1 range and rejects outside, test required fields throw on insert, test index queries return results ordered by confidenceScore","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:55.458625-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:55.458625-06:00","labels":["backend","convex","data-modeling","database","infrastructure","integration","websocket"],"dependencies":[{"issue_id":"test-e3t1s2","depends_on_id":"test-e3t1","type":"parent-child","created_at":"2026-01-30T14:13:55.581431-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t1s2","depends_on_id":"test-e3t1s1","type":"blocks","created_at":"2026-01-30T14:15:08.541671-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t1s3","title":"Implement confidence scoring algorithm","description":"Create calculateConfidenceScore function that takes transcript text and extracted data, returns score 0-1 with array of confidence flags. Scoring weights: transcript length (longer = more reliable, weight 0.2), speaker clarity/turn-taking (clear speaker labels, weight 0.2), explicit vs inferred data (explicit mentions score higher, weight 0.3), contradiction detection (conflicting statements reduce score, weight 0.3). Return ConfidenceFlag for each issue found (e.g., 'short_transcript', 'unclear_speakers', 'inferred_temperature', 'contradicting_timeline'). Flag threshold 0.7 for human review.\n\n**Context:** This is the trust mechanism. Agents will only adopt RealHerd if extractions are reliable. The scoring algorithm flags uncertain extractions for review rather than silently syncing bad data to their CRM.\n\n**Testing Requirements:**\n- **Unit Tests:** Test short transcript (\u003c100 words) returns score \u003c0.7 with 'short_transcript' flag, test clear explicit temperature mention scores higher than inferred, test contradicting dates (e.g., 'next week' then 'in a month') reduces score and adds flag, test perfect transcript (long, clear speakers, explicit data, no contradictions) returns \u003e0.9","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:55.796834-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:55.796834-06:00","labels":["algorithm","audio","backend","codec","integration","ml-prompting","performance"],"dependencies":[{"issue_id":"test-e3t1s3","depends_on_id":"test-e3t1s2","type":"blocks","created_at":"2026-01-30T12:09:32.274686-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t1s3","depends_on_id":"test-e3t1","type":"parent-child","created_at":"2026-01-30T14:13:55.943178-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t1s3","depends_on_id":"test-e3t1s1","type":"blocks","created_at":"2026-01-30T14:15:08.733396-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t1s4","title":"Create Convex mutations and queries for extraction workflow","description":"Implement Convex functions: saveExtraction mutation (takes callId and ExtractedData, calculates confidence score, saves to extracted_data table), getExtraction query (by callId), getPendingReviews query (returns extractions with confidenceScore \u003c 0.7 ordered by score ascending), markReviewed mutation (sets reviewedAt and reviewedBy). All mutations should validate data against schema before saving.\n\n**Context:** These Convex functions connect the extraction system to the database and enable the review queue UI. The getPendingReviews query powers the human review workflow that's essential for maintaining agent trust.\n\n**Testing Requirements:**\n- **Unit Tests:** Test saveExtraction persists all fields correctly, test saveExtraction auto-calculates confidence score, test getExtraction returns null for non-existent callId, test getPendingReviews only returns scores \u003c0.7, test getPendingReviews orders by score ascending (worst first), test markReviewed updates timestamps correctly","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:13:56.332648-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:56.332648-06:00","labels":["api","backend","convex","integration","performance","testing"],"dependencies":[{"issue_id":"test-e3t1s4","depends_on_id":"test-e3t1","type":"parent-child","created_at":"2026-01-30T14:13:56.624358-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t1s4","depends_on_id":"test-e3t1s2","type":"blocks","created_at":"2026-01-30T14:15:08.95695-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t1s4","depends_on_id":"test-e3t1s3","type":"blocks","created_at":"2026-01-30T14:15:09.118771-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t2","title":"Implement LLM-powered data extraction from transcripts","description":"Build the extraction pipeline that processes debrief transcripts through OpenRouter (GPT-4-turbo or Claude) to extract structured CRM data. Create prompts that reliably extract temperature, stage, summary, tasks with due dates, timeline, and next steps from natural conversation.\n\n**Context:** The extraction quality directly determines product value. Agents will judge the entire product by how well it 'understood' their debrief. Prompt engineering here is critical - need to handle the messy reality of how agents actually talk about leads.\n\n**Testing Requirements:**\n- **Unit Tests:** Prompt template generation, response parsing, error handling for malformed LLM responses\n- **Integration Tests:** End-to-end extraction with real transcript samples, accuracy validation against expected outputs","design":"Use OpenRouter for LLM access. Create extraction prompt that handles real estate terminology and agent speech patterns. Return structured JSON matching ExtractedData schema. Include few-shot examples of good extractions. Handle edge cases: multiple leads mentioned, unclear timelines, agent hedging.","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":480,"created_at":"2026-01-30T14:13:20.329784-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:20.329784-06:00","labels":["ai","backend","conversation","conversation-design","openrouter"],"dependencies":[{"issue_id":"test-e3t2","depends_on_id":"test-e3","type":"parent-child","created_at":"2026-01-30T14:13:20.453862-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t2","depends_on_id":"test-e3t1","type":"blocks","created_at":"2026-01-30T14:15:09.278715-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t2s1","title":"Create ExtractedData TypeScript schema and validation","description":"Define the TypeScript types and Zod validation schema for extracted CRM data. Include fields: temperature (hot/warm/cold), stage (from PRD stages: new-lead, attempting-contact, nurturing, active-buyer, under-contract, closed), summary (string), tasks (array with title, due_date, assignee), timeline (string), and next_steps (array of strings). Create validation that handles optional fields and edge cases.\n\n**Context:** This schema is the contract between LLM output and CRM sync. The extraction prompt will target this exact structure, and validation ensures we catch malformed responses before they hit FUB.\n\n**Testing Requirements:**\n- **Unit Tests:** Test valid ExtractedData objects pass validation, test missing required fields fail, test invalid temperature/stage values fail, test tasks array with various formats, test edge cases like empty arrays and null values","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:13:56.982609-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:56.982609-06:00","labels":["ai","auth","backend","convex","schema","types"],"dependencies":[{"issue_id":"test-e3t2s1","depends_on_id":"test-e3t2","type":"parent-child","created_at":"2026-01-30T14:13:57.134144-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t2s2","title":"Build OpenRouter API client with retry logic","description":"Create an OpenRouter client class that handles authentication, model selection (GPT-4-turbo or Claude), and robust error handling. Implement exponential backoff retry for rate limits (429) and transient errors (5xx). Configure timeout handling for slow responses. Use environment variable OPENROUTER_API_KEY for auth.\n\n**Context:** LLM calls are the critical path for extraction - reliability here prevents lost debriefs. OpenRouter gives us model flexibility to switch between GPT-4-turbo and Claude based on cost/quality tradeoffs.\n\n**Testing Requirements:**\n- **Unit Tests:** Test successful API call with mock response, test retry behavior on 429 status, test exponential backoff timing, test timeout handling, test authentication header format, test error parsing for various failure modes","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:57.331832-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:57.331832-06:00","labels":["ai","api","backend","core-logic","integration","prompts","ux"],"dependencies":[{"issue_id":"test-e3t2s2","depends_on_id":"test-e3t2s1","type":"blocks","created_at":"2026-01-30T12:51:24.95737-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t2s2","depends_on_id":"test-e3t2","type":"parent-child","created_at":"2026-01-30T14:13:57.549336-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t2s3","title":"Design and implement extraction prompt with few-shot examples","description":"Create the extraction prompt that transforms debrief transcripts into structured ExtractedData. Include: (1) System prompt explaining real estate context and CRM field meanings, (2) 3-4 few-shot examples showing real agent speech patterns and correct extractions, (3) Instructions for handling edge cases - multiple leads mentioned (extract primary only), unclear timelines ('sometime next week' → approximate date), agent hedging ('maybe interested' → warm temperature). Output format must be valid JSON matching ExtractedData schema.\n\n**Context:** This is the core product value - agents judge the whole product by extraction quality. The prompt must handle messy real estate terminology: 'tire kickers', 'ready to pull the trigger', 'FHA buyers', 'pre-qual vs pre-approval'. Few-shot examples teach the model what 'good' looks like.\n\n**Testing Requirements:**\n- **Unit Tests:** Test prompt produces valid JSON output, test extraction with sample transcripts containing real estate jargon, test handling of ambiguous temperature signals, test task extraction with various date formats ('next Tuesday', 'in two weeks', 'end of month'), test multi-lead transcript correctly identifies primary lead","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:57.892739-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:57.892739-06:00","labels":["ai","backend","core","monitoring","prompts","validation"],"dependencies":[{"issue_id":"test-e3t2s3","depends_on_id":"test-e3t2s2","type":"blocks","created_at":"2026-01-30T12:09:33.370575-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t2s3","depends_on_id":"test-e3t2","type":"parent-child","created_at":"2026-01-30T14:13:58.042646-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t2s3","depends_on_id":"test-e3t2s1","type":"blocks","created_at":"2026-01-30T14:15:09.483278-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t2s4","title":"Build extraction pipeline and integration tests","description":"Create the main extractFromTranscript(transcript: string): Promise\u003cExtractedData\u003e function that orchestrates the full pipeline: (1) Call OpenRouter with extraction prompt + transcript, (2) Parse JSON response, (3) Validate against Zod schema, (4) Handle and log extraction failures gracefully. Add integration tests with real OpenRouter calls (skippable in CI) and comprehensive mocked tests for the pipeline logic.\n\n**Context:** This is the public API that the debrief flow will call. Must be rock-solid since extraction failures mean lost agent data. Logging extraction quality will help iterate on prompts over time.\n\n**Testing Requirements:**\n- **Unit Tests:** Test full pipeline with mocked OpenRouter returning valid JSON, test pipeline handles malformed JSON gracefully, test pipeline validates extracted data against schema, test error logging for failed extractions, test retry integration when OpenRouter fails","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:13:58.238148-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:58.238148-06:00","labels":["api","backend","integration","monitoring","testing","validation"],"dependencies":[{"issue_id":"test-e3t2s4","depends_on_id":"test-e3t2","type":"parent-child","created_at":"2026-01-30T14:13:58.399865-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t2s4","depends_on_id":"test-e3t2s1","type":"blocks","created_at":"2026-01-30T14:15:09.677125-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t2s4","depends_on_id":"test-e3t2s2","type":"blocks","created_at":"2026-01-30T14:15:10.015513-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t2s4","depends_on_id":"test-e3t2s3","type":"blocks","created_at":"2026-01-30T14:15:10.485469-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t3","title":"Build Follow Up Boss API integration","description":"Implement FUB API client with authentication, connection testing, and core operations: lead lookup (by phone, email, name), note creation with formatted summaries, lead field updates (stage, temperature, custom fields), and task creation with due dates.\n\n**Context:** Follow Up Boss is the dominant CRM for real estate teams - this integration must be rock solid. Connection testing during setup prevents frustrating sync failures later. Lead matching is tricky because agents may have incomplete contact info.\n\n**Testing Requirements:**\n- **Unit Tests:** API client methods, error handling, retry logic, response parsing, lead matching priority logic\n- **Integration Tests:** Actual FUB API calls with test credentials, webhook handling, rate limit behavior","design":"Create FubClient class with methods: testConnection(), findLead(phone?, email?, name?), createNote(leadId, content), updateLead(leadId, fields), createTask(leadId, title, dueDate). Handle rate limiting, retry logic, and API errors gracefully. Store API key encrypted in organization settings.","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":480,"created_at":"2026-01-30T14:13:20.633272-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:20.633272-06:00","labels":["ai","api","audio","backend","integration","ux"],"dependencies":[{"issue_id":"test-e3t3","depends_on_id":"test-e3t1","type":"blocks","created_at":"2026-01-30T12:51:26.011716-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t3","depends_on_id":"test-e3t2","type":"blocks","created_at":"2026-01-30T12:51:26.256072-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t3","depends_on_id":"test-e3","type":"parent-child","created_at":"2026-01-30T14:13:20.788911-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t3s1","title":"Create FUB API client class with authentication","description":"Create FubClient class in lib/integrations/fub/client.ts with constructor accepting API key, base URL configuration, and testConnection() method that validates credentials against FUB API. Include proper TypeScript types for API responses. Store API key encrypted in organization settings using existing encryption patterns.\n\n**Context:** Follow Up Boss is the dominant CRM for real estate teams - connection testing during setup prevents frustrating sync failures later. The testConnection() method will be called during CRM setup wizard to validate credentials before saving.\n\n**Testing Requirements:**\n- **Unit Tests:** Test FubClient constructor with valid/invalid API keys, test testConnection() returns true for valid credentials (mock 200 response), test testConnection() returns false for invalid credentials (mock 401), test API key is properly passed in Authorization header","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:13:59.450884-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:59.450884-06:00","labels":["audio","backend","core-experience","frontend","integration","types","utilities"],"dependencies":[{"issue_id":"test-e3t3s1","depends_on_id":"test-e3t3","type":"parent-child","created_at":"2026-01-30T14:13:59.651845-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t3s2","title":"Implement lead lookup with flexible matching","description":"Add findLead(phone?, email?, name?) method to FubClient that searches FUB contacts using available criteria. Implement smart matching: try exact phone match first, then email, then fuzzy name search. Return best match with confidence score. Handle cases where agents have incomplete contact info by trying multiple search strategies.\n\n**Context:** Lead matching is tricky because agents may have incomplete contact info from voice calls - they might only have a first name or partial phone number. The flexible matching ensures we find the right lead even with limited data.\n\n**Testing Requirements:**\n- **Unit Tests:** Test findLead with phone only returns exact match, test findLead with email only, test findLead with name performs fuzzy search, test findLead tries multiple strategies when first fails, test returns null with low confidence when no good match, test handles special characters in phone numbers","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:13:59.862507-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:59.862507-06:00","labels":["algorithms","audio","backend","conversation-flow","frontend","integration","matching"],"dependencies":[{"issue_id":"test-e3t3s2","depends_on_id":"test-e3t3","type":"parent-child","created_at":"2026-01-30T14:14:00.086843-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t3s2","depends_on_id":"test-e3t3s1","type":"blocks","created_at":"2026-01-30T14:15:10.657975-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t3s3","title":"Implement note creation and lead updates","description":"Add createNote(leadId, content) method that posts formatted conversation summaries to FUB lead notes. Add updateLead(leadId, fields) method supporting stage changes, temperature updates, and custom field modifications. Format notes with clear structure: timestamp, call duration, key points extracted, action items.\n\n**Context:** This is where agents see real value - their CRM stays current without typing. Notes should be formatted professionally so they're scannable in the FUB interface. Custom fields allow brokerages to track their specific data points.\n\n**Testing Requirements:**\n- **Unit Tests:** Test createNote posts to correct endpoint with formatted content, test updateLead modifies stage field, test updateLead handles custom fields, test note formatting includes timestamp and structure, test partial updates only send changed fields","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:00.39153-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:00.39153-06:00","labels":["ai-prompting","api","audio","backend","business-logic","conversation-flow","fub","integration"],"dependencies":[{"issue_id":"test-e3t3s3","depends_on_id":"test-e3t3s2","type":"blocks","created_at":"2026-01-30T12:09:35.767844-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t3s3","depends_on_id":"test-e3t3","type":"parent-child","created_at":"2026-01-30T14:14:00.516954-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t3s3","depends_on_id":"test-e3t3s1","type":"blocks","created_at":"2026-01-30T14:15:10.821782-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t3s4","title":"Add task creation and error handling with retry logic","description":"Add createTask(leadId, title, dueDate) method for creating follow-up tasks in FUB. Implement comprehensive error handling across all FubClient methods: rate limiting (429) with exponential backoff, authentication errors (401) with clear messages, server errors (500) with retry logic, and network timeouts. Add request logging for debugging sync issues.\n\n**Context:** Task creation closes the loop on AI-extracted action items - when the AI identifies 'call back Tuesday', it can create the actual task. Robust error handling is critical because sync failures frustrate users and erode trust in the product.\n\n**Testing Requirements:**\n- **Unit Tests:** Test createTask creates task with correct due date format, test 429 response triggers exponential backoff retry, test 401 response throws AuthenticationError with clear message, test 500 response retries up to 3 times, test network timeout is handled gracefully, test all errors are logged with request context","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:00.70851-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:00.70851-06:00","labels":["ai-prompting","api","backend","edge-cases","frontend","integration","logging","workflow"],"dependencies":[{"issue_id":"test-e3t3s4","depends_on_id":"test-e3t3","type":"parent-child","created_at":"2026-01-30T14:14:00.853448-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t3s4","depends_on_id":"test-e3t3s1","type":"blocks","created_at":"2026-01-30T14:15:11.027885-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t3s4","depends_on_id":"test-e3t3s2","type":"blocks","created_at":"2026-01-30T14:15:11.225311-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t3s4","depends_on_id":"test-e3t3s3","type":"blocks","created_at":"2026-01-30T14:15:11.393383-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t3s5","title":"Integrate and test full interruption handling flow","description":"Wire together VAD, silence detection, wrap-up triggers, and edge case handlers into cohesive conversation controller. Ensure state transitions are clean and predictable. Add logging/telemetry for interruption events (frequency, timing, which phrases trigger wrap-up). Test complete conversation flows with various interruption patterns. Verify no audio overlap or echo issues when interrupting. Document the conversation state machine and configuration options.\n\n**Context:** Individual features must work together seamlessly - a choppy experience from poorly integrated systems would undermine the 'magic' of natural conversation.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:07:51.240794-06:00","created_by":"David Habedank","updated_at":"2026-01-30T12:31:27.913346-06:00","labels":["documentation","integration","testing"],"dependencies":[{"issue_id":"test-e3t3s5","depends_on_id":"test-e3t3","type":"parent-child","created_at":"2026-01-30T12:07:51.531133-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t3s5","depends_on_id":"test-e3t3s1","type":"blocks","created_at":"2026-01-30T12:09:36.80868-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t3s5","depends_on_id":"test-e3t3s2","type":"blocks","created_at":"2026-01-30T12:09:37.056229-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t3s5","depends_on_id":"test-e3t3s3","type":"blocks","created_at":"2026-01-30T12:09:37.308001-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t3s5","depends_on_id":"test-e3t3s4","type":"blocks","created_at":"2026-01-30T12:09:37.531826-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T12:31:27.913346-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e3t4","title":"Create FUB configuration UI and connection testing","description":"Build organization settings page for Follow Up Boss integration: API key input with secure storage, connection test button with real-time feedback, field mapping configuration for custom fields, and sync preferences (auto-sync vs manual review).\n\n**Context:** Brokerage owners need confidence their CRM connection works before trusting the system with their data. The setup experience should feel professional and reassuring - this is where they're handing over CRM access.\n\n**Testing Requirements:**\n- **Unit Tests:** Form validation, API key masking, settings persistence\n- **Integration Tests:** Full connection test flow, settings save/load, error state handling","design":"Settings page at /settings/integrations/fub. Secure API key input (masked after save). Test Connection button that validates credentials and shows FUB account name on success. Field mapping UI for custom temperature/stage fields. Toggle for auto-sync vs review-first mode.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:20.975294-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:20.975294-06:00","labels":["ai","backend","convex","data","database","frontend","settings","ui"],"dependencies":[{"issue_id":"test-e3t4","depends_on_id":"test-e3t1","type":"blocks","created_at":"2026-01-30T12:51:27.341945-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t4","depends_on_id":"test-e3t2","type":"blocks","created_at":"2026-01-30T12:51:27.565073-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t4","depends_on_id":"test-e3","type":"parent-child","created_at":"2026-01-30T14:13:21.410411-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t4","depends_on_id":"test-e3t3","type":"blocks","created_at":"2026-01-30T14:15:11.589585-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t4s1","title":"Create FUB settings page route and layout","description":"Set up the /settings/integrations/fub page route with the standard settings layout. Create the page component with proper heading ('Follow Up Boss Integration'), warm cream background (#FAF7F2), and card-based sections using the RealHerd design system (white cards with 1px #E8DFD4 border, 12px radius). Include breadcrumb navigation back to main settings.\n\n**Context:** This is where brokerage owners hand over CRM access - the page needs to feel professional and reassuring. First impressions matter for trust.\n\n**Testing Requirements:**\n- **Unit Tests:** Test page renders at correct route, test breadcrumb navigation works, test layout matches design system specs (card styling, colors)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:01.05428-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:01.05428-06:00","labels":["backend","database","frontend","infrastructure","integration","schema","ui"],"dependencies":[{"issue_id":"test-e3t4s1","depends_on_id":"test-e3t4","type":"parent-child","created_at":"2026-01-30T14:14:01.2119-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t4s2","title":"Build secure API key input with masked display","description":"Create API key input component with: password-type input field using RealHerd input styling (#FDFCFA background, #E8DFD4 border, terracotta focus ring), 'Save' primary button (#C4704D). After save, display masked value (show only last 4 characters like '••••••••abcd') with 'Edit' button to re-enter. Store API key securely server-side (never expose full key to client after initial save).\n\n**Context:** API keys are sensitive credentials. The masked display pattern reassures users their key is protected while confirming it's stored.\n\n**Testing Requirements:**\n- **Unit Tests:** Test input renders as password type, test save button calls API endpoint, test masked display shows only last 4 chars, test edit mode clears and allows re-entry, test full key never returned from API after save","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:01.392302-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:01.392302-06:00","labels":["api-integration","audio","backend","data","frontend","processing","real-time","security"],"dependencies":[{"issue_id":"test-e3t4s2","depends_on_id":"test-e3t4","type":"parent-child","created_at":"2026-01-30T14:14:01.536412-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t4s2","depends_on_id":"test-e3t4s1","type":"blocks","created_at":"2026-01-30T14:15:11.788419-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t4s3","title":"Implement connection test with real-time feedback","description":"Add 'Test Connection' secondary button (white with #E8DFD4 border) that: shows loading state during test, calls backend to validate FUB credentials, on success shows green success state (#5B8A5B) with FUB account name and connected user, on failure shows error coral (#C45D4D) with specific error message (invalid key, network error, etc.). Use the Soft Sage (#A8B5A0) for positive indicators.\n\n**Context:** Brokerage owners need confidence their connection works before trusting the system. Showing the actual FUB account name proves we connected to the right account.\n\n**Testing Requirements:**\n- **Unit Tests:** Test loading state displays during API call, test success state shows account name, test various error states (401 invalid key, network timeout, rate limited), test button disabled while testing","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:01.739306-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:01.739306-06:00","labels":["ai","api","backend","convex","crm","frontend","monitoring"],"dependencies":[{"issue_id":"test-e3t4s3","depends_on_id":"test-e3t4s1","type":"blocks","created_at":"2026-01-30T12:09:38.149787-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t4s3","depends_on_id":"test-e3t4","type":"parent-child","created_at":"2026-01-30T14:14:02.972642-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t4s3","depends_on_id":"test-e3t4s2","type":"blocks","created_at":"2026-01-30T14:15:12.19404-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t4s4","title":"Create field mapping configuration UI","description":"Build field mapping section for custom FUB fields: dropdown selectors for 'Temperature Field' and 'Stage Field' that fetch available custom fields from FUB API, option to create new custom fields if none exist, preview of how RealHerd values (hot/warm/cold, nurturing/active/closing) map to FUB field values. Use select inputs with RealHerd styling.\n\n**Context:** Brokerages have different custom field setups in FUB. Flexible mapping lets RealHerd work with their existing workflow rather than forcing changes.\n\n**Testing Requirements:**\n- **Unit Tests:** Test dropdown fetches custom fields from API, test field selection persists on save, test 'create new field' option works, test mapping preview displays correctly","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:04.254911-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:04.254911-06:00","labels":["api","backend","e2e","frontend","integration","reliability","testing","ui"],"dependencies":[{"issue_id":"test-e3t4s4","depends_on_id":"test-e3t4s2","type":"blocks","created_at":"2026-01-30T12:09:38.340205-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t4s4","depends_on_id":"test-e3t4s1","type":"blocks","created_at":"2026-01-30T12:51:28.222838-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t4s4","depends_on_id":"test-e3t4","type":"parent-child","created_at":"2026-01-30T14:14:04.5792-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t4s4","depends_on_id":"test-e3t4s3","type":"blocks","created_at":"2026-01-30T14:15:12.366724-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t4s5","title":"Add sync preferences toggle and save all settings","description":"Add sync mode toggle with two options: 'Auto-sync' (changes push to FUB immediately) and 'Review first' (changes queue for manual approval). Use toggle/radio with clear descriptions of each mode. Implement 'Save Settings' primary button that persists all configuration (API key, field mappings, sync mode) with success toast notification. Include Shep illustration in empty/initial state to soften the setup experience.\n\n**Context:** Review-first mode builds trust for cautious users who want to verify before data changes. Auto-sync is for confident users who want efficiency.\n\n**Testing Requirements:**\n- **Unit Tests:** Test toggle switches between modes, test save persists all settings to backend, test success toast appears on save, test settings reload correctly on page refresh, test Shep shows in empty state","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:04.984672-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:04.984672-06:00","labels":["frontend","ui"],"dependencies":[{"issue_id":"test-e3t4s5","depends_on_id":"test-e3t4","type":"parent-child","created_at":"2026-01-30T14:14:05.161388-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t4s5","depends_on_id":"test-e3t4s4","type":"blocks","created_at":"2026-01-30T14:15:12.544475-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t5","title":"Implement sync orchestration and status tracking","description":"Build the sync pipeline that coordinates extraction results with FUB operations: lead matching, note creation, field updates, and task creation. Implement sync status tracking (pending, syncing, synced, failed) with detailed logging of all CRM operations.\n\n**Context:** This is where extraction becomes action. The sync status gives agents and managers visibility into what's happening - essential for building trust. Detailed logs are critical for debugging when syncs fail and for audit trails.\n\n**Testing Requirements:**\n- **Unit Tests:** Status state machine transitions, operation sequencing, error recovery logic, retry handling\n- **Integration Tests:** Full sync flow from extraction to FUB updates, failure scenarios, partial sync recovery","design":"Create SyncJob table tracking: extractedDataId, status, startedAt, completedAt, operations (array of what was synced), errors. Orchestrator function processes extraction, matches lead, performs FUB operations in sequence, updates status at each step. Failed operations should be retryable.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":420,"created_at":"2026-01-30T14:13:21.697375-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:21.697375-06:00","labels":["backend","dashboard","frontend","integration","pipeline","ui"],"dependencies":[{"issue_id":"test-e3t5","depends_on_id":"test-e3t4","type":"blocks","created_at":"2026-01-30T12:51:28.767694-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t5","depends_on_id":"test-e3","type":"parent-child","created_at":"2026-01-30T14:13:21.839971-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t5","depends_on_id":"test-e3t2","type":"blocks","created_at":"2026-01-30T14:15:12.706826-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t5","depends_on_id":"test-e3t3","type":"blocks","created_at":"2026-01-30T14:15:12.889043-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t5s1","title":"Create SyncJob database schema and Prisma model","description":"Add SyncJob table to Prisma schema with fields: id, extractedDataId (foreign key to ExtractedData), status (enum: pending, syncing, synced, failed), startedAt, completedAt, operations (JSON array tracking what was synced), errors (JSON array for error details), retryCount, lastRetryAt. Include proper indexes on status and extractedDataId for query performance.\n\n**Context:** The SyncJob table is the foundation for tracking sync operations. The operations array provides an audit trail of exactly what happened (lead matched, note created, fields updated, task created). The errors array enables debugging and retry logic.\n\n**Testing Requirements:**\n- **Unit Tests:** Test SyncJob creation with all fields, test status enum validation, test relationship to ExtractedData, verify indexes exist on status and extractedDataId columns","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":30,"created_at":"2026-01-30T14:14:05.57049-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:05.57049-06:00","labels":["api","backend","database","frontend","schema","types"],"dependencies":[{"issue_id":"test-e3t5s1","depends_on_id":"test-e3t5","type":"parent-child","created_at":"2026-01-30T14:14:05.923545-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t5s2","title":"Implement sync orchestrator core logic","description":"Create SyncOrchestrator class that processes ExtractedData records: 1) Create SyncJob with 'pending' status, 2) Match/create lead in FUB using phone/email, 3) Create note with conversation summary, 4) Update contact fields (timeline, interests, preferences), 5) Create follow-up task if needed. Update SyncJob status to 'syncing' when starting, track each operation in the operations array, set 'synced' on success or 'failed' on error.\n\n**Context:** This is where extraction becomes CRM action - the 'magic' that keeps agent CRMs current without manual data entry. Sequential operations with status tracking at each step provides visibility and debuggability.\n\n**Testing Requirements:**\n- **Unit Tests:** Test orchestrator with mock FUB client - verify correct sequence of operations, test status transitions (pending→syncing→synced), test operations array populated correctly, test partial failure handling (some operations succeed, some fail)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:06.366579-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:06.366579-06:00","labels":["backend","component","frontend","reliability","ui"],"dependencies":[{"issue_id":"test-e3t5s2","depends_on_id":"test-e3t5","type":"parent-child","created_at":"2026-01-30T14:14:06.533876-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t5s2","depends_on_id":"test-e3t5s1","type":"blocks","created_at":"2026-01-30T14:15:13.062518-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t5s3","title":"Add error handling and retry logic","description":"Implement robust error handling in SyncOrchestrator: catch FUB API errors (401, 429, 500), log detailed error info to SyncJob.errors array, implement exponential backoff retry logic (max 3 retries), create retryFailedSync() function that re-processes failed SyncJobs. Handle partial failures gracefully - if note creation succeeds but task creation fails, don't retry the note.\n\n**Context:** Syncs will fail - API rate limits, network issues, invalid data. Retryable failures with detailed logging are critical for debugging and ensuring data eventually syncs. Partial failure handling prevents duplicate operations.\n\n**Testing Requirements:**\n- **Unit Tests:** Test retry logic with mock failures, verify exponential backoff timing, test partial failure doesn't retry successful operations, test error details captured in errors array, test max retry limit respected","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:06.774293-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:06.774293-06:00","labels":["backend","component","convex","frontend","realtime","ui"],"dependencies":[{"issue_id":"test-e3t5s3","depends_on_id":"test-e3t5s1","type":"blocks","created_at":"2026-01-30T12:09:39.211182-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t5s3","depends_on_id":"test-e3t5","type":"parent-child","created_at":"2026-01-30T14:14:06.946003-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t5s3","depends_on_id":"test-e3t5s2","type":"blocks","created_at":"2026-01-30T14:15:13.253727-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t5s4","title":"Create sync status API endpoints and verification","description":"Build API endpoints: GET /api/sync/status/:extractedDataId (get sync status for extraction), GET /api/sync/jobs (list recent sync jobs with filtering by status), POST /api/sync/retry/:syncJobId (manually retry failed sync). Run full integration test: create mock extraction → trigger sync → verify SyncJob created → verify FUB operations logged → verify final status.\n\n**Context:** These endpoints give agents and managers visibility into sync operations - essential for building trust in the system. The retry endpoint enables manual intervention when automated retries fail.\n\n**Testing Requirements:**\n- **Unit Tests:** Test each endpoint with valid/invalid inputs, test status filtering, test retry endpoint only works on failed jobs, integration test full sync flow end-to-end with test database","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:07.20341-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:07.20341-06:00","labels":["api","backend","frontend","integration","security","testing"],"dependencies":[{"issue_id":"test-e3t5s4","depends_on_id":"test-e3t5s1","type":"blocks","created_at":"2026-01-30T12:09:39.588001-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t5s4","depends_on_id":"test-e3t5","type":"parent-child","created_at":"2026-01-30T14:14:07.424653-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t5s4","depends_on_id":"test-e3t5s3","type":"blocks","created_at":"2026-01-30T14:15:13.413967-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t5s5","title":"Integrate transcript view into dashboard and verify end-to-end flow","description":"Wire the transcript display into the main dashboard with navigation from call history to transcript detail view. Add loading states, error boundaries, and empty states (no transcript available). Test the complete flow: select a call from history → view transcript with audio → search, seek, and playback at different speeds → verify privacy controls work correctly.\n\n**Context:** The transcript review must be easily accessible from where agents naturally work. A smooth flow from call list to detailed review encourages agents to verify their debriefs, improving data quality.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:07:55.837801-06:00","created_by":"David Habedank","updated_at":"2026-01-30T12:31:26.536553-06:00","labels":["frontend","integration"],"dependencies":[{"issue_id":"test-e3t5s5","depends_on_id":"test-e3t5","type":"parent-child","created_at":"2026-01-30T12:07:56.318915-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t5s5","depends_on_id":"test-e3t5s2","type":"blocks","created_at":"2026-01-30T12:09:39.768096-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t5s5","depends_on_id":"test-e3t5s3","type":"blocks","created_at":"2026-01-30T12:09:39.96694-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t5s5","depends_on_id":"test-e3t5s4","type":"blocks","created_at":"2026-01-30T12:09:40.179334-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T12:31:26.536553-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e3t6","title":"Build sync status dashboard and CRM logs viewer","description":"Create dashboard components showing sync status for recent debriefs: pending extractions awaiting review, active syncs in progress, successful syncs with summary of what updated, and failed syncs with error details and retry option. Include CRM sync logs viewer for detailed operation history.\n\n**Context:** Agents and managers need to see that the system is working. The dashboard transforms invisible backend operations into visible trust signals. The logs viewer is essential for debugging and gives power users the transparency they need.\n\n**Testing Requirements:**\n- **Unit Tests:** Status aggregation logic, log filtering, retry action handling\n- **Integration Tests:** Real-time status updates as syncs progress, log pagination, filter combinations","design":"Dashboard widget showing sync pipeline status with counts per state. Expandable rows showing extraction summary and FUB operations performed. Failed items show error message and Retry button. Logs page with filterable list of all CRM operations: timestamp, type, lead, result, details.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:22.089379-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:22.089379-06:00","labels":["dashboard","frontend","integration","performance","qa","testing","ui"],"dependencies":[{"issue_id":"test-e3t6","depends_on_id":"test-e3t1","type":"blocks","created_at":"2026-01-30T12:51:29.600955-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t6","depends_on_id":"test-e3t2","type":"blocks","created_at":"2026-01-30T12:51:29.820912-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t6","depends_on_id":"test-e3t3","type":"blocks","created_at":"2026-01-30T12:51:30.032378-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t6","depends_on_id":"test-e3","type":"parent-child","created_at":"2026-01-30T14:13:22.235995-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t6","depends_on_id":"test-e3t5","type":"blocks","created_at":"2026-01-30T14:15:13.57046-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t6","depends_on_id":"test-e3t4","type":"blocks","created_at":"2026-01-30T14:15:13.748985-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t6s1","title":"Create sync status types and mock data","description":"Define TypeScript interfaces for sync status states: SyncStatus enum (pending, in_progress, success, failed), SyncItem type with id, leadName, status, extractionSummary, fubOperations array, errorMessage, createdAt, completedAt. Create mock data with examples of each status state for development.\n\n**Context:** Type definitions establish the contract between backend and UI. Mock data enables parallel frontend development and provides test fixtures.\n\n**Testing Requirements:**\n- **Unit Tests:** Test type exports are accessible, mock data matches interface shapes, each status state has at least one example in mock data","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":30,"created_at":"2026-01-30T14:14:08.478838-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:08.478838-06:00","labels":["backend","demo","frontend","infrastructure","testing","types","voice"],"dependencies":[{"issue_id":"test-e3t6s1","depends_on_id":"test-e3t6","type":"parent-child","created_at":"2026-01-30T14:14:08.646427-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t6s2","title":"Build SyncStatusDashboard widget component","description":"Create dashboard widget showing sync pipeline status with: status counts by state (pending/in_progress/success/failed), expandable SyncItem rows showing extraction summary and FUB operations performed, failed items display error message with Retry button. Use Warm Cream background, card styling per brand guide. Include empty state with Shep mascot when no recent syncs.\n\n**Context:** This is the primary trust signal - agents see at a glance that the system is working. The expandable rows give power users detail without overwhelming casual viewers.\n\n**Testing Requirements:**\n- **Unit Tests:** Test renders correct counts per status, test expansion toggle shows/hides details, test Retry button calls onRetry callback with correct id, test empty state renders Shep component, test failed items show error message","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:08.950992-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:08.950992-06:00","labels":["backend","component","frontend","performance","testing","voice","voice-ai"],"dependencies":[{"issue_id":"test-e3t6s2","depends_on_id":"test-e3t6","type":"parent-child","created_at":"2026-01-30T14:14:09.098311-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t6s2","depends_on_id":"test-e3t6s1","type":"blocks","created_at":"2026-01-30T14:15:13.985685-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t6s3","title":"Build CRM sync logs viewer page","description":"Create logs page component with filterable list of all CRM operations. Each log entry shows: timestamp (formatted relative like '2 min ago'), operation type (create_note, update_field, add_tag), lead name with link, result (success/failed), expandable details section. Include filters for: date range, operation type, result status, lead search. Use pagination or infinite scroll for large log sets.\n\n**Context:** The logs viewer is essential for debugging and gives power users transparency. When something seems wrong, this is where they come to understand what happened.\n\n**Testing Requirements:**\n- **Unit Tests:** Test log entries render all required fields, test filters update displayed results, test date range filter works correctly, test operation type filter shows only matching entries, test lead search filters by name, test pagination/load more functionality, test empty filtered results show appropriate message","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":120,"created_at":"2026-01-30T14:14:09.294537-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:09.294537-06:00","labels":["backend","component","edge-cases","frontend","integration","reporting","testing","voice","voice-ai"],"dependencies":[{"issue_id":"test-e3t6s3","depends_on_id":"test-e3t6s2","type":"blocks","created_at":"2026-01-30T12:51:30.954687-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t6s3","depends_on_id":"test-e3t6","type":"parent-child","created_at":"2026-01-30T14:14:09.447786-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t6s3","depends_on_id":"test-e3t6s1","type":"blocks","created_at":"2026-01-30T14:15:14.156788-06:00","created_by":"David Habedank"}]}
{"id":"test-e3t6s4","title":"Wire dashboard and logs to real data with API hooks","description":"Create React Query hooks: useSyncStatus() for dashboard data with polling/refetch interval, useCrmLogs(filters) for paginated log queries, useRetrySync(id) mutation. Connect SyncStatusDashboard and CrmLogsViewer to real API endpoints. Add loading states, error handling with toast notifications, and optimistic updates for retry action.\n\n**Context:** Real data integration transforms static components into live operational tools. Polling ensures agents see current status without manual refresh.\n\n**Testing Requirements:**\n- **Unit Tests:** Test useSyncStatus returns loading/data/error states correctly, test useCrmLogs handles filter parameters, test useRetrySync mutation calls correct endpoint, test polling interval triggers refetch, test error states display toast notification, mock API responses for all hooks","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:09.636443-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:09.636443-06:00","labels":["api","database","demo","documentation","frontend","testing","voice"],"dependencies":[{"issue_id":"test-e3t6s4","depends_on_id":"test-e3t6","type":"parent-child","created_at":"2026-01-30T14:14:09.850409-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t6s4","depends_on_id":"test-e3t6s2","type":"blocks","created_at":"2026-01-30T14:15:14.327613-06:00","created_by":"David Habedank"},{"issue_id":"test-e3t6s4","depends_on_id":"test-e3t6s3","type":"blocks","created_at":"2026-01-30T14:15:14.489905-06:00","created_by":"David Habedank"}]}
{"id":"test-e4","title":"Call Triggering \u0026 Calendar Integration","description":"Implement multiple call trigger methods: SMS keyword trigger, dashboard button, and automatic calendar-based calls after appointments. Include retry logic and SMS fallback for missed calls.\n\n**Context:** Getting agents to actually use the system requires meeting them where they are. Calendar auto-calls are the ideal (zero effort), with manual triggers as backup.\n\n**Testing Requirements:**\n- **Unit Tests:** SMS parsing, calendar event detection, retry scheduling logic, delay calculations\n- **Integration Tests:** Telnyx SMS webhooks, Google Calendar OAuth flow, FUB calendar sync, retry job scheduling\n- **Type Tests:** ScheduledDebrief types, calendar event types, retry configuration types\n- **E2E Tests:** Manual SMS trigger flow, calendar appointment → auto-call → retry → SMS fallback complete flow","acceptance_criteria":"- SMS inbound handling - 'DEBRIEF' keyword triggers immediate callback\n- Dashboard 'Call Me Now' button initiates call within 30 seconds\n- Lead/property context can be selected before triggering call\n- Calendar integration works with Google Calendar and FUB Calendar\n- Appointment end detection triggers auto-call after configurable delay\n- Retry logic attempts up to 3 calls with configurable intervals\n- SMS fallback sent after all call attempts fail\n- Call attempt tracking shows retry history\n- Agent can opt out of auto-calls in preferences\n- SMS confirmation sent after successful debrief","status":"open","priority":1,"issue_type":"epic","owner":"david@habedank.org","estimated_minutes":4800,"created_at":"2026-01-30T14:13:14.655776-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:14.655776-06:00","labels":["ai","calendar","core-feature","crm","data-processing","extraction","follow-up-boss","phase-4","sms","triggers"],"dependencies":[{"issue_id":"test-e4","depends_on_id":"test-e1","type":"blocks","created_at":"2026-01-30T14:15:14.655001-06:00","created_by":"David Habedank"},{"issue_id":"test-e4","depends_on_id":"test-e2","type":"blocks","created_at":"2026-01-30T14:15:15.042227-06:00","created_by":"David Habedank"},{"issue_id":"test-e4","depends_on_id":"test-e3","type":"blocks","created_at":"2026-01-30T14:15:15.247881-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t1","title":"Implement SMS inbound handling for DEBRIEF keyword trigger","description":"Build the Telnyx SMS webhook handler to receive inbound messages, detect the 'DEBRIEF' keyword (case-insensitive), and trigger an immediate callback to the agent. Include validation that the sender is a registered agent.\n\n**Context:** SMS keyword triggering is the simplest entry point for agents - no app needed, just text 'DEBRIEF' and get called back. This zero-friction approach is critical for adoption by busy agents who won't remember to open dashboards.\n\n**Testing Requirements:**\n- **Unit Tests:** Keyword detection logic (case variations, whitespace handling), agent phone number lookup, webhook payload parsing, invalid sender handling\n- **Integration Tests:** End-to-end SMS receive → call trigger flow with Telnyx test numbers, webhook signature verification","design":"Create Convex HTTP action for Telnyx SMS webhook. Parse inbound message for keyword matching. Look up agent by phone number. Queue immediate call via existing call infrastructure. Send confirmation SMS that call is being initiated.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":240,"created_at":"2026-01-30T14:13:22.431432-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:22.431432-06:00","labels":["ai","backend","database","extraction","schema","sms","telnyx"],"dependencies":[{"issue_id":"test-e4t1","depends_on_id":"test-e4","type":"parent-child","created_at":"2026-01-30T14:13:22.562107-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t1s1","title":"Create Telnyx SMS webhook HTTP action with message parsing","description":"Create a Convex HTTP action at /api/telnyx/sms that receives Telnyx webhook payloads. Parse the inbound SMS to extract: sender phone number (from field), message body (text field), and message ID. Implement case-insensitive keyword detection for 'DEBRIEF' (trim whitespace, handle 'debrief', 'DEBRIEF', 'Debrief', etc.). Return 200 OK immediately to Telnyx to prevent retries.\n\n**Context:** Telnyx sends webhooks for inbound SMS. We need to receive these reliably and detect the trigger keyword. Fast acknowledgment prevents duplicate processing from webhook retries.\n\n**Testing Requirements:**\n- **Unit Tests:** Test keyword detection: 'DEBRIEF', 'debrief', ' DEBRIEF ', 'Debrief now', 'other text' (no match). Test payload parsing with sample Telnyx webhook JSON. Test 200 response for valid payloads, appropriate error handling for malformed requests.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:10.059047-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:10.059047-06:00","labels":["api","backend","integration","schema","types"],"dependencies":[{"issue_id":"test-e4t1s1","depends_on_id":"test-e4t1","type":"parent-child","created_at":"2026-01-30T14:14:10.280647-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t1s2","title":"Implement agent lookup by phone number with validation","description":"Create a query function to look up agents by their phone number in the agents table. Normalize phone numbers for matching (handle +1, parentheses, dashes, spaces). Return agent record if found and active, null if not registered. Include the agent's brokerage context for the callback. Handle edge case where phone matches multiple agents (log warning, use most recently active).\n\n**Context:** Only registered agents should be able to trigger callbacks via SMS. Phone number is the identifier since that's all we get from inbound SMS. Normalization is critical since phone formats vary.\n\n**Testing Requirements:**\n- **Unit Tests:** Test phone normalization: '+1 (555) 123-4567' matches '5551234567'. Test registered agent returns record. Test unregistered number returns null. Test inactive agent returns null. Test multiple matches uses most recent.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:10.48489-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:10.48489-06:00","labels":["ai","backend","convex","database","mutations","prompts","schema"],"dependencies":[{"issue_id":"test-e4t1s2","depends_on_id":"test-e4t1","type":"parent-child","created_at":"2026-01-30T14:14:10.601386-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t1s2","depends_on_id":"test-e4t1s1","type":"blocks","created_at":"2026-01-30T14:15:15.467604-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t1s3","title":"Queue immediate callback and send SMS confirmation","description":"When DEBRIEF keyword detected from registered agent: 1) Queue an immediate call using the existing call infrastructure (set priority high, scheduled_for now), 2) Send confirmation SMS back to agent: 'Got it! Calling you now for your debrief.' Use Telnyx SMS API to send the confirmation. Handle failure cases: if call queue fails, send SMS 'Sorry, couldn't initiate your call. Please try again or contact support.'\n\n**Context:** The zero-friction promise requires immediate response. Confirmation SMS sets expectations and confirms the system is working. Error handling prevents silent failures that erode trust.\n\n**Testing Requirements:**\n- **Unit Tests:** Test call queued with correct agent ID and immediate timestamp. Test confirmation SMS sent with correct content to correct number. Test error SMS sent when call queue fails. Test Telnyx API called with proper credentials and payload format.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:10.794267-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:10.794267-06:00","labels":["ai","api","backend","convex","integration","security","settings"],"dependencies":[{"issue_id":"test-e4t1s3","depends_on_id":"test-e4t1s1","type":"blocks","created_at":"2026-01-30T12:09:42.405153-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t1s3","depends_on_id":"test-e4t1","type":"parent-child","created_at":"2026-01-30T14:14:10.950948-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t1s3","depends_on_id":"test-e4t1s2","type":"blocks","created_at":"2026-01-30T14:15:15.641315-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t1s4","title":"Add Telnyx webhook signature verification and end-to-end testing","description":"Implement Telnyx webhook signature verification to ensure requests are authentic (check X-Telnyx-Signature header against payload using webhook secret). Add rate limiting per phone number (max 3 DEBRIEF requests per hour to prevent abuse). Test full flow: send test SMS to Telnyx number, verify webhook received, agent looked up, call queued, confirmation SMS sent.\n\n**Context:** Security is critical for a webhook endpoint exposed to the internet. Rate limiting prevents accidental or malicious spam triggering excessive calls. E2E test validates the complete user journey.\n\n**Testing Requirements:**\n- **Unit Tests:** Test signature verification passes with valid signature, rejects invalid. Test rate limiting blocks 4th request within hour, allows after hour passes. E2E: Send actual SMS, verify call appears in queue, verify confirmation SMS received.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:11.14321-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:11.14321-06:00","labels":["backend","convex","integration","security","testing","verification"],"dependencies":[{"issue_id":"test-e4t1s4","depends_on_id":"test-e4t1","type":"parent-child","created_at":"2026-01-30T14:14:11.300471-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t1s4","depends_on_id":"test-e4t1s3","type":"blocks","created_at":"2026-01-30T14:15:15.812517-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t2","title":"Build dashboard 'Call Me Now' button with lead/property context selection","description":"Add a prominent 'Call Me Now' button to the agent dashboard that initiates an immediate callback. Include optional dropdown/modal to select a specific lead or property to discuss during the call. Call must initiate within 30 seconds of button press.\n\n**Context:** When agents have a moment between appointments, they should be able to trigger a debrief instantly from the dashboard. Context selection ensures the AI knows what to ask about, making the call more productive and relevant.\n\n**Testing Requirements:**\n- **Unit Tests:** Button state management, context selection form validation, call request mutation, loading/error states\n- **Integration Tests:** Full flow from button click to call initiation, verify call arrives within 30 seconds, context passed correctly to call system","design":"Add CTA button to dashboard header or hero area. On click, show quick modal with optional lead/property selector (search from FUB data). Call Convex mutation to queue immediate call with selected context. Show real-time status (queued → calling → connected). Use optimistic UI for responsiveness.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:22.7582-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:22.7582-06:00","labels":["ai","api","backend","calling","dashboard","frontend","integration","llm"],"dependencies":[{"issue_id":"test-e4t2","depends_on_id":"test-e4","type":"parent-child","created_at":"2026-01-30T14:13:22.90242-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t2","depends_on_id":"test-e4t1","type":"blocks","created_at":"2026-01-30T14:15:15.986653-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t2s1","title":"Create CallMeNow button component with loading states","description":"Build the primary 'Call Me Now' CTA button component following RealHerd brand guidelines. Use Terracotta (#C4704D) as primary color with 8px border radius. Implement button states: default, hover (Rust #9E5A3C), loading (with spinner), disabled. Include subtle box-shadow per brand specs. Component should accept onClick handler and loading/disabled props.\n\n**Context:** This is the main entry point for instant callbacks - needs to be prominent and inviting while matching the warm, professional brand identity. Per PRD: 'Primary Button - background: #C4704D, border-radius: 8px, box-shadow: 0 2px 8px rgba(61, 48, 41, 0.1)'\n\n**Testing Requirements:**\n- **Unit Tests:** Test button renders with correct Terracotta background color, test hover state applies Rust color, test loading state shows spinner and disables clicks, test disabled state styling and click prevention, test onClick fires when enabled","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:11.478822-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:11.478822-06:00","labels":["backend","convex","database","frontend","security","types","ui"],"dependencies":[{"issue_id":"test-e4t2s1","depends_on_id":"test-e4t2","type":"parent-child","created_at":"2026-01-30T14:14:11.624745-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t2s2","title":"Build lead/property context selection modal with FUB search","description":"Create a modal that appears on 'Call Me Now' click with optional lead/property selector. Include search input (brand-styled with Warm Cream background, Terracotta focus ring) that queries FUB contacts/properties. Show recent leads as quick-select options. Modal should have 12px border radius per card specs. Allow proceeding without selection (general debrief). Include 'Skip - General Debrief' option prominently.\n\n**Context:** Context selection makes calls more productive - AI knows what to ask about. Must be optional and fast to dismiss for agents who just want a quick general debrief. Per PRD: Cards use 'border-radius: 12px', inputs get 'border-color: #C4704D' on focus.\n\n**Testing Requirements:**\n- **Unit Tests:** Test modal opens on button click, test search input filters FUB contacts, test selecting a lead updates state, test 'Skip' button proceeds without context, test modal closes on selection, test ESC key closes modal, test clicking outside closes modal","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:11.826148-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:11.826148-06:00","labels":["ai","api","backend","frontend","integration","integrations","ui"],"dependencies":[{"issue_id":"test-e4t2s2","depends_on_id":"test-e4t2","type":"parent-child","created_at":"2026-01-30T14:14:11.970775-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t2s2","depends_on_id":"test-e4t2s1","type":"blocks","created_at":"2026-01-30T14:15:16.241433-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t2s3","title":"Create Convex mutation for immediate call queueing with context","description":"Implement Convex mutation `queueImmediateCall` that accepts optional leadId/propertyId context. Must set call priority to 'immediate' with target initiation within 30 seconds. Store call request with timestamp, agentId, context (lead/property if selected), and status='queued'. Trigger the Bland.ai call initiation. Return call ID for status tracking.\n\n**Context:** Backend needs to handle the 30-second SLA for call initiation. Context data flows through to the AI prompt so it knows what to discuss during the debrief.\n\n**Testing Requirements:**\n- **Unit Tests:** Test mutation creates call record with status='queued', test call includes leadId when provided, test call includes propertyId when provided, test call works without context (general debrief), test timestamp is set correctly, test proper agentId association, test mutation returns call ID","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:12.155084-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:12.155084-06:00","labels":["ai","api","backend","convex","frontend","integration","ui"],"dependencies":[{"issue_id":"test-e4t2s3","depends_on_id":"test-e4t2s1","type":"blocks","created_at":"2026-01-30T12:51:32.753773-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t2s3","depends_on_id":"test-e4t2s2","type":"blocks","created_at":"2026-01-30T12:51:32.974272-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t2s3","depends_on_id":"test-e4t2","type":"parent-child","created_at":"2026-01-30T14:14:12.327409-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t2s4","title":"Add real-time call status indicator with optimistic UI","description":"Build status component showing call progress: queued → calling → connected. Use Convex subscription for real-time updates. Implement optimistic UI - immediately show 'queued' on button click before server confirms. Use brand colors: Warm Amber (#D4A84B) for 'queued/calling', Success Green (#5B8A5B) for 'connected'. Show elapsed time since request. Include subtle animation during 'calling' state.\n\n**Context:** Per PRD design notes: 'Show real-time status (queued → calling → connected). Use optimistic UI for responsiveness.' Agents need immediate feedback that their request was received, especially given the 30-second SLA.\n\n**Testing Requirements:**\n- **Unit Tests:** Test optimistic 'queued' state appears immediately on click, test Convex subscription updates status in real-time, test 'queued' shows Warm Amber color, test 'connected' shows Success Green, test elapsed time counter increments, test animation plays during 'calling' state, test status resets after call ends","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:12.550705-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:12.550705-06:00","labels":["api","backend","calendar","convex","frontend","integration","integrations","testing","verification"],"dependencies":[{"issue_id":"test-e4t2s4","depends_on_id":"test-e4t2","type":"parent-child","created_at":"2026-01-30T14:14:12.717151-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t2s4","depends_on_id":"test-e4t2s1","type":"blocks","created_at":"2026-01-30T14:15:16.398594-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t2s4","depends_on_id":"test-e4t2s3","type":"blocks","created_at":"2026-01-30T14:15:16.581658-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t2s5","title":"Integrate Call Me Now button into dashboard header and verify end-to-end","description":"Place the CallMeNow button in dashboard header/hero area as specified. Wire up full flow: button click → modal → context selection → mutation call → status display. Ensure button is prominent but not disruptive. Test complete flow from click to call initiation. Verify call initiates within 30 seconds in dev environment.\n\n**Context:** Per PRD: 'Add CTA button to dashboard header or hero area.' This is the integration point where all pieces come together. Must verify the 30-second SLA is achievable.\n\n**Testing Requirements:**\n- **Unit Tests:** Test button appears in dashboard header, test full click-to-queued flow works, test context passes through to mutation correctly, test error handling shows branded Error Coral (#C45D4D) toast, test multiple rapid clicks are debounced, integration test: verify call initiates within 30 seconds of button press","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:12.893999-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:12.893999-06:00","labels":["backend","frontend","integration","testing"],"dependencies":[{"issue_id":"test-e4t2s5","depends_on_id":"test-e4t2","type":"parent-child","created_at":"2026-01-30T14:14:13.028422-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t2s5","depends_on_id":"test-e4t2s2","type":"blocks","created_at":"2026-01-30T14:15:16.740266-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t2s5","depends_on_id":"test-e4t2s4","type":"blocks","created_at":"2026-01-30T14:15:16.982296-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t3","title":"Implement Google Calendar and FUB Calendar integration for appointment detection","description":"Build integrations to sync calendar data from Google Calendar and Follow Up Boss Calendar. Detect when appointments end and store appointment metadata (attendees, property, notes) for triggering auto-calls.\n\n**Context:** Calendar auto-calls are the ideal zero-effort trigger - agents don't have to do anything. The system detects their appointment ended and calls them. This is the key differentiator that makes RealHerd proactive rather than reactive.\n\n**Testing Requirements:**\n- **Unit Tests:** Calendar event parsing, appointment end time detection, timezone conversion, OAuth token refresh logic\n- **Integration Tests:** Google Calendar OAuth flow, FUB appointment sync, webhook/polling reliability, appointment data accuracy","design":"For Google Calendar: Use OAuth2 flow to connect, set up webhook push notifications for calendar changes, or poll at intervals. For FUB: Use FUB API to fetch appointments tied to leads. Store appointment records in Convex with end times. Use Convex scheduled functions to check for recently-ended appointments. Consider timezone handling carefully.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":480,"created_at":"2026-01-30T14:13:23.255243-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:23.255243-06:00","labels":["ai","backend","calendar","fub","integration","orchestration"],"dependencies":[{"issue_id":"test-e4t3","depends_on_id":"test-e4t2","type":"blocks","created_at":"2026-01-30T12:51:33.757926-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t3","depends_on_id":"test-e4","type":"parent-child","created_at":"2026-01-30T14:13:23.380801-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t3s1","title":"Create calendar data models and Convex schema","description":"Define Convex tables for storing calendar appointments with all required metadata: appointmentId, source (google/fub), calendarId, title, startTime, endTime, timezone, attendees array (with contactId references), propertyAddress, notes, agentId, status (scheduled/completed/cancelled), syncedAt timestamp. Include indexes for querying by agentId, endTime, and status.\n\n**Context:** The appointment schema is the foundation for both calendar sources. Storing normalized appointment data enables the scheduled function to query recently-ended appointments regardless of source. Timezone handling is critical since agents work across markets.\n\n**Testing Requirements:**\n- **Unit Tests:** Test schema validation for required fields, test timezone storage format, test attendee array structure, verify indexes exist for endTime range queries","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:13.214904-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:13.214904-06:00","labels":["api","auth","backend","config","database","types"],"dependencies":[{"issue_id":"test-e4t3s1","depends_on_id":"test-e4t3","type":"parent-child","created_at":"2026-01-30T14:14:13.38806-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t3s2","title":"Implement Google Calendar OAuth2 flow and webhook subscription","description":"Build OAuth2 connection flow: store tokens in Convex with refresh logic, request calendar.readonly scope. After auth, subscribe to push notifications using Google Calendar API watch() method with a webhook endpoint. Handle webhook verification, parse calendar change notifications, and queue sync jobs. Include token refresh handling for long-lived connections.\n\n**Context:** Google Calendar is the primary calendar for most agents. Push notifications are preferred over polling to minimize latency - we want to trigger calls within minutes of an appointment ending. OAuth tokens need secure storage and automatic refresh.\n\n**Testing Requirements:**\n- **Unit Tests:** Test OAuth token storage/retrieval, test token refresh flow, test webhook signature verification, test calendar watch subscription creation, mock webhook payload parsing","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":120,"created_at":"2026-01-30T14:14:13.667229-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:13.667229-06:00","labels":["api","backend","frontend","fub-api","integration","matching","oauth","scheduling"],"dependencies":[{"issue_id":"test-e4t3s2","depends_on_id":"test-e4t3","type":"parent-child","created_at":"2026-01-30T14:14:13.9121-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t3s2","depends_on_id":"test-e4t3s1","type":"blocks","created_at":"2026-01-30T14:15:17.152129-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t3s3","title":"Implement FUB Calendar appointment sync","description":"Use Follow Up Boss API to fetch appointments associated with leads. FUB stores appointments on person records - query the /people endpoint with appointments included, or use /appointments endpoint if available. Map FUB appointment data to our normalized schema, linking attendees to existing FUB contacts. Set up periodic polling (every 5 minutes) since FUB may not support webhooks for calendar changes.\n\n**Context:** FUB Calendar integration ensures agents using FUB's built-in scheduling get auto-call triggers too. Since FUB is already integrated for contacts (Task 2.1), we can link appointments to known contacts. Polling interval balances freshness with API rate limits.\n\n**Testing Requirements:**\n- **Unit Tests:** Test FUB appointment response parsing, test mapping FUB attendees to contact records, test handling appointments without linked contacts, test polling job scheduling","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:14.141116-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:14.141116-06:00","labels":["backend","convex","core","frontend","integration","orchestration","scheduling","ui"],"dependencies":[{"issue_id":"test-e4t3s3","depends_on_id":"test-e4t3s2","type":"blocks","created_at":"2026-01-30T12:51:34.617254-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t3s3","depends_on_id":"test-e4t3","type":"parent-child","created_at":"2026-01-30T14:14:14.27503-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t3s3","depends_on_id":"test-e4t3s1","type":"blocks","created_at":"2026-01-30T14:15:17.356869-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t3s4","title":"Build appointment-ended detection scheduled function","description":"Create a Convex scheduled function that runs every 2-3 minutes to find appointments where endTime has passed within the last check window. Query appointments by status=scheduled AND endTime between (now - checkInterval) and now. For each ended appointment, update status to completed and emit an event/trigger that can initiate the auto-call flow. Handle edge cases: back-to-back appointments (don't call between), cancelled appointments, all-day events.\n\n**Context:** This is the core 'zero-effort trigger' that makes RealHerd proactive. When an agent's showing ends, the system automatically knows to call them for a debrief. The detection must be reliable and timely without being overly aggressive about back-to-back appointments.\n\n**Testing Requirements:**\n- **Unit Tests:** Test appointment detection within time window, test status update to completed, test filtering out cancelled appointments, test back-to-back appointment detection (appointments within 15 min), test all-day event exclusion, verify trigger event emission","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:14.470444-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:14.470444-06:00","labels":["analytics","backend","convex","integration","queue","reliability","scheduler","security","testing"],"dependencies":[{"issue_id":"test-e4t3s4","depends_on_id":"test-e4t3","type":"parent-child","created_at":"2026-01-30T14:14:14.584964-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t3s4","depends_on_id":"test-e4t3s1","type":"blocks","created_at":"2026-01-30T14:15:17.5364-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t3s4","depends_on_id":"test-e4t3s2","type":"blocks","created_at":"2026-01-30T14:15:17.693424-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t3s4","depends_on_id":"test-e4t3s3","type":"blocks","created_at":"2026-01-30T14:15:17.931162-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t4","title":"Build auto-call trigger system with configurable delay after appointments","description":"Create the scheduling system that automatically triggers calls after detected appointment endings. Include configurable delay (e.g., 5-15 minutes after appointment ends) and respect agent preferences for auto-call opt-out.\n\n**Context:** The delay is important - agents need a few minutes to wrap up, get in their car, etc. Making this configurable per-agent respects different workflows. Opt-out is essential for agent autonomy.\n\n**Testing Requirements:**\n- **Unit Tests:** Delay calculation logic, opt-out preference checking, duplicate call prevention, appointment-to-call context mapping\n- **Integration Tests:** End-to-end flow from appointment end detection to call trigger after configured delay, preference changes taking effect","design":"Create Convex scheduled function that runs frequently (every minute) to check for appointments that ended within the trigger window. Check agent preferences table for auto-call enabled and delay settings. Queue call with appointment context (lead, property, notes). Track that appointment has been processed to avoid duplicate calls.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:23.55661-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:23.55661-06:00","labels":["ai","backend","calling","dashboard","fallback","frontend","scheduling","ui"],"dependencies":[{"issue_id":"test-e4t4","depends_on_id":"test-e4t1","type":"blocks","created_at":"2026-01-30T12:51:35.198315-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t4","depends_on_id":"test-e4","type":"parent-child","created_at":"2026-01-30T14:13:23.785236-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t4","depends_on_id":"test-e4t3","type":"blocks","created_at":"2026-01-30T14:15:18.104526-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t4s1","title":"Create agent auto-call preferences schema and storage","description":"Add fields to agent preferences in Convex for auto-call configuration: autoCallEnabled (boolean, default true), autoCallDelayMinutes (number, default 10, range 5-30), and processedAppointmentIds (array to track which appointments have triggered calls). Create mutation to update these preferences and query to retrieve them.\n\n**Context:** Configurable delay respects different agent workflows - some need 5 minutes, others need 15. Opt-out is essential for agent autonomy. Tracking processed appointments prevents duplicate calls.\n\n**Testing Requirements:**\n- **Unit Tests:** Test preference creation with defaults, test update mutation validates delay range (5-30 min), test query returns correct preferences, test processedAppointmentIds deduplication","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:14.779051-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:14.779051-06:00","labels":["backend","convex","dashboard","database","frontend","integration","react"],"dependencies":[{"issue_id":"test-e4t4s1","depends_on_id":"test-e4t4","type":"parent-child","created_at":"2026-01-30T14:14:14.911419-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t4s2","title":"Implement appointment end detection and trigger logic","description":"Create Convex scheduled function (cron job running every minute) that: 1) Queries appointments that ended within the configurable window (end_time + delay \u003c= now), 2) Filters out already-processed appointments, 3) Checks agent's autoCallEnabled preference, 4) Returns list of appointments ready for call triggering. Include buffer logic to handle the delay window correctly.\n\n**Context:** The delay window is critical - agents need time to wrap up their showing, get in their car, and be ready to talk. Running every minute ensures timely triggers without being too aggressive.\n\n**Testing Requirements:**\n- **Unit Tests:** Test appointment filtering by end time, test delay window calculation (appointment ended 10 min ago with 10 min delay = ready), test exclusion of processed appointments, test respecting autoCallEnabled=false, test edge cases (exactly at window boundary)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:15.106884-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:15.106884-06:00","labels":["backend","convex","data-table","frontend","react","scheduling","ui"],"dependencies":[{"issue_id":"test-e4t4s2","depends_on_id":"test-e4t4","type":"parent-child","created_at":"2026-01-30T14:14:15.331679-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t4s2","depends_on_id":"test-e4t4s1","type":"blocks","created_at":"2026-01-30T14:15:18.487036-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t4s3","title":"Build call queueing with appointment context","description":"When trigger conditions are met, queue a call with full appointment context: lead information (name, phone, property interest), property details (address, listing info if available), appointment notes, and source='calendar_auto'. Mark appointment as processed immediately upon queueing to prevent duplicates. Use existing call initiation infrastructure from manual trigger system.\n\n**Context:** Rich context makes the AI call more effective - knowing what property was just shown allows for relevant follow-up questions. Marking processed immediately prevents race conditions with the minute-by-minute cron.\n\n**Testing Requirements:**\n- **Unit Tests:** Test call queue entry contains all required context fields, test appointment marked as processed atomically with queue operation, test source field correctly set to 'calendar_auto', test handling of missing optional fields (no appointment notes)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:15.525709-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:15.525709-06:00","labels":["ai","backend","convex","forms","frontend","react","sms","team-management","ui"],"dependencies":[{"issue_id":"test-e4t4s3","depends_on_id":"test-e4t4s1","type":"blocks","created_at":"2026-01-30T12:51:36.060769-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t4s3","depends_on_id":"test-e4t4","type":"parent-child","created_at":"2026-01-30T14:14:15.662269-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t4s3","depends_on_id":"test-e4t4s2","type":"blocks","created_at":"2026-01-30T14:15:18.68469-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t4s4","title":"Add agent preferences UI for auto-call settings","description":"Create settings panel in agent dashboard for auto-call configuration: toggle for enabling/disabling auto-calls, slider or dropdown for delay time (5-30 minutes in 5-minute increments), clear explanation of what auto-call does. Use warm Terracotta (#C4704D) for primary toggle, Warm Cream (#FAF7F2) background per brand guidelines. Include Shep illustration for empty/disabled state.\n\n**Context:** Agent autonomy is essential - some agents will love automatic calls, others will want full control. Making settings discoverable and clear builds trust. Following RealHerd brand creates consistent, warm experience.\n\n**Testing Requirements:**\n- **Unit Tests:** Test toggle updates autoCallEnabled preference, test delay selector constrains to valid range, test UI reflects current saved preferences on load, test optimistic updates with error rollback","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:15.849212-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:15.849212-06:00","labels":["backend","frontend","integration","settings","testing"],"dependencies":[{"issue_id":"test-e4t4s4","depends_on_id":"test-e4t4s2","type":"blocks","created_at":"2026-01-30T12:51:36.294196-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t4s4","depends_on_id":"test-e4t4s3","type":"blocks","created_at":"2026-01-30T12:51:36.565585-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t4s4","depends_on_id":"test-e4t4","type":"parent-child","created_at":"2026-01-30T14:14:15.987274-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t4s4","depends_on_id":"test-e4t4s1","type":"blocks","created_at":"2026-01-30T14:15:18.923231-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t5","title":"Implement retry logic with configurable intervals and SMS fallback","description":"Build robust retry logic for missed calls: attempt up to 3 calls with configurable intervals between attempts. After all attempts fail, send SMS fallback asking agent to call back or text DEBRIEF. Track all attempt history.\n\n**Context:** Agents miss calls - they're in showings, driving, with clients. The retry logic ensures we catch them eventually. SMS fallback is the safety net that keeps no debrief from being lost entirely.\n\n**Testing Requirements:**\n- **Unit Tests:** Retry scheduling logic, attempt counting, interval calculation, SMS message formatting, attempt history recording\n- **Integration Tests:** Full retry sequence with simulated failed calls, SMS delivery after max attempts, attempt history display accuracy","design":"Create call_attempts table tracking each attempt with timestamp and outcome. On call failure/no-answer, schedule next attempt based on configured interval (e.g., 5min, 15min, 30min). After 3rd failure, trigger SMS via Telnyx with friendly message and DEBRIEF keyword reminder. Store full attempt history for dashboard visibility.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:24.019429-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:24.019429-06:00","labels":["backend","calling","dashboard","frontend","reliability","sms","ui"],"dependencies":[{"issue_id":"test-e4t5","depends_on_id":"test-e4t3","type":"blocks","created_at":"2026-01-30T12:09:45.986452-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t5","depends_on_id":"test-e4t4","type":"blocks","created_at":"2026-01-30T12:51:36.807294-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t5","depends_on_id":"test-e4","type":"parent-child","created_at":"2026-01-30T14:13:24.166501-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t5","depends_on_id":"test-e4t1","type":"blocks","created_at":"2026-01-30T14:15:19.096678-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t5","depends_on_id":"test-e4t2","type":"blocks","created_at":"2026-01-30T14:15:19.281802-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t5s1","title":"Create call_attempts table and TypeScript types","description":"Create database migration for call_attempts table with fields: id, debrief_session_id (FK), attempt_number (1-3), scheduled_at, initiated_at, completed_at, outcome (enum: answered, no_answer, busy, failed, voicemail), telnyx_call_sid, duration_seconds, failure_reason. Create corresponding TypeScript types and Drizzle schema. Include index on debrief_session_id for efficient lookups.\n\n**Context:** Tracking each call attempt separately enables dashboard visibility into retry patterns and helps identify agents who consistently miss calls at certain times. This data is essential for the analytics dashboard showing call success rates.\n\n**Testing Requirements:**\n- **Unit Tests:** Test schema creation with valid migration, test TypeScript types match schema, test foreign key constraint to debrief_sessions, test outcome enum values are exhaustive","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:16.425262-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:16.425262-06:00","labels":["backend","database","demo","frontend","messaging","security","settings","types"],"dependencies":[{"issue_id":"test-e4t5s1","depends_on_id":"test-e4t5","type":"parent-child","created_at":"2026-01-30T14:14:16.594877-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t5s2","title":"Implement configurable retry interval system","description":"Create RetryScheduler service that: (1) accepts configurable retry intervals array (default: [5, 15, 30] minutes), (2) calculates next attempt time based on attempt number, (3) schedules next call attempt via queue/cron job, (4) stores retry configuration per-organization in settings. Use Inngest or similar for reliable job scheduling. Include method to cancel pending retries if agent responds.\n\n**Context:** Different brokerages have different preferences - some want aggressive retry (2,5,10 min), others prefer spaced out (10,30,60 min). Making this configurable per-org lets them tune to their culture.\n\n**Testing Requirements:**\n- **Unit Tests:** Test interval calculation for attempts 1,2,3, test scheduling creates correct job with timestamp, test cancellation removes pending jobs, test configuration persistence and retrieval, test edge case when all retries exhausted returns null","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:16.761713-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:16.761713-06:00","labels":["backend","convex","dashboard","demo","email","frontend","integration","real-time"],"dependencies":[{"issue_id":"test-e4t5s2","depends_on_id":"test-e4t5","type":"parent-child","created_at":"2026-01-30T14:14:16.896762-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t5s2","depends_on_id":"test-e4t5s1","type":"blocks","created_at":"2026-01-30T14:15:19.465197-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t5s3","title":"Build SMS fallback trigger with DEBRIEF keyword","description":"Create SMSFallbackService that: (1) triggers after 3rd failed call attempt, (2) sends friendly SMS via Telnyx: 'Hey [FirstName], we tried calling for your debrief but couldn't reach you. Call us back or reply DEBRIEF when you have 2 minutes to chat.', (3) records SMS in call_attempts with outcome='sms_fallback', (4) handles Telnyx webhook for incoming DEBRIEF keyword to trigger new call. Respect agent contact preferences if stored.\n\n**Context:** SMS is the safety net ensuring no debrief is lost. The DEBRIEF keyword gives agents control - they can respond when ready rather than being interrupted again. Per PRD: 'SMS fallback asking agent to call back or text DEBRIEF'.\n\n**Testing Requirements:**\n- **Unit Tests:** Test SMS triggers only after attempt_number=3 with failed outcomes, test message personalization with agent first name, test Telnyx API call with correct parameters, test incoming DEBRIEF webhook triggers new call scheduling, test duplicate DEBRIEF messages are idempotent","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:17.087329-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:17.087329-06:00","labels":["backend","component","dashboard","demo","external-api","frontend","integration","permissions","ux"],"dependencies":[{"issue_id":"test-e4t5s3","depends_on_id":"test-e4t5s1","type":"blocks","created_at":"2026-01-30T11:11:01.672999-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t5s3","depends_on_id":"test-e4t5","type":"parent-child","created_at":"2026-01-30T14:14:17.238236-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t5s3","depends_on_id":"test-e4t5s2","type":"blocks","created_at":"2026-01-30T14:15:19.643044-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t5s4","title":"Integrate retry logic with call outcome handler and verify end-to-end","description":"Wire RetryScheduler and SMSFallbackService into existing call webhook handler. On call completion: (1) record attempt in call_attempts table, (2) if outcome is no_answer/busy/failed and attempts \u003c 3, schedule retry, (3) if attempts = 3 and failed, trigger SMS fallback, (4) if answered, cancel any pending retries. Add logging for observability. Test full flow manually with Telnyx sandbox.\n\n**Context:** This integration point connects all the retry components into a cohesive system. Proper wiring ensures agents get called back appropriately and nothing falls through the cracks.\n\n**Testing Requirements:**\n- **Unit Tests:** Test call completion handler routes to correct service based on outcome, test attempt counter increments correctly, test successful call cancels pending retries, test integration with mock Telnyx webhook payloads for all outcome types, test concurrent call attempts are handled safely","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:17.430655-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:17.430655-06:00","labels":["backend","component","demo","documentation","frontend","integration","testing","ux"],"dependencies":[{"issue_id":"test-e4t5s4","depends_on_id":"test-e4t5s2","type":"blocks","created_at":"2026-01-30T11:11:01.917686-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t5s4","depends_on_id":"test-e4t5s1","type":"blocks","created_at":"2026-01-30T12:09:46.610707-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t5s4","depends_on_id":"test-e4t5","type":"parent-child","created_at":"2026-01-30T14:14:17.615416-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t5s4","depends_on_id":"test-e4t5s3","type":"blocks","created_at":"2026-01-30T14:15:19.813834-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t6","title":"Add agent preferences for auto-call settings and call attempt history UI","description":"Build the agent preferences UI for managing auto-call settings (enable/disable, delay timing, retry intervals) and create a call attempt history view showing all trigger attempts, outcomes, and retry sequences.\n\n**Context:** Agents need control over how aggressively they're called. Transparency into call history builds trust - they can see the system tried to reach them. This also helps support diagnose issues.\n\n**Testing Requirements:**\n- **Unit Tests:** Preference form validation, settings persistence, history filtering logic, status badge rendering\n- **Integration Tests:** Preference changes affecting call behavior, history accurately reflecting actual attempts, SMS confirmation delivery","design":"Add preferences section to agent settings page with toggles and inputs for auto-call config. Create call history component showing chronological list of call attempts with status badges (completed, missed, retrying, SMS sent). Include filters by date range and trigger type. Send SMS confirmation after successful debrief completion.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:24.350896-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:24.350896-06:00","labels":["dashboard","frontend","integration","qa","settings","testing"],"dependencies":[{"issue_id":"test-e4t6","depends_on_id":"test-e4t2","type":"blocks","created_at":"2026-01-30T12:51:37.880197-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t6","depends_on_id":"test-e4t3","type":"blocks","created_at":"2026-01-30T12:51:38.212467-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t6","depends_on_id":"test-e4","type":"parent-child","created_at":"2026-01-30T14:13:24.498543-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t6","depends_on_id":"test-e4t4","type":"blocks","created_at":"2026-01-30T14:15:20.007136-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t6","depends_on_id":"test-e4t5","type":"blocks","created_at":"2026-01-30T14:15:20.209625-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t6s1","title":"Create TypeScript types and Zod schemas for agent auto-call preferences and call attempt history","description":"Define types for AgentAutoCallPreferences (enabled: boolean, delayMinutes: number, retryIntervals: number[], maxRetries: number) and CallAttemptRecord (id, agentId, triggerId, triggerType: 'calendar'|'manual', timestamp, status: 'completed'|'missed'|'retrying'|'sms_sent', outcome, retrySequence: number, callDuration, debriefCompleted). Create Zod schemas for validation. Add to existing agent preferences schema.\n\n**Context:** Type safety ensures preferences are correctly validated before saving and call history is consistently structured for display. These types will be used across the preferences form, API endpoints, and history display components.\n\n**Testing Requirements:**\n- **Unit Tests:** Test Zod schema validation for valid/invalid preference values (negative delays, empty retry intervals), test CallAttemptRecord schema with all status variants, test schema coercion for numeric inputs","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:17.840643-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:17.840643-06:00","labels":["backend","testing","types"],"dependencies":[{"issue_id":"test-e4t6s1","depends_on_id":"test-e4t6","type":"parent-child","created_at":"2026-01-30T14:14:18.027041-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t6s2","title":"Build agent auto-call preferences form component with toggles and inputs","description":"Create AutoCallPreferencesForm component in agent settings page. Include: toggle switch for enable/disable auto-calls, number input for initial delay (0-30 minutes), retry interval configuration (allow adding/removing intervals like [5, 10, 15] minutes), max retries slider (1-5). Use warm UI components per brand guidelines - terracotta (#C4704D) for primary toggle, Warm Sand (#E8DFD4) borders, 8px border radius on inputs. Add save button with optimistic updates.\n\n**Context:** Agents need control over how aggressively they're called. Some want immediate calls after meetings, others want a buffer. Retry customization prevents frustration from too many or too few attempts.\n\n**Testing Requirements:**\n- **Unit Tests:** Test form renders with default values, test toggle state changes, test retry interval add/remove, test validation prevents negative numbers, test form submission payload structure","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:18.204176-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:18.204176-06:00","labels":["backend","frontend","testing","ui"],"dependencies":[{"issue_id":"test-e4t6s2","depends_on_id":"test-e4t6","type":"parent-child","created_at":"2026-01-30T14:14:18.34285-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t6s2","depends_on_id":"test-e4t6s1","type":"blocks","created_at":"2026-01-30T14:15:20.429677-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t6s3","title":"Create call attempt history component with status badges and filters","description":"Build CallAttemptHistory component showing chronological list of call attempts. Each row displays: timestamp (formatted), trigger type (calendar event name or 'Manual trigger'), status badge (completed=Success Green #5B8A5B, missed=Warning Amber #D4A84B, retrying=Sky #7BA3C4, sms_sent=Terracotta #C4704D), retry sequence indicator (e.g., 'Attempt 2 of 3'), outcome summary. Add filter bar with date range picker (last 7/30/90 days) and trigger type dropdown. Use 12px border radius cards per brand guidelines. Include empty state with Shep mascot saying 'No call attempts yet'.\n\n**Context:** Transparency into call history builds trust - agents can see the system tried to reach them. Support can also use this to diagnose issues when agents report problems.\n\n**Testing Requirements:**\n- **Unit Tests:** Test renders empty state with Shep, test renders list of attempts with correct badges, test date filter changes displayed results, test trigger type filter, test status badge color mapping","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":105,"created_at":"2026-01-30T14:14:18.540402-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:18.540402-06:00","labels":["backend","frontend","integration","testing","ui"],"dependencies":[{"issue_id":"test-e4t6s3","depends_on_id":"test-e4t6s2","type":"blocks","created_at":"2026-01-30T12:51:39.175171-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t6s3","depends_on_id":"test-e4t6","type":"parent-child","created_at":"2026-01-30T14:14:18.66859-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t6s3","depends_on_id":"test-e4t6s1","type":"blocks","created_at":"2026-01-30T14:15:20.595658-06:00","created_by":"David Habedank"}]}
{"id":"test-e4t6s4","title":"Integrate preferences and history into agent settings page with API persistence","description":"Add new 'Call Settings' tab/section to existing agent settings page. Wire AutoCallPreferencesForm to save/load from API endpoint (POST/GET /api/agents/:id/call-preferences). Connect CallAttemptHistory to fetch from GET /api/agents/:id/call-attempts with pagination and filter query params. Implement SMS confirmation trigger after successful debrief completion (add to existing debrief completion flow). Ensure loading states use brand-appropriate skeleton loaders.\n\n**Context:** The preferences and history need to persist across sessions and be accessible from a logical location in agent settings. SMS confirmation after debrief closes the loop for agents.\n\n**Testing Requirements:**\n- **Unit Tests:** Test preferences load on mount, test preferences save calls API, test history fetches with correct filters, test loading states render, test error states display appropriately, test SMS trigger fires on debrief completion","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:18.933309-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:18.933309-06:00","labels":["backend","documentation","frontend","integration","testing"],"dependencies":[{"issue_id":"test-e4t6s4","depends_on_id":"test-e4t6","type":"parent-child","created_at":"2026-01-30T14:14:19.076284-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t6s4","depends_on_id":"test-e4t6s2","type":"blocks","created_at":"2026-01-30T14:15:20.756682-06:00","created_by":"David Habedank"},{"issue_id":"test-e4t6s4","depends_on_id":"test-e4t6s3","type":"blocks","created_at":"2026-01-30T14:15:20.931873-06:00","created_by":"David Habedank"}]}
{"id":"test-e5","title":"Database Check-In System","description":"Build the proactive check-in call system that reviews agents' lead databases on a scheduled cadence. Implement lead selection algorithms, multi-lead conversation flows, and compliance tracking.\n\n**Context:** Check-ins create ongoing accountability - the 'virtual sales manager' that asks about leads regularly. This is what keeps databases from going stale over time.\n\n**Testing Requirements:**\n- **Unit Tests:** Lead selection scoring algorithm, check-in scheduling logic, compliance calculations\n- **Integration Tests:** Convex cron job scheduling, multi-lead FUB batch sync, conversation context switching\n- **Type Tests:** ScheduledCheckIn types, LeadUpdate types, check-in configuration types\n- **E2E Tests:** Complete check-in flow: schedule → call → review 5 leads → all updates synced to FUB","acceptance_criteria":"- Check-in scheduling system runs on configurable frequency per org/team\n- Lead selection algorithm prioritizes by staleness, temperature, timeline proximity\n- Check-in conversation flow reviews 3-5 leads per call\n- LeadUpdate tracking captures changes for each lead discussed\n- Multi-lead updates sync to FUB in single batch\n- Check-in configuration UI (frequency, leads per call, preferred times)\n- Check-in compliance tracking shows who's taking calls vs missing\n- Scheduled check-ins display in agent dashboard\n- Missed check-ins trigger reschedule or SMS notification","status":"open","priority":1,"issue_type":"epic","owner":"david@habedank.org","estimated_minutes":3840,"created_at":"2026-01-30T14:13:14.824108-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:14.824108-06:00","labels":["accountability","automation","calendar","check-ins","crm","integration","phase-5","sms","sync","triggers"],"dependencies":[{"issue_id":"test-e5","depends_on_id":"test-e4","type":"blocks","created_at":"2026-01-30T12:51:40.131774-06:00","created_by":"David Habedank"},{"issue_id":"test-e5","depends_on_id":"test-e1","type":"blocks","created_at":"2026-01-30T14:15:21.085433-06:00","created_by":"David Habedank"},{"issue_id":"test-e5","depends_on_id":"test-e2","type":"blocks","created_at":"2026-01-30T14:15:21.26375-06:00","created_by":"David Habedank"},{"issue_id":"test-e5","depends_on_id":"test-e3","type":"blocks","created_at":"2026-01-30T14:15:21.440212-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t1","title":"Implement check-in scheduling infrastructure","description":"Build the core scheduling system that triggers check-in calls on configurable cadences. Create Convex scheduled jobs that query for due check-ins based on org/team/agent configurations. The scheduler must handle timezone-aware scheduling, preferred time windows, and rate limiting to avoid overwhelming agents.\n\n**Context:** Check-ins are the 'virtual sales manager' that creates ongoing accountability. Without reliable scheduling, the core value proposition of proactive database maintenance fails. This is the foundation that all other check-in features depend on.\n\n**Testing Requirements:**\n- **Unit Tests:** Schedule calculation functions, timezone conversion, next-check-in-due logic, configuration inheritance (org→team→agent), rate limiting logic\n- **Integration Tests:** Scheduled job triggers at correct times, configuration changes take effect, handles daylight saving transitions, multiple orgs scheduled simultaneously","design":"Use Convex cron jobs or scheduled functions to poll for due check-ins. Store schedule configurations per org with agent-level overrides. Consider using a priority queue pattern for check-ins due within a time window. Must integrate with the existing call infrastructure from Epic 3.","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:24.664784-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:24.664784-06:00","labels":["api","backend","convex","integration","scheduling","sms","telnyx","webhook"],"dependencies":[{"issue_id":"test-e5t1","depends_on_id":"test-e5","type":"parent-child","created_at":"2026-01-30T14:13:24.799036-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t1s1","title":"Define check-in schedule configuration schema","description":"Create TypeScript types and Convex schema for check-in schedule configurations. Include: org-level default settings (cadence, preferred time windows, timezone), team-level overrides, and agent-level overrides. Schema should support cadence types (daily, weekly, bi-weekly, monthly), preferred call windows (e.g., 9am-12pm, 2pm-5pm in agent's timezone), rate limiting settings (max calls per hour per org), and blackout periods (holidays, weekends optional).\n\n**Context:** The scheduling system needs flexible configuration at multiple levels. Orgs set defaults, teams can override, and individual agents can have custom schedules. This hierarchy is critical for the 'virtual sales manager' to respect everyone's preferences.\n\n**Testing Requirements:**\n- **Unit Tests:** Test schema validation for cadence types, test timezone string validation (valid IANA timezones), test time window parsing (start \u003c end), test override hierarchy resolution (agent \u003e team \u003e org), test rate limit bounds (positive integers)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:19.524706-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:19.524706-06:00","labels":["backend","convex","database","real-time","schema","types"],"dependencies":[{"issue_id":"test-e5t1s1","depends_on_id":"test-e5t1","type":"parent-child","created_at":"2026-01-30T14:14:19.660227-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t1s2","title":"Implement timezone-aware next-check-in calculator","description":"Create a utility function that calculates the next check-in time for a given contact/agent based on their schedule configuration. Must handle: timezone conversion (store in UTC, display/calculate in local), preferred time window selection, cadence calculations (next Monday for weekly, etc.), and skipping blackout periods. Use date-fns-tz or similar for timezone handling.\n\n**Context:** Getting timing right is crucial for agent adoption. Calling at 6am or during dinner kills trust. This calculator ensures check-ins happen during preferred windows in each agent's local timezone.\n\n**Testing Requirements:**\n- **Unit Tests:** Test weekly cadence calculation across timezone boundaries, test preferred window selection (if current time is 10am and window is 2pm-5pm, schedule for 2pm), test blackout period skipping, test DST transitions, test edge cases (next check-in falls on weekend with weekend blackout)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:19.8431-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:19.8431-06:00","labels":["api","backend","filtering","frontend","react","security","utility"],"dependencies":[{"issue_id":"test-e5t1s2","depends_on_id":"test-e5t1","type":"parent-child","created_at":"2026-01-30T14:14:19.999061-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t1s2","depends_on_id":"test-e5t1s1","type":"blocks","created_at":"2026-01-30T14:15:21.615178-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t1s3","title":"Create Convex scheduled job for check-in polling","description":"Implement a Convex cron job that runs every 5-15 minutes to find due check-ins. Query contacts where next_checkin_at \u003c= now and status is active. Implement rate limiting by tracking calls-in-progress per org and respecting max concurrent calls. Use a priority queue pattern: contacts overdue longest get priority. Output should be a list of check-ins to trigger, respecting org rate limits.\n\n**Context:** This is the heartbeat of the check-in system. It must be reliable, efficient (batch queries), and respect rate limits to avoid overwhelming agents or hitting API limits on the calling infrastructure from Epic 3.\n\n**Testing Requirements:**\n- **Unit Tests:** Test query returns only contacts with due check-ins, test rate limiting respects org limits, test priority ordering (most overdue first), test no duplicate check-ins triggered for same contact, test skipping contacts with in-progress calls","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:20.186111-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:20.186111-06:00","labels":["api","backend","business-logic","convex","frontend","performance","react","ui"],"dependencies":[{"issue_id":"test-e5t1s3","depends_on_id":"test-e5t1","type":"parent-child","created_at":"2026-01-30T14:14:20.413992-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t1s3","depends_on_id":"test-e5t1s1","type":"blocks","created_at":"2026-01-30T14:15:21.81072-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t1s3","depends_on_id":"test-e5t1s2","type":"blocks","created_at":"2026-01-30T14:15:22.004774-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t1s4","title":"Integrate scheduler with call infrastructure and verify end-to-end","description":"Connect the polling job output to the existing call infrastructure from Epic 3. When a check-in is due: create a call record, trigger the outbound call, update contact's last_checkin_at and calculate next_checkin_at. Handle call failures gracefully (retry logic, backoff). Add logging/observability for debugging schedule issues.\n\n**Context:** The scheduler is only valuable if it actually triggers calls. This integration connects the scheduling brain to the calling muscles, completing the automated check-in loop that keeps databases fresh.\n\n**Testing Requirements:**\n- **Unit Tests:** Test call record creation with correct metadata, test next_checkin_at updates after successful call, test retry logic on call failure (exponential backoff), test call infrastructure API is invoked with correct parameters, test error handling when call service is unavailable","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:20.581802-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:20.581802-06:00","labels":["backend","integration","performance","security","testing"],"dependencies":[{"issue_id":"test-e5t1s4","depends_on_id":"test-e5t1","type":"parent-child","created_at":"2026-01-30T14:14:20.711271-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t1s4","depends_on_id":"test-e5t1s3","type":"blocks","created_at":"2026-01-30T14:15:22.169934-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t1s5","title":"Integration test with FUB sandbox and export module","description":"Write integration tests using FUB sandbox API (or mock server if no sandbox). Test full flow: testConnection → getPeople → createNote → verify note appears. Export FubClient and types from lib/integrations/fub/index.ts. Add README.md with usage examples and rate limit documentation.\n\n**Context:** Unit tests with mocks are necessary but not sufficient - we need to verify the real FUB API accepts our requests. README ensures other devs (and LLM agents) can use the client correctly.\n\n**Testing Requirements:**\n- **Unit Tests:** Test exports are accessible (import { FubClient } from 'lib/integrations/fub'), test README examples are syntactically valid TypeScript, integration test full CRUD flow against FUB sandbox/mock","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T12:49:35.916559-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:59:24.256174-06:00","labels":["backend","documentation","integration","testing"],"dependencies":[{"issue_id":"test-e5t1s5","depends_on_id":"test-e5t1","type":"parent-child","created_at":"2026-01-30T12:49:36.294296-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t1s5","depends_on_id":"test-e5t1s4","type":"blocks","created_at":"2026-01-30T12:51:41.225078-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:59:24.256174-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e5t2","title":"Build lead selection algorithm","description":"Implement the algorithm that selects which 3-5 leads to review during each check-in call. Selection criteria: staleness (days since last contact/update), lead temperature (hot leads need more attention), timeline proximity (closing date approaching), and last check-in coverage (don't repeat same leads).\n\n**Context:** The quality of lead selection determines whether check-ins feel valuable or annoying. Reviewing stale cold leads when hot deals need attention would frustrate agents. The algorithm must balance urgency with coverage to maintain database health.\n\n**Testing Requirements:**\n- **Unit Tests:** Scoring function calculations, weight adjustments, lead rotation logic, edge cases (no leads, all leads recently reviewed, all leads same score)\n- **Integration Tests:** Selection from real lead data, performance with large datasets, selection history tracking persists across calls","design":"Create a scoring function that weighs multiple factors. Consider: staleness_score + temperature_weight + timeline_urgency - recent_review_penalty. Store lead selection history to ensure rotation. Make weights configurable per org. Query should be efficient for large databases (1000+ leads).","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:24.997713-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:24.997713-06:00","labels":["algorithm","backend","convex","dashboard","frontend","integration","settings","ui"],"dependencies":[{"issue_id":"test-e5t2","depends_on_id":"test-e5","type":"parent-child","created_at":"2026-01-30T14:13:25.162153-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t2","depends_on_id":"test-e5t1","type":"blocks","created_at":"2026-01-30T14:15:22.343943-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t2s1","title":"Define lead scoring types and configurable weights schema","description":"Create TypeScript interfaces for lead scoring configuration and results. Define LeadScoreConfig with configurable weights per factor: staleness_weight, temperature_weight, timeline_urgency_weight, recent_review_penalty. Create LeadScore type with breakdown of individual factor scores and total. Add org-level configuration for customizing weights (some brokers may prioritize hot leads, others may want broader coverage).\n\n**Context:** The scoring system must be configurable per organization because different brokerages have different philosophies - some want aggressive follow-up on hot leads, others want systematic coverage of the entire database. Type definitions establish the contract for the algorithm.\n\n**Testing Requirements:**\n- **Unit Tests:** Test LeadScoreConfig validation (weights must be positive numbers), test LeadScore calculation with mock data, verify default weights are reasonable (e.g., staleness 1.0, temperature 1.5, timeline 2.0, penalty 0.5)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:20.903983-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:20.903983-06:00","labels":["backend","component","convex","forms","frontend","security","types","ui"],"dependencies":[{"issue_id":"test-e5t2s1","depends_on_id":"test-e5t2","type":"parent-child","created_at":"2026-01-30T14:14:21.043175-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t2s2","title":"Create lead selection history tracking table","description":"Add database table to track which leads were reviewed in which check-in sessions. Schema: lead_review_history (id, lead_id, checkin_session_id, agent_id, reviewed_at, org_id). Add index on (agent_id, lead_id, reviewed_at) for efficient recent review lookups. This enables the 'don't repeat same leads' requirement by tracking coverage.\n\n**Context:** Without tracking review history, the algorithm would repeatedly surface the same high-scoring leads. History enables rotation so the entire database gets periodic attention, maintaining overall health rather than hyperfocusing on a few leads.\n\n**Testing Requirements:**\n- **Unit Tests:** Test insert/query operations, verify index improves query performance for 'leads reviewed in last N days' lookup, test cascade delete when lead is removed","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:21.227223-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:21.227223-06:00","labels":["api-integration","backend","component","convex","database","drag-drop","frontend","settings","ui"],"dependencies":[{"issue_id":"test-e5t2s2","depends_on_id":"test-e5t2","type":"parent-child","created_at":"2026-01-30T14:14:21.361753-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t2s2","depends_on_id":"test-e5t2s1","type":"blocks","created_at":"2026-01-30T14:15:22.918609-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t2s3","title":"Implement multi-factor lead scoring function","description":"Build calculateLeadScore(lead, config, reviewHistory) function implementing the scoring algorithm. Components: (1) staleness_score = days_since_last_activity * staleness_weight, capped at 30 days; (2) temperature_score = temperature_multiplier[lead.temperature] * temperature_weight where hot=3, warm=2, cold=1; (3) timeline_score = max(0, (30 - days_until_close)) * timeline_weight for leads with closing dates; (4) recent_review_penalty = reviewed_in_last_7_days ? penalty_weight * recency_factor : 0. Return total score with breakdown for transparency.\n\n**Context:** This is the core intelligence of the check-in system. The balance of factors determines whether agents feel the reviews are valuable. Hot leads with approaching timelines should score highest, but recently-reviewed leads get penalized to ensure rotation.\n\n**Testing Requirements:**\n- **Unit Tests:** Test staleness scoring (0 days vs 30+ days), test temperature multipliers (hot \u003e warm \u003e cold), test timeline urgency (1 day until close vs 60 days), test recent review penalty reduces score, test combined scoring with realistic scenarios, test edge cases (no closing date, no last activity)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:21.544058-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:21.544058-06:00","labels":["algorithm","analytics","api-integration","auth","backend","frontend","permissions","react","ui"],"dependencies":[{"issue_id":"test-e5t2s3","depends_on_id":"test-e5t2","type":"parent-child","created_at":"2026-01-30T14:14:21.686891-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t2s3","depends_on_id":"test-e5t2s1","type":"blocks","created_at":"2026-01-30T14:15:23.102924-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t2s3","depends_on_id":"test-e5t2s2","type":"blocks","created_at":"2026-01-30T14:15:23.294192-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t2s4","title":"Build efficient lead selection query with top-N selection","description":"Create selectLeadsForCheckin(agentId, count=5, config) that efficiently queries and ranks leads for large databases (1000+ leads). Use database-level filtering to exclude leads reviewed in last 3 days, then score remaining candidates in application code. Sort by score descending, return top N. Include database query with proper indexes: WHERE agent_id = ? AND lead_id NOT IN (recently_reviewed) ORDER BY last_activity_at for initial candidate fetch. Limit candidate pool to 50-100 for scoring efficiency.\n\n**Context:** Performance matters for agencies with large lead databases. The query must be efficient enough to run at the start of every check-in call without noticeable delay. Pre-filtering at database level reduces the scoring workload.\n\n**Testing Requirements:**\n- **Unit Tests:** Test returns exactly N leads (or fewer if not enough available), test excludes recently-reviewed leads, test performance with 1000 mock leads completes under 500ms, test respects org-level weight configuration, test handles edge case of fewer leads than requested","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:21.877164-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:21.877164-06:00","labels":["api","backend","database","frontend","integration","performance","testing"],"dependencies":[{"issue_id":"test-e5t2s4","depends_on_id":"test-e5t2","type":"parent-child","created_at":"2026-01-30T14:14:22.019646-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t2s4","depends_on_id":"test-e5t2s3","type":"blocks","created_at":"2026-01-30T14:15:23.483743-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t3","title":"Create multi-lead check-in conversation flow","description":"Design and implement the voice conversation flow that reviews 3-5 leads in a single call. The AI must introduce each lead with context, ask targeted questions based on lead status, capture updates naturally, and transition smoothly between leads. Handle partial completion (agent needs to go mid-call).\n\n**Context:** Unlike debriefs which focus on one appointment, check-ins cover multiple leads efficiently. The conversation must feel like a productive status meeting, not an interrogation. Smooth transitions and smart questions make agents feel this is worth their time.\n\n**Testing Requirements:**\n- **Unit Tests:** Conversation state machine, lead transition logic, question selection by lead stage, partial completion handling, summary generation\n- **Integration Tests:** End-to-end call simulation with multiple leads, interruption and resume flow, conversation context maintained across leads","design":"Structure: greeting → lead 1 (intro, questions, capture) → transition → lead 2... → summary → close. For each lead, reference last known status/activity. Question types vary by lead stage. Store progress so interrupted calls can resume or complete remaining leads next time. Use LFM 2.5-Audio for voice interaction.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":480,"created_at":"2026-01-30T14:13:25.411193-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:25.411193-06:00","labels":["ai","backend","calendar","conversation","convex","fub-api","google-api","integration","matching","voice"],"dependencies":[{"issue_id":"test-e5t3","depends_on_id":"test-e5t1","type":"blocks","created_at":"2026-01-30T12:51:42.567358-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t3","depends_on_id":"test-e5","type":"parent-child","created_at":"2026-01-30T14:13:25.707839-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t3","depends_on_id":"test-e5t2","type":"blocks","created_at":"2026-01-30T14:15:23.666503-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t3s1","title":"Design conversation state machine for multi-lead check-ins","description":"Create TypeScript types and state machine for managing multi-lead check-in flow. States: greeting, lead_intro, lead_questions, lead_capture, lead_transition, summary, close, interrupted. Track: current_lead_index, leads_completed[], leads_remaining[], partial_updates{}. Include resume capability for interrupted calls.\n\n**Context:** The state machine is foundational - it determines how the conversation flows and how we handle interruptions gracefully. This enables the 'virtual sales manager' experience that feels like a productive status meeting.\n\n**Testing Requirements:**\n- **Unit Tests:** Test state transitions (greeting→lead_intro, lead_capture→lead_transition, any_state→interrupted), test resume from interrupted state, test leads_completed tracking, test partial_updates persistence","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:22.260148-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:22.260148-06:00","labels":["api","backend","database","security","types","voice"],"dependencies":[{"issue_id":"test-e5t3s1","depends_on_id":"test-e5t3","type":"parent-child","created_at":"2026-01-30T14:14:22.395894-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t3s2","title":"Implement lead context builder and question selector","description":"Build function that takes a lead and generates: 1) Context introduction (last activity, current status, days since contact), 2) Targeted questions based on lead stage (new lead: 'Have you reached them?', active: 'Any updates on their search?', nurture: 'Worth keeping in touch?'). Reference lead's last known status from FUB. Output structured prompt segments for LFM 2.5-Audio.\n\n**Context:** Smart questions based on lead stage make agents feel the AI understands their work. Generic questions feel like interrogation; contextual questions feel like a knowledgeable colleague checking in.\n\n**Testing Requirements:**\n- **Unit Tests:** Test context generation for leads with various last_activity dates, test question selection for each lead stage (new/active/nurture/cold), test handling of leads with missing data, test prompt format matches LFM 2.5-Audio requirements","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:22.573493-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:22.573493-06:00","labels":["ai","analytics","api","auth","backend","frontend","integration","oauth"],"dependencies":[{"issue_id":"test-e5t3s2","depends_on_id":"test-e5t3","type":"parent-child","created_at":"2026-01-30T14:14:22.738365-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t3s2","depends_on_id":"test-e5t3s1","type":"blocks","created_at":"2026-01-30T14:15:23.901479-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t3s3","title":"Build conversation flow controller with smooth transitions","description":"Implement the main conversation orchestrator that: 1) Greets agent and previews lead count ('I have 4 leads to check on'), 2) Cycles through leads using context builder, 3) Captures updates via natural language (integrate with update capture from 5.1), 4) Transitions smoothly between leads ('Great, let's move to Sarah Chen...'), 5) Handles 'I need to go' gracefully - saves progress, confirms what was captured, notes remaining leads for next call.\n\n**Context:** This is the core 'virtual sales manager' experience. Smooth transitions and handling interruptions professionally is what makes agents willing to do this regularly instead of avoiding it.\n\n**Testing Requirements:**\n- **Unit Tests:** Test full flow with mock 3-lead list, test interruption at each state saves correctly, test transition phrases vary (not repetitive), test summary includes all captured updates, test remaining leads stored for resume","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:22.941592-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:22.941592-06:00","labels":["algorithm","backend","components","frontend","integration","permissions","ux","voice"],"dependencies":[{"issue_id":"test-e5t3s3","depends_on_id":"test-e5t3","type":"parent-child","created_at":"2026-01-30T14:14:23.094539-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t3s3","depends_on_id":"test-e5t3s1","type":"blocks","created_at":"2026-01-30T14:15:24.088114-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t3s3","depends_on_id":"test-e5t3s2","type":"blocks","created_at":"2026-01-30T14:15:24.276389-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t3s4","title":"Integrate check-in flow with voice service and test end-to-end","description":"Wire conversation flow controller to LFM 2.5-Audio voice service. Implement session management for check-in calls including: start check-in session, track progress through leads, handle voice recognition results, manage interruption/resume state persistence. Test complete flow: initiate call → greet → cycle 3 leads → handle one interruption → resume → complete → verify all updates captured.\n\n**Context:** Integration testing ensures the conversation feels natural in actual voice interaction, not just in text. The interruption→resume flow is critical for real-world usage where agents are constantly context-switching.\n\n**Testing Requirements:**\n- **Unit Tests:** Test voice service integration with mock audio, test session persistence across simulated disconnection, test update extraction from voice responses matches expected format, test full 3-lead cycle completes with correct state at each step","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:23.297164-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:23.297164-06:00","labels":["backend","cron","database","frontend","integration","testing","ux","voice"],"dependencies":[{"issue_id":"test-e5t3s4","depends_on_id":"test-e5t3s2","type":"blocks","created_at":"2026-01-30T12:09:50.709258-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t3s4","depends_on_id":"test-e5t3","type":"parent-child","created_at":"2026-01-30T14:14:23.450886-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t3s4","depends_on_id":"test-e5t3s3","type":"blocks","created_at":"2026-01-30T14:15:24.482893-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t4","title":"Implement LeadUpdate batch sync to FUB","description":"Build the system that captures all lead updates from a check-in call and syncs them to Follow Up Boss in a single batch operation. Must handle partial updates (some leads updated, some not), conflict resolution, and failure recovery.\n\n**Context:** Each check-in touches 3-5 leads, generating multiple updates. Syncing one at a time is inefficient and error-prone. Batch sync ensures atomicity and provides clear success/failure feedback. This connects check-ins to the actual CRM data.\n\n**Testing Requirements:**\n- **Unit Tests:** Batch assembly, partial failure handling, retry logic, conflict resolution rules, LeadUpdate state transitions\n- **Integration Tests:** Actual FUB API batch calls with test credentials, failure recovery scenarios, large batch handling (10+ updates)","design":"Collect LeadUpdate records during call, mark as pending. On call completion, batch POST to FUB API. Handle partial failures (some leads sync, others fail) with retry queue. Store sync status per update for audit trail. Reuse FUB API infrastructure from Epic 2.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:25.950209-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:25.950209-06:00","labels":["api","backend","convex","fub","integration","retry","sms","sync"],"dependencies":[{"issue_id":"test-e5t4","depends_on_id":"test-e5t1","type":"blocks","created_at":"2026-01-30T12:51:43.837068-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t4","depends_on_id":"test-e5","type":"parent-child","created_at":"2026-01-30T14:13:26.091021-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t4","depends_on_id":"test-e5t3","type":"blocks","created_at":"2026-01-30T14:15:24.648578-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t4s1","title":"Create LeadUpdate pending queue data structure","description":"Create the data structure and storage for collecting LeadUpdate records during a check-in call. Include: LeadUpdate TypeScript interface with fields (leadId, updateType, oldValue, newValue, timestamp, syncStatus: 'pending'|'syncing'|'synced'|'failed', errorMessage?), storage mechanism to accumulate updates during call session, and helper functions to add/retrieve pending updates.\n\n**Context:** Each check-in touches 3-5 leads with multiple field changes per lead. We need to queue all updates during the call before batching them to FUB. This provides the foundation for atomic batch operations and audit trails.\n\n**Testing Requirements:**\n- **Unit Tests:** Test addPendingUpdate() adds to queue, test getPendingUpdates() retrieves all pending, test updateSyncStatus() changes status correctly, test queue isolation between different call sessions","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:23.631658-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:23.631658-06:00","labels":["api-integration","backend","data-model","database","schema"],"dependencies":[{"issue_id":"test-e5t4s1","depends_on_id":"test-e5t4","type":"parent-child","created_at":"2026-01-30T14:14:23.858541-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t4s2","title":"Implement FUB batch update API integration","description":"Build the batch sync function that POSTs multiple lead updates to Follow Up Boss API. Reuse FUB API infrastructure from Epic 2 (authentication, rate limiting, error handling). Implement: batchUpdateLeads(updates: LeadUpdate[]) function, proper request batching (respect FUB API limits), parse response to identify which updates succeeded/failed, handle 401/429/500 errors appropriately.\n\n**Context:** Syncing one lead at a time is inefficient and error-prone. FUB API supports batch operations which reduces network overhead and provides transactional clarity. Must reuse existing FUB client from Epic 2.\n\n**Testing Requirements:**\n- **Unit Tests:** Test batch request format matches FUB API spec, test successful batch returns individual success statuses, test partial failure response parsing (some succeed, some fail), test 429 rate limit triggers retry logic, test 401 triggers re-auth flow","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:24.028372-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:24.028372-06:00","labels":["admin-interface","api","api-integration","backend","frontend","react","scheduling"],"dependencies":[{"issue_id":"test-e5t4s2","depends_on_id":"test-e5t4","type":"parent-child","created_at":"2026-01-30T14:14:24.152149-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t4s2","depends_on_id":"test-e5t4s1","type":"blocks","created_at":"2026-01-30T14:15:24.832433-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t4s3","title":"Build partial failure handling and retry queue","description":"Implement logic for handling partial batch failures where some leads sync successfully and others fail. Create: retry queue for failed updates with exponential backoff, conflict resolution for updates that failed due to stale data (fetch latest, re-apply changes), max retry limits with final failure notification, sync status tracking per update for audit trail. Store failed updates persistently so they survive session boundaries.\n\n**Context:** Real-world syncing has partial failures - network issues, validation errors, conflicts. Users need clear feedback on what worked and what didn't, with automatic retry for transient failures. This is critical for maintaining CRM data integrity.\n\n**Testing Requirements:**\n- **Unit Tests:** Test failed updates added to retry queue, test exponential backoff timing (1s, 2s, 4s...), test max retries exceeded marks as permanently failed, test conflict detection triggers re-fetch, test successful retry removes from queue, test audit trail records all status transitions","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:24.329178-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:24.329178-06:00","labels":["backend","dashboard","error-handling","forms","frontend","notifications","sms","twilio"],"dependencies":[{"issue_id":"test-e5t4s3","depends_on_id":"test-e5t4s1","type":"blocks","created_at":"2026-01-30T12:09:51.554314-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t4s3","depends_on_id":"test-e5t4","type":"parent-child","created_at":"2026-01-30T14:14:24.453155-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t4s3","depends_on_id":"test-e5t4s2","type":"blocks","created_at":"2026-01-30T14:15:25.016768-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t4s4","title":"Wire batch sync to call completion and verify end-to-end","description":"Connect the batch sync system to the call completion flow. On check-in call end: trigger batch sync of all pending LeadUpdates, update UI with sync status (syncing → synced/failed), display clear success/failure feedback per lead, expose retry button for failed syncs. Test full flow: make check-in call → update 3 leads → end call → verify all updates appear in FUB.\n\n**Context:** This connects check-ins to actual CRM data - the core value proposition. Users need immediate feedback that their verbal updates translated to CRM changes. Clear success/failure states build trust in the system.\n\n**Testing Requirements:**\n- **Unit Tests:** Test call completion triggers batch sync, test UI updates to show sync progress, test success state displays correctly, test failure state shows retry option, test retry triggers re-sync of failed items only. Manual verification: complete a real check-in with 3 lead updates, confirm all appear in FUB within 10 seconds","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:24.627175-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:24.627175-06:00","labels":["backend","deployment","frontend","integration","monitoring","real-time","routing","testing"],"dependencies":[{"issue_id":"test-e5t4s4","depends_on_id":"test-e5t4s1","type":"blocks","created_at":"2026-01-30T12:51:44.56562-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t4s4","depends_on_id":"test-e5t4s2","type":"blocks","created_at":"2026-01-30T12:51:44.830031-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t4s4","depends_on_id":"test-e5t4","type":"parent-child","created_at":"2026-01-30T14:14:24.771013-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t4s4","depends_on_id":"test-e5t4s3","type":"blocks","created_at":"2026-01-30T14:15:25.206764-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t5","title":"Build check-in configuration UI","description":"Create the settings interface where admins configure check-in parameters: frequency (daily/weekly/custom), number of leads per call (3-5), preferred time windows, and opt-out options. Support org-level defaults with team and agent overrides.\n\n**Context:** Different teams have different workflows. A high-volume team might want daily check-ins; a luxury agent might prefer weekly. The configuration UI empowers admins to tune the system without developer intervention, driving adoption and satisfaction.\n\n**Testing Requirements:**\n- **Unit Tests:** Form validation, inheritance logic display, timezone conversion for display\n- **Integration Tests:** Settings save and load correctly, changes reflect in scheduling, override hierarchy works (agent overrides team overrides org)","design":"Settings page with org defaults section and override table for teams/agents. Time window selector with timezone display. Preview of 'next scheduled check-in' based on current settings. Use shadcn/ui form components. Save to Convex configuration tables.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":240,"created_at":"2026-01-30T14:13:26.295666-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:26.295666-06:00","labels":["backend","dashboard","frontend","monitoring","settings","sms","telnyx","ui"],"dependencies":[{"issue_id":"test-e5t5","depends_on_id":"test-e5t4","type":"blocks","created_at":"2026-01-30T12:51:45.332216-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t5","depends_on_id":"test-e5","type":"parent-child","created_at":"2026-01-30T14:13:26.437477-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t5","depends_on_id":"test-e5t1","type":"blocks","created_at":"2026-01-30T14:15:25.450959-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t5s1","title":"Create TypeScript types for check-in configuration","description":"Define interfaces for check-in settings: CheckInFrequency (daily/weekly/custom with cron-like flexibility), LeadsPerCall (3-5 range), TimeWindow (start/end times with timezone), and ConfigScope (org/team/agent level with inheritance). Include types for the Convex configuration table schema.\n\n**Context:** Type-safe configuration ensures the UI, API, and database stay in sync. The override hierarchy (org → team → agent) is core to supporting different workflows across the brokerage.\n\n**Testing Requirements:**\n- **Unit Tests:** Test type guards for frequency validation, test LeadsPerCall bounds (reject \u003c3 or \u003e5), test TimeWindow timezone conversion helpers","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:24.962295-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:24.962295-06:00","labels":["backend","database","dependencies","frontend","sms","types"],"dependencies":[{"issue_id":"test-e5t5s1","depends_on_id":"test-e5t5","type":"parent-child","created_at":"2026-01-30T14:14:25.0835-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t5s2","title":"Build org defaults configuration form","description":"Create the main settings form with shadcn/ui components: RadioGroup for frequency (daily/weekly/custom), NumberInput with slider for leads per call (3-5), dual time pickers for preferred window with timezone selector. Include a 'Next scheduled check-in' preview that updates live based on selections. Style with Warm Cream background, Terracotta accents per brand guidelines.\n\n**Context:** This is the primary configuration surface admins interact with. The live preview gives immediate feedback, reducing trial-and-error and building confidence in the settings.\n\n**Testing Requirements:**\n- **Unit Tests:** Test form validation (frequency required, leads in range), test preview calculation for each frequency type, test timezone display formatting, test form submission payload structure","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:25.325666-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:25.325666-06:00","labels":["backend","dashboard","frontend","security","ui"],"dependencies":[{"issue_id":"test-e5t5s2","depends_on_id":"test-e5t5","type":"parent-child","created_at":"2026-01-30T14:14:25.472658-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t5s2","depends_on_id":"test-e5t5s1","type":"blocks","created_at":"2026-01-30T14:15:25.61233-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t5s3","title":"Build team/agent override table with inline editing","description":"Create a data table showing teams and agents with their current check-in settings (inherited or overridden). Include inline editing: click to override frequency/leads/time window for specific team or agent. Show 'Inherited from org' badge when using defaults. Add 'Reset to default' action to clear overrides. Include opt-out toggle per agent.\n\n**Context:** Different teams have different workflows - high-volume teams want daily check-ins, luxury agents prefer weekly. The override table makes these exceptions visible and manageable without cluttering the main form.\n\n**Testing Requirements:**\n- **Unit Tests:** Test override inheritance logic (agent overrides team overrides org), test 'Reset to default' clears agent-level settings, test opt-out toggle prevents scheduling, test table filtering by team","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:25.679311-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:25.679311-06:00","labels":["admin","backend","export","frontend","integration","routing","sms","ui"],"dependencies":[{"issue_id":"test-e5t5s3","depends_on_id":"test-e5t5","type":"parent-child","created_at":"2026-01-30T14:14:25.819915-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t5s3","depends_on_id":"test-e5t5s1","type":"blocks","created_at":"2026-01-30T14:15:25.808772-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t5s3","depends_on_id":"test-e5t5s2","type":"blocks","created_at":"2026-01-30T14:15:26.01498-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t5s4","title":"Wire configuration UI to Convex and verify end-to-end","description":"Create Convex mutations for saving org defaults and team/agent overrides. Implement queries that resolve effective settings with inheritance chain. Connect forms to mutations with optimistic updates. Add success toasts ('Settings saved') and error handling. Test full flow: change org default → verify preview updates → save → verify team inherits new default → add agent override → verify agent uses override.\n\n**Context:** Configuration is only valuable if it persists correctly and the scheduler respects it. This subtask ensures the UI actually controls check-in behavior.\n\n**Testing Requirements:**\n- **Unit Tests:** Test mutation validation rejects invalid configs, test query correctly resolves inherited vs overridden settings, test optimistic update rollback on error, integration test: save config → query returns saved values","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:26.007502-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:26.007502-06:00","labels":["backend","convex","e2e","frontend","integration","pdf","testing"],"dependencies":[{"issue_id":"test-e5t5s4","depends_on_id":"test-e5t5s1","type":"blocks","created_at":"2026-01-30T12:51:46.193972-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t5s4","depends_on_id":"test-e5t5","type":"parent-child","created_at":"2026-01-30T14:14:26.147213-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t5s4","depends_on_id":"test-e5t5s2","type":"blocks","created_at":"2026-01-30T14:15:26.188165-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t5s4","depends_on_id":"test-e5t5s3","type":"blocks","created_at":"2026-01-30T14:15:26.377971-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t6","title":"Add check-in compliance tracking and dashboard display","description":"Implement tracking for check-in completion rates: calls answered vs missed, completion rate per agent/team. Display scheduled check-ins in agent dashboard. Create compliance reports for broker visibility. Add missed check-in handling (reschedule or SMS notification).\n\n**Context:** Accountability requires visibility. Brokers need to see who's engaging with check-ins and who's avoiding them. Agents need to see upcoming check-ins so they're not surprised. Missed check-in handling ensures the system adapts rather than giving up.\n\n**Testing Requirements:**\n- **Unit Tests:** Compliance rate calculations, missed call detection logic, reschedule time calculation, SMS message formatting\n- **Integration Tests:** Dashboard displays correct upcoming check-ins, compliance reports aggregate correctly, SMS sends on missed calls, reschedule creates new scheduled job","design":"Track call outcomes (completed, missed, partial) in Convex. Dashboard widget showing next check-in and recent history. Compliance report page with filterable table. Missed call triggers: immediate reschedule to next window, or SMS reminder via Telnyx. Configurable retry policy per org.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:26.617479-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:26.617479-06:00","labels":["admin","backend","compliance","dashboard","frontend","settings","ui"],"dependencies":[{"issue_id":"test-e5t6","depends_on_id":"test-e5t4","type":"blocks","created_at":"2026-01-30T12:09:53.903954-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t6","depends_on_id":"test-e5","type":"parent-child","created_at":"2026-01-30T14:13:26.776123-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t6","depends_on_id":"test-e5t3","type":"blocks","created_at":"2026-01-30T14:15:26.586821-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t6","depends_on_id":"test-e5t5","type":"blocks","created_at":"2026-01-30T14:15:26.780535-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t6s1","title":"Create check-in outcome tracking schema and mutations","description":"Add call outcome tracking to Convex schema: extend scheduledCheckIns table with outcome field (completed, missed, partial, rescheduled), actualStartTime, actualEndTime, and completionNotes. Create mutations for recording outcomes: recordCheckInOutcome(checkInId, outcome, notes), markCheckInMissed(checkInId). Add indexes for compliance queries: by_agent_and_date, by_org_and_outcome. Include retry tracking fields: retryCount, originalCheckInId for rescheduled calls.\n\n**Context:** Tracking outcomes is the foundation for all compliance reporting. Without recording what happened with each check-in, we can't calculate completion rates or identify agents who need attention. The schema needs to support both real-time updates and historical reporting.\n\n**Testing Requirements:**\n- **Unit Tests:** Test recordCheckInOutcome() with each outcome type, verify timestamp recording, test markCheckInMissed() creates reschedule record when configured, test index queries return correct results for agent/date and org/outcome filters","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:26.512647-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:26.512647-06:00","labels":["backend","database","testing","types"],"dependencies":[{"issue_id":"test-e5t6s1","depends_on_id":"test-e5t6","type":"parent-child","created_at":"2026-01-30T14:14:26.664617-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t6s2","title":"Implement missed check-in handling with configurable retry policy","description":"Create missed check-in handler that triggers when a call goes unanswered: handleMissedCheckIn(checkInId) that reads org retry policy from settings. Implement two retry strategies: (1) immediate reschedule - find next available window using availability from 5.2 and create new scheduledCheckIn linked to original, (2) SMS notification via Telnyx API - send configurable message like 'Missed your RealHerd check-in. Call back or we'll try again at [time]'. Add org settings: missedCallPolicy ('reschedule' | 'sms' | 'both'), maxRetries (default 2), retryDelayMinutes. Wire to Retell webhook for call-not-answered events.\n\n**Context:** The system must adapt when agents miss calls rather than giving up. Different orgs will have different preferences - some want immediate reschedule, others prefer SMS reminders. This flexibility is key for broker adoption since they know their agents' preferences.\n\n**Testing Requirements:**\n- **Unit Tests:** Test handleMissedCheckIn() with 'reschedule' policy creates new check-in in next window, test 'sms' policy calls Telnyx with correct message, test 'both' does both, test maxRetries limit prevents infinite loops, test retryCount increments correctly, mock Telnyx API and verify payload format","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:26.841097-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:26.841097-06:00","labels":["backend","forms","frontend","integration","testing"],"dependencies":[{"issue_id":"test-e5t6s2","depends_on_id":"test-e5t6","type":"parent-child","created_at":"2026-01-30T14:14:26.960655-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t6s2","depends_on_id":"test-e5t6s1","type":"blocks","created_at":"2026-01-30T14:15:26.986893-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t6s3","title":"Build agent dashboard check-in widget","description":"Create React component AgentCheckInWidget for agent dashboard showing: next scheduled check-in with countdown timer, last 5 check-in history with outcomes (green check for completed, red X for missed, yellow for partial), personal completion rate percentage. Use Convex useQuery to fetch agent's check-ins. Style per brand guidelines: card with white background (#FFFFFF), 12px border-radius, Warm Sand border. Show Shep illustration for empty state with message 'No check-ins scheduled yet'. Include 'View All' link to full history.\n\n**Context:** Agents need visibility into their upcoming check-ins so they're prepared and don't feel ambushed. Showing recent history and completion rate creates gentle accountability without being punitive. This is the 'virtual sales manager' making itself known.\n\n**Testing Requirements:**\n- **Unit Tests:** Test widget renders next check-in with correct time format, test countdown timer updates correctly, test history displays correct outcome icons, test completion rate calculation (completed/total * 100), test empty state shows Shep, test View All link navigates correctly","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:27.170948-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:27.170948-06:00","labels":["dashboard","frontend","ux","visualization"],"dependencies":[{"issue_id":"test-e5t6s3","depends_on_id":"test-e5t6s2","type":"blocks","created_at":"2026-01-30T12:09:54.341838-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t6s3","depends_on_id":"test-e5t6","type":"parent-child","created_at":"2026-01-30T14:14:27.382248-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t6s3","depends_on_id":"test-e5t6s1","type":"blocks","created_at":"2026-01-30T14:15:27.190217-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t6s4","title":"Create broker compliance report page with filterable table","description":"Build /broker/compliance page with filterable compliance report. Include summary stats at top: overall completion rate, total check-ins this period, agents below 80% threshold. Create data table with columns: Agent Name, Check-ins Scheduled, Completed, Missed, Completion Rate, Last Check-in Date. Add filters: date range picker (default last 30 days), team/group dropdown, minimum completion rate threshold. Implement sorting on all columns. Add CSV export button. Use Convex query with server-side filtering for performance. Color-code completion rates: green (#5B8A5B) for \u003e80%, amber (#D4A84B) for 60-80%, coral (#C45D4D) for \u003c60%. Style per brand: Warm Cream background, card containers for sections.\n\n**Context:** Brokers need to see who's engaging with check-ins and who's avoiding them. This visibility is core to the accountability value proposition. The filterable table lets them drill down by team or identify problem patterns. Export enables offline review or integration with other broker tools.\n\n**Testing Requirements:**\n- **Unit Tests:** Test summary stats calculate correctly from mock data, test table sorting works on each column, test date range filter updates query params, test team filter shows only selected team's agents, test CSV export includes all visible columns, test completion rate color coding at boundary values (79%, 80%, 59%, 60%)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:27.656256-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:27.656256-06:00","labels":["api","frontend","integration","reporting","testing"],"dependencies":[{"issue_id":"test-e5t6s4","depends_on_id":"test-e5t6","type":"parent-child","created_at":"2026-01-30T14:14:27.834129-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t6s4","depends_on_id":"test-e5t6s1","type":"blocks","created_at":"2026-01-30T14:15:27.373382-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t6s4","depends_on_id":"test-e5t6s3","type":"blocks","created_at":"2026-01-30T14:15:27.551948-06:00","created_by":"David Habedank"}]}
{"id":"test-e5t7","title":"Verify end-to-end call triggering flows","description":"Integration testing of all three trigger pathways (SMS keyword, dashboard button, calendar auto-call) through complete lifecycle including retries, SMS confirmations, and debrief creation. Verify broker settings are respected across all flows.\n\n**Context:** Call triggering is the entry point to RealHerd's core value. All three pathways must work reliably or agents lose trust. This verification ensures the system works as a cohesive whole.","design":"Create test scenarios document covering: SMS trigger happy path, SMS from unknown number, dashboard trigger with/without context, calendar auto-call with successful pickup, calendar auto-call with retries exhausted, broker settings respected. Use Convex test helpers for time manipulation in retry tests.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":240,"created_at":"2026-01-30T12:07:07.539437-06:00","created_by":"David Habedank","updated_at":"2026-01-30T12:31:38.361849-06:00","labels":["integration","qa","testing"],"dependencies":[{"issue_id":"test-e5t7","depends_on_id":"test-e5","type":"parent-child","created_at":"2026-01-30T12:07:07.682879-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t7","depends_on_id":"test-e5t2","type":"blocks","created_at":"2026-01-30T12:09:54.701064-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t7","depends_on_id":"test-e5t5","type":"blocks","created_at":"2026-01-30T12:09:54.920229-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t7","depends_on_id":"test-e5t6","type":"blocks","created_at":"2026-01-30T12:09:55.123177-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T12:31:38.361849-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e5t7s1","title":"Create integration test scaffolding and test scenarios document","description":"Set up integration test file structure for call trigger flows. Create a test scenarios document (as code comments or separate .md) covering all test cases: SMS trigger happy path, SMS from unknown number, dashboard trigger with/without context, calendar auto-call with successful pickup, calendar auto-call with retries exhausted, broker settings respected. Configure Convex test helpers for time manipulation.\n\n**Context:** A clear test plan ensures comprehensive coverage of all trigger pathways. The scaffolding enables consistent test patterns across different trigger types.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T12:08:20.778843-06:00","created_by":"David Habedank","updated_at":"2026-01-30T12:31:17.850662-06:00","labels":["backend","testing"],"dependencies":[{"issue_id":"test-e5t7s1","depends_on_id":"test-e5t7","type":"parent-child","created_at":"2026-01-30T12:08:21.082091-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T12:31:17.850662-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e5t7s2","title":"Implement SMS trigger pathway integration tests","description":"Write integration tests for SMS keyword triggers: (1) Happy path - known agent sends keyword, call initiates, SMS confirmation sent. (2) Unknown number - SMS from non-registered number handled gracefully. (3) Verify broker settings (business hours, enabled keywords) are respected. Test complete lifecycle including debrief creation after call completion.\n\n**Context:** SMS is often the quickest trigger method for agents in the field. Must handle edge cases like unknown numbers without crashing or revealing system internals.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:08:21.576518-06:00","created_by":"David Habedank","updated_at":"2026-01-30T12:31:17.651326-06:00","labels":["backend","testing"],"dependencies":[{"issue_id":"test-e5t7s2","depends_on_id":"test-e5t7","type":"parent-child","created_at":"2026-01-30T12:08:21.922317-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t7s2","depends_on_id":"test-e5t7s1","type":"blocks","created_at":"2026-01-30T12:09:55.299857-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T12:31:17.651326-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e5t7s3","title":"Implement dashboard and calendar trigger integration tests","description":"Write integration tests for: (1) Dashboard button trigger with context data passed to call. (2) Dashboard trigger without context. (3) Calendar auto-call with successful pickup - verify call initiates at scheduled time, debrief created. (4) Calendar auto-call with retries - use Convex time manipulation to test retry scheduling at 5min/15min/30min intervals and behavior when retries exhausted.\n\n**Context:** Calendar auto-call with retry is the 'set it and forget it' experience that differentiates RealHerd. Time manipulation tests are critical to verify retry logic without waiting real minutes.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:08:22.223401-06:00","created_by":"David Habedank","updated_at":"2026-01-30T12:31:17.533717-06:00","labels":["backend","testing"],"dependencies":[{"issue_id":"test-e5t7s3","depends_on_id":"test-e5t7","type":"parent-child","created_at":"2026-01-30T12:08:22.355661-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t7s3","depends_on_id":"test-e5t7s1","type":"blocks","created_at":"2026-01-30T12:09:55.517635-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T12:31:17.533717-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e5t7s4","title":"Run full test suite and verify cross-pathway broker settings","description":"Execute all integration tests and verify: (1) All tests pass. (2) Broker-level settings (business hours, call limits, enabled features) are consistently enforced across SMS, dashboard, and calendar triggers. (3) Document any edge cases discovered. Fix any failing tests or implementation bugs found during verification.\n\n**Context:** Broker settings must work identically regardless of how a call is triggered. This final verification ensures the system works as a cohesive whole and agents can trust any trigger method.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:08:24.822002-06:00","created_by":"David Habedank","updated_at":"2026-01-30T12:31:17.332418-06:00","labels":["backend","testing"],"dependencies":[{"issue_id":"test-e5t7s4","depends_on_id":"test-e5t7","type":"parent-child","created_at":"2026-01-30T12:08:25.192567-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t7s4","depends_on_id":"test-e5t7s2","type":"blocks","created_at":"2026-01-30T12:09:55.711912-06:00","created_by":"David Habedank"},{"issue_id":"test-e5t7s4","depends_on_id":"test-e5t7s3","type":"blocks","created_at":"2026-01-30T12:09:55.997619-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T12:31:17.332418-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e6","title":"Multi-Tenant Organization \u0026 Team Management","description":"Implement organization (brokerage) and team structures with role-based permissions. Build agent invitation flows, onboarding calls, and team-level settings overrides.\n\n**Context:** Brokerages need to manage multiple agents with different teams. This epic enables the B2B model where brokers pay for their whole office.\n\n**Testing Requirements:**\n- **Unit Tests:** Permission checking functions, invitation token generation, role hierarchy validation\n- **Integration Tests:** Clerk organization sync, invitation email/SMS sending, onboarding call trigger\n- **Type Tests:** Organization types, Team types, User role types, permission types\n- **E2E Tests:** Complete onboarding: broker creates org → invites agent → agent accepts → onboarding call → agent active","acceptance_criteria":"- Organization creation with FUB API key configuration\n- Agent invitation via email and SMS with accept flow\n- Agent onboarding welcome call introduces RealHerd\n- Team creation with team lead assignment\n- Role-based permissions (broker sees all, team lead sees team, agent sees self)\n- Team-level settings can override organization defaults\n- Agent management (activate, deactivate, remove)\n- Organization settings page with all configuration options\n- Quiet hours respected per agent timezone","status":"open","priority":1,"issue_type":"epic","owner":"david@habedank.org","estimated_minutes":3360,"created_at":"2026-01-30T14:13:15.04532-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:15.04532-06:00","labels":["accountability","check-ins","multi-tenant","permissions","phase-6","scheduling","sms","teams","triggers","ux"],"dependencies":[{"issue_id":"test-e6","depends_on_id":"test-e3","type":"blocks","created_at":"2026-01-30T12:09:56.378968-06:00","created_by":"David Habedank"},{"issue_id":"test-e6","depends_on_id":"test-e4","type":"blocks","created_at":"2026-01-30T12:09:56.5687-06:00","created_by":"David Habedank"},{"issue_id":"test-e6","depends_on_id":"test-e5","type":"blocks","created_at":"2026-01-30T12:51:46.418139-06:00","created_by":"David Habedank"},{"issue_id":"test-e6","depends_on_id":"test-e1","type":"blocks","created_at":"2026-01-30T14:15:27.733225-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t1","title":"Organization and team database schema setup","description":"Create Convex schema for organizations (brokerages), teams, and memberships. Organizations store FUB API key, settings, billing info. Teams belong to organizations with team lead assignment. Memberships link users to organizations with roles (broker/team_lead/agent) and team assignments.\n\n**Context:** Brokerages need to manage multiple agents with different teams. This schema enables the B2B model where brokers pay for their whole office. Role-based access control flows from this data model.\n\n**Testing Requirements:**\n- **Unit Tests:** Schema validation, settings inheritance logic, role enum validation, timezone handling for quiet hours\n- **Integration Tests:** Convex mutations for CRUD operations, cascading deletes when org removed, team reassignment","design":"Use Convex schema with tables: organizations (id, name, fub_api_key, settings, created_at), teams (id, org_id, name, team_lead_id, settings_overrides), memberships (id, user_id, org_id, team_id, role, status, invited_at, accepted_at). Settings should support inheritance: agent -\u003e team -\u003e org defaults. Include quiet_hours per membership with timezone.","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:26.965903-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:26.965903-06:00","labels":["backend","convex","database","sms","telnyx"],"dependencies":[{"issue_id":"test-e6t1","depends_on_id":"test-e6","type":"parent-child","created_at":"2026-01-30T14:13:27.122294-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t1s1","title":"Create Convex schema for organizations table","description":"Create the organizations table in Convex schema with fields: id (auto), name (string), fub_api_key (optional string, encrypted reference), settings (object with defaults for quiet_hours, notification preferences, etc.), billing_info (object), created_at (timestamp), updated_at (timestamp). Settings object should include default quiet_hours with timezone support, default notification channels, and any org-wide defaults that can be inherited by teams and agents.\n\n**Context:** Organizations represent brokerages in the B2B model. The FUB API key at org level enables all agents to sync with the brokerage's Follow Up Boss account. Settings here become the top of the inheritance chain (agent -\u003e team -\u003e org defaults).\n\n**Testing Requirements:**\n- **Unit Tests:** Test organization creation with valid data, test required fields validation (name required), test settings object structure validation, test default values are applied correctly, test fub_api_key can be null for orgs not yet connected","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:28.024557-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:28.024557-06:00","labels":["backend","database","webhook"],"dependencies":[{"issue_id":"test-e6t1s1","depends_on_id":"test-e6t1","type":"parent-child","created_at":"2026-01-30T14:14:28.161007-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t1s2","title":"Create Convex schema for teams table","description":"Create the teams table with fields: id (auto), org_id (reference to organizations), name (string), team_lead_id (optional reference to users), settings_overrides (object for overriding org defaults like quiet_hours, notification preferences), created_at (timestamp). Add index on org_id for efficient queries. settings_overrides should be sparse - only containing fields that differ from org defaults.\n\n**Context:** Teams belong to organizations and allow brokerages to segment agents (e.g., by location, specialty, or experience level). Team leads can manage their team's agents. The settings_overrides pattern enables the inheritance model where teams can customize org defaults.\n\n**Testing Requirements:**\n- **Unit Tests:** Test team creation with valid org_id, test team_lead_id is optional, test settings_overrides partial object works, test org_id index query performance, test foreign key constraint to organizations","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":40,"created_at":"2026-01-30T14:14:28.355857-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:28.355857-06:00","labels":["api","backend","database"],"dependencies":[{"issue_id":"test-e6t1s2","depends_on_id":"test-e6t1","type":"parent-child","created_at":"2026-01-30T14:14:28.843952-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t1s2","depends_on_id":"test-e6t1s1","type":"blocks","created_at":"2026-01-30T14:15:27.91581-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t1s3","title":"Create Convex schema for memberships table","description":"Create the memberships table linking users to organizations with fields: id (auto), user_id (reference to users), org_id (reference to organizations), team_id (optional reference to teams), role (literal union: 'broker' | 'team_lead' | 'agent'), status (literal union: 'invited' | 'active' | 'suspended'), quiet_hours (object with start_time, end_time, timezone, days_of_week), invited_at (timestamp), accepted_at (optional timestamp), created_at (timestamp). Add compound index on (user_id, org_id) for unique membership lookup and index on org_id for listing org members.\n\n**Context:** Memberships enable role-based access control. Brokers manage the whole org, team_leads manage their team, agents manage only themselves. The quiet_hours per membership with timezone support is critical for the voice-first product - agents in different timezones need personalized quiet hours.\n\n**Testing Requirements:**\n- **Unit Tests:** Test membership creation with all role types, test status transitions (invited -\u003e active), test quiet_hours timezone validation, test compound index prevents duplicate user+org, test team_id is optional, test role enum validation rejects invalid roles","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":50,"created_at":"2026-01-30T14:14:29.079503-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:29.079503-06:00","labels":["analytics","api","backend","database"],"dependencies":[{"issue_id":"test-e6t1s3","depends_on_id":"test-e6t1","type":"parent-child","created_at":"2026-01-30T14:14:29.242613-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t1s3","depends_on_id":"test-e6t1s1","type":"blocks","created_at":"2026-01-30T14:15:28.10406-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t1s3","depends_on_id":"test-e6t1s2","type":"blocks","created_at":"2026-01-30T14:15:28.299778-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t1s4","title":"Create settings inheritance utility functions","description":"Implement utility functions for settings inheritance: getMergedSettings(membership) that combines org defaults -\u003e team overrides -\u003e membership overrides. Create getEffectiveQuietHours(membership) that returns the applicable quiet hours considering timezone. Include isInQuietHours(membership, timestamp) helper for checking if a specific time falls within quiet hours.\n\n**Context:** The inheritance model (agent -\u003e team -\u003e org defaults) is core to how brokerages configure their agents at scale. A broker sets org defaults, team leads can override for their team, and individual agents can have personal settings. This enables the 'set once, apply to many' workflow.\n\n**Testing Requirements:**\n- **Unit Tests:** Test org-only settings returns org defaults, test team override merges correctly with org, test membership override takes precedence over team, test null/undefined overrides don't break merge, test isInQuietHours with various timezones and edge cases (midnight crossing, weekend-only quiet hours)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:29.449943-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:29.449943-06:00","labels":["alerts","api","backend","database","testing","utilities"],"dependencies":[{"issue_id":"test-e6t1s4","depends_on_id":"test-e6t1s2","type":"blocks","created_at":"2026-01-30T11:11:08.97757-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t1s4","depends_on_id":"test-e6t1","type":"parent-child","created_at":"2026-01-30T14:14:29.596751-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t1s4","depends_on_id":"test-e6t1s3","type":"blocks","created_at":"2026-01-30T14:15:28.467589-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t2","title":"Role-based permissions and data access layer","description":"Implement permission system where broker sees all org data, team lead sees their team's data, and agents see only their own. Create Convex query guards and utility functions for permission checks.\n\n**Context:** Pipeline visibility is core to RealHerd's value prop for brokers. Without proper permissions, brokers can't see what their agents are doing, and agents might see data they shouldn't.\n\n**Testing Requirements:**\n- **Unit Tests:** Permission check functions for all role combinations, edge cases (agent not in team, removed user)\n- **Integration Tests:** Queries return correct filtered data per role, unauthorized access attempts blocked","design":"Create permission helpers: canViewAgent(viewerId, agentId), canViewTeam(viewerId, teamId), getVisibleAgents(userId). Apply these guards to all agent/contact/call queries. Consider Convex's built-in auth context from Clerk for user identification.","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:27.78918-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:27.78918-06:00","labels":["algorithm","backend","convex","security","telnyx","voice"],"dependencies":[{"issue_id":"test-e6t2","depends_on_id":"test-e6","type":"parent-child","created_at":"2026-01-30T14:13:28.063753-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t2","depends_on_id":"test-e6t1","type":"blocks","created_at":"2026-01-30T14:15:28.657277-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t2s1","title":"Create permission utility functions and TypeScript types","description":"Create a new file `convex/lib/permissions.ts` with TypeScript types and core permission helper functions. Define `PermissionLevel` enum (broker, team_lead, agent). Create utility functions: `canViewAgent(viewerId, agentId)` - returns true if viewer is broker in same org, team lead of agent's team, or the agent themselves. `canViewTeam(viewerId, teamId)` - returns true if viewer is broker in same org or team lead of that team. `getVisibleAgents(userId)` - returns query filter for agents the user can see based on their role.\n\n**Context:** These permission helpers are the foundation for all data access control. They must be pure functions that can be used in Convex queries. Brokers see all org data, team leads see their team's data, agents see only their own - this hierarchy is core to RealHerd's B2B value prop.\n\n**Testing Requirements:**\n- **Unit Tests:** Test canViewAgent: broker viewing any org agent (true), team lead viewing team member (true), team lead viewing other team (false), agent viewing self (true), agent viewing peer (false). Test canViewTeam: broker viewing any org team (true), team lead viewing own team (true), team lead viewing other team (false). Test getVisibleAgents returns correct filter for each role.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:29.787748-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:29.787748-06:00","labels":["backend","database","frontend","layout","security","types"],"dependencies":[{"issue_id":"test-e6t2s1","depends_on_id":"test-e6t2","type":"parent-child","created_at":"2026-01-30T14:14:29.924959-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t2s2","title":"Create Convex query guards with Clerk auth context","description":"Create `convex/lib/queryGuards.ts` with higher-order functions that wrap Convex queries with permission checks. Use Convex's built-in auth context from Clerk via `ctx.auth.getUserIdentity()` to get current user. Create `withOrgAccess(query)` - ensures user belongs to the org. Create `withAgentAccess(query, agentIdArg)` - validates viewer can see the specified agent using canViewAgent. Create `withTeamAccess(query, teamIdArg)` - validates viewer can see the specified team. Guards should throw ConvexError with appropriate message if access denied.\n\n**Context:** Query guards provide reusable access control that can wrap any Convex query. Using Clerk's auth context ensures we always know who the current user is. These guards will be applied to all agent/contact/call queries to enforce the permission hierarchy.\n\n**Testing Requirements:**\n- **Unit Tests:** Test withOrgAccess throws when user not in org, passes when in org. Test withAgentAccess throws ConvexError('Access denied') when broker views other org's agent, when team lead views agent not on their team, when agent views peer. Test it passes for valid access patterns. Test withTeamAccess similarly for team-scoped data.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:30.134913-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:30.134913-06:00","labels":["algorithm","backend","branding","frontend","integration","navigation","security"],"dependencies":[{"issue_id":"test-e6t2s2","depends_on_id":"test-e6t2","type":"parent-child","created_at":"2026-01-30T14:14:30.33705-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t2s2","depends_on_id":"test-e6t2s1","type":"blocks","created_at":"2026-01-30T14:15:29.074988-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t2s3","title":"Apply permission guards to agent/contact/call queries","description":"Update existing Convex queries in `convex/agents.ts`, `convex/contacts.ts`, and `convex/calls.ts` to use the permission guards. Wrap `getAgent` and `listAgents` with withAgentAccess/withOrgAccess. Wrap `getContacts`, `listContacts` with appropriate guards - contacts should only be visible if viewer can see the owning agent. Wrap `getCalls`, `listCalls` similarly - calls should only be visible if viewer can see the agent who made them. Update list queries to use getVisibleAgents filter.\n\n**Context:** This is where permissions become real. Every query that returns agent, contact, or call data must respect the permission hierarchy. Without this, brokers can't trust the system with their organization's data, and the B2B model fails.\n\n**Testing Requirements:**\n- **Unit Tests:** Test listAgents as broker returns all org agents, as team lead returns only team agents, as agent returns only self. Test getContacts for an agent you can't view throws access denied. Test listCalls respects same visibility rules. Test that queries still work correctly for valid access patterns.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:30.518569-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:30.518569-06:00","labels":["backend","components","convex","frontend","security"],"dependencies":[{"issue_id":"test-e6t2s3","depends_on_id":"test-e6t2s1","type":"blocks","created_at":"2026-01-30T11:11:09.802526-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t2s3","depends_on_id":"test-e6t2","type":"parent-child","created_at":"2026-01-30T14:14:30.658456-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t2s3","depends_on_id":"test-e6t2s2","type":"blocks","created_at":"2026-01-30T14:15:29.266738-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t2s4","title":"Add permission tests and verify end-to-end access control","description":"Create comprehensive integration tests in `convex/tests/permissions.test.ts`. Set up test fixtures with: 1 org, 1 broker, 2 teams, 2 team leads, 4 agents (2 per team), contacts and calls for each agent. Write tests that verify the complete permission matrix: broker can view all, team lead A can view team A but not team B, agent can view only their own data. Test edge cases: user with no role, user in different org, deleted team lead still can't access. Run full test suite and verify all pass.\n\n**Context:** Permissions are a security boundary - we need comprehensive tests to ensure no data leaks. These tests also serve as documentation of the expected behavior and prevent regressions as the codebase evolves.\n\n**Testing Requirements:**\n- **Unit Tests:** Integration tests covering: broker→all agents (pass), broker→other org (fail), team lead→own team agents (pass), team lead→other team (fail), agent→self (pass), agent→peer (fail), agent→other team (fail). Test contact/call visibility follows agent visibility. Test error messages are appropriate and don't leak information.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:30.841545-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:30.841545-06:00","labels":["backend","frontend","security","testing","ux"],"dependencies":[{"issue_id":"test-e6t2s4","depends_on_id":"test-e6t2s2","type":"blocks","created_at":"2026-01-30T11:11:10.210859-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t2s4","depends_on_id":"test-e6t2","type":"parent-child","created_at":"2026-01-30T14:14:30.975916-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t2s4","depends_on_id":"test-e6t2s3","type":"blocks","created_at":"2026-01-30T14:15:29.437515-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t3","title":"Agent invitation flow with email and SMS","description":"Build invitation system where broker/team lead can invite agents via email and SMS. Generate secure invitation tokens, send via Telnyx SMS and email, handle accept flow that links Clerk user to organization membership.\n\n**Context:** Brokerages need to onboard their agents easily. Multi-channel invites (email + SMS) increase acceptance rates since agents are often mobile-first.\n\n**Testing Requirements:**\n- **Unit Tests:** Token generation, expiration validation, duplicate invite handling, phone/email format validation\n- **Integration Tests:** Full invite flow with Telnyx SMS delivery, Clerk account linking, membership creation on accept","design":"Create invitations table (token, org_id, team_id, role, email, phone, expires_at, accepted_at). Use Telnyx for SMS, standard email service for email. Accept flow: validate token -\u003e Clerk signup/signin -\u003e create membership -\u003e mark accepted. Include resend capability and expiration handling.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":480,"created_at":"2026-01-30T14:13:28.309624-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:28.309624-06:00","labels":["backend","clerk","convex","cron","dashboard","frontend","notifications","telnyx","ui"],"dependencies":[{"issue_id":"test-e6t3","depends_on_id":"test-e6t2","type":"blocks","created_at":"2026-01-30T12:51:49.496327-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t3","depends_on_id":"test-e6","type":"parent-child","created_at":"2026-01-30T14:13:28.454347-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t3","depends_on_id":"test-e6t1","type":"blocks","created_at":"2026-01-30T14:15:29.613373-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t3s1","title":"Create invitations database schema and types","description":"Create Drizzle schema for invitations table with fields: id, token (unique secure string), org_id (FK to organizations), team_id (nullable FK to teams), role (enum: admin, agent), email (string), phone (nullable string for SMS), expires_at (timestamp, default 7 days), accepted_at (nullable timestamp), created_by (FK to users), created_at, updated_at. Generate TypeScript types from schema. Add indexes on token and (org_id, email) for efficient lookups.\n\n**Context:** The invitations table is the foundation for tracking pending invites across email and SMS channels. Supports both org-level and team-level invitations with role assignment.\n\n**Testing Requirements:**\n- **Unit Tests:** Test schema validation for required fields, test token uniqueness constraint, test foreign key relationships to organizations/teams/users, test enum values for role field","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:31.162878-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:31.162878-06:00","labels":["backend","convex","database","frontend","real-time","ui"],"dependencies":[{"issue_id":"test-e6t3s1","depends_on_id":"test-e6t3","type":"parent-child","created_at":"2026-01-30T14:14:31.302869-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t3s2","title":"Build invitation creation API with secure token generation","description":"Create POST /api/invitations endpoint that accepts {org_id, team_id?, role, email, phone?, channels: ['email', 'sms']}. Generate cryptographically secure invitation token using crypto.randomBytes(32).toString('hex'). Validate that requester has admin/broker role in the organization. Store invitation record with 7-day expiration. Return invitation details including generated token. Add resend endpoint PUT /api/invitations/:id/resend that regenerates token and updates expires_at.\n\n**Context:** Brokers need to programmatically create invitations. Secure tokens prevent guessing attacks. Resend capability handles cases where agents miss or lose the original invite.\n\n**Testing Requirements:**\n- **Unit Tests:** Test token generation produces unique 64-char hex strings, test authorization check for non-admin users (should reject), test invitation creation with valid data, test resend updates token and expiration, test validation rejects invalid org_id or role","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:31.612762-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:31.612762-06:00","labels":["api","backend","frontend","integration","utilities","visualization"],"dependencies":[{"issue_id":"test-e6t3s2","depends_on_id":"test-e6t3","type":"parent-child","created_at":"2026-01-30T14:14:31.771319-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t3s2","depends_on_id":"test-e6t3s1","type":"blocks","created_at":"2026-01-30T14:15:29.815232-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t3s3","title":"Implement email and SMS notification sending via Telnyx","description":"Create notification service that sends invitations via configured channels. For email: use existing email service (or Telnyx email API) with branded template including: brokerage name, inviter name, role being offered, CTA button linking to /invite/accept?token=XXX. For SMS via Telnyx: send concise message with shortened accept link. Template: '[Brokerage] invited you to join as [role]. Accept: [link]'. Handle Telnyx API errors gracefully, log failures for retry. Integrate with invitation creation endpoint to send immediately on create and resend.\n\n**Context:** Multi-channel invites (email + SMS) increase acceptance rates since agents are often mobile-first. Telnyx provides reliable SMS delivery for the real estate industry.\n\n**Testing Requirements:**\n- **Unit Tests:** Test email template renders correctly with all variables, test SMS message stays under 160 chars, test Telnyx API integration with mock responses, test error handling for API failures (4xx, 5xx), test both channels fire when both email and phone provided","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:31.992063-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:31.992063-06:00","labels":["backend","convex","cron","frontend","integration","search"],"dependencies":[{"issue_id":"test-e6t3s3","depends_on_id":"test-e6t3s1","type":"blocks","created_at":"2026-01-30T12:09:58.927608-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t3s3","depends_on_id":"test-e6t3","type":"parent-child","created_at":"2026-01-30T14:14:32.133806-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t3s3","depends_on_id":"test-e6t3s2","type":"blocks","created_at":"2026-01-30T14:15:30.001966-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t3s4","title":"Build invitation accept flow with Clerk integration","description":"Create /invite/accept page that: 1) Validates token from query param, checks not expired and not already accepted. 2) Shows invitation details (brokerage name, role, inviter). 3) If user not signed in, redirect to Clerk sign-up/sign-in with redirect back to accept page. 4) On authenticated return, create organization membership via Clerk API with the specified role. 5) Mark invitation as accepted (set accepted_at timestamp). 6) Redirect to dashboard with welcome toast. Handle edge cases: expired token (show expiry message with request-new-invite option), already accepted (redirect to dashboard), invalid token (404 with helpful message).\n\n**Context:** The accept flow is the critical conversion point. Seamless Clerk integration ensures agents join the correct organization with proper roles automatically.\n\n**Testing Requirements:**\n- **Unit Tests:** Test token validation rejects expired tokens, test token validation rejects already-accepted tokens, test Clerk membership creation with correct org and role, test accepted_at gets set on successful accept, test redirect flows for unauthenticated users, test error states render appropriate messages","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:32.319957-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:32.319957-06:00","labels":["api","auth","backend","convex","frontend","integration","real-time"],"dependencies":[{"issue_id":"test-e6t3s4","depends_on_id":"test-e6t3","type":"parent-child","created_at":"2026-01-30T14:14:32.460737-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t3s4","depends_on_id":"test-e6t3s3","type":"blocks","created_at":"2026-01-30T14:15:30.19652-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t4","title":"Agent onboarding welcome call","description":"When agent accepts invitation, schedule and execute welcome call from RealHerd introducing the service. Call explains what RealHerd does, how debriefs work, and confirms agent's preferences (quiet hours, timezone).\n\n**Context:** Voice-first product should introduce itself via voice. This call sets expectations and captures agent preferences that affect when RealHerd can call them.\n\n**Testing Requirements:**\n- **Unit Tests:** Welcome call script generation, preference parsing from transcript, retry scheduling logic\n- **Integration Tests:** End-to-end welcome call via Telnyx, LFM conversation handling, membership update on completion","design":"Trigger welcome call job on membership acceptance. Use existing Telnyx/LFM call infrastructure. Welcome script should be conversational, gather timezone confirmation and quiet hours preference. Update membership record with captured preferences. Handle no-answer with retry logic.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:28.624683-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:28.624683-06:00","labels":["ai","backend","conversation","onboarding","sms","telnyx","voice"],"dependencies":[{"issue_id":"test-e6t4","depends_on_id":"test-e6t2","type":"blocks","created_at":"2026-01-30T12:51:50.760861-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t4","depends_on_id":"test-e6","type":"parent-child","created_at":"2026-01-30T14:13:28.852307-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t4","depends_on_id":"test-e6t3","type":"blocks","created_at":"2026-01-30T14:15:30.431579-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t4s1","title":"Create welcome call trigger on membership acceptance","description":"Add event handler that fires when agent accepts brokerage invitation. On acceptance, enqueue a welcome call job to the existing job queue system. Include membership ID and agent contact info in job payload. Handle edge cases: agent already had welcome call, membership status changes before call executes.\n\n**Context:** Voice-first product should introduce itself via voice. The trigger ensures every new agent gets personally onboarded by RealHerd, setting expectations for how debriefs work.\n\n**Testing Requirements:**\n- **Unit Tests:** Test job enqueued on membership acceptance, test job NOT enqueued if agent already onboarded, test job payload contains required fields (membership_id, phone, agent_name), test idempotency if acceptance event fires multiple times","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:32.655296-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:32.655296-06:00","labels":["ai","backend","database","types"],"dependencies":[{"issue_id":"test-e6t4s1","depends_on_id":"test-e6t4","type":"parent-child","created_at":"2026-01-30T14:14:32.80109-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t4s2","title":"Build welcome call script and LFM conversation flow","description":"Create conversational welcome script following RealHerd brand voice (warm but professional, use contractions, acknowledge context). Script should: 1) Introduce RealHerd and explain the service, 2) Briefly explain how debriefs work (voice-first CRM updates after showings), 3) Confirm agent's timezone, 4) Gather quiet hours preference (when NOT to call). Use existing Telnyx/LFM call infrastructure. Script tone per PRD: 'Hey [Name], ready for a quick debrief?' style, NOT 'Howdy partner!'\n\n**Context:** This call sets first impressions and captures preferences that affect when RealHerd can call agents. Must feel like a trusted partner, not a robocall.\n\n**Testing Requirements:**\n- **Unit Tests:** Test LFM flow handles all conversation branches, test timezone confirmation extracts valid timezone, test quiet hours parsing handles various formats ('after 8pm', 'no calls before 9am', 'weekends only'), test graceful handling of unexpected responses","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:32.977388-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:32.977388-06:00","labels":["ai","backend","business-logic","database"],"dependencies":[{"issue_id":"test-e6t4s2","depends_on_id":"test-e6t4","type":"parent-child","created_at":"2026-01-30T14:14:33.091826-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t4s2","depends_on_id":"test-e6t4s1","type":"blocks","created_at":"2026-01-30T14:15:30.587567-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t4s3","title":"Implement preference persistence to membership record","description":"After successful welcome call, update membership record with captured preferences: confirmed timezone (store as IANA timezone string), quiet hours start/end times, call completed timestamp. Add fields to membership schema if not present. Ensure preferences are used by future debrief scheduling logic.\n\n**Context:** Captured preferences directly affect when RealHerd can contact this agent for debriefs. Wrong timezone = calls at 3am = angry agent = churn.\n\n**Testing Requirements:**\n- **Unit Tests:** Test membership record updated with timezone after call, test quiet hours stored correctly, test partial data handling (agent hangs up before giving quiet hours), test preferences retrievable for debrief scheduling","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:33.271549-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:33.271549-06:00","labels":["backend","database","frontend","integration","ui"],"dependencies":[{"issue_id":"test-e6t4s3","depends_on_id":"test-e6t4s1","type":"blocks","created_at":"2026-01-30T12:51:51.129279-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t4s3","depends_on_id":"test-e6t4","type":"parent-child","created_at":"2026-01-30T14:14:33.440427-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t4s3","depends_on_id":"test-e6t4s2","type":"blocks","created_at":"2026-01-30T14:15:30.75968-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t4s4","title":"Add no-answer retry logic with backoff","description":"Implement retry logic when welcome call goes unanswered or voicemail. Retry schedule: 1 hour, 4 hours, next day at reasonable local time. Max 3 attempts. After max attempts, mark as 'welcome_call_pending' and allow manual trigger from admin. Don't retry if agent answers and hangs up (that's different from no-answer).\n\n**Context:** Agents are busy showing houses. We need persistence without being annoying. Retry at different times of day to catch them when available.\n\n**Testing Requirements:**\n- **Unit Tests:** Test retry scheduled on no-answer, test retry NOT scheduled on answered-then-hangup, test backoff timing is correct, test max retries respected, test local time calculation for 'next day' retry, test manual trigger works after max attempts exhausted","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:33.634311-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:33.634311-06:00","labels":["backend","deployment","integration","testing"],"dependencies":[{"issue_id":"test-e6t4s4","depends_on_id":"test-e6t4s3","type":"blocks","created_at":"2026-01-30T12:51:51.641313-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t4s4","depends_on_id":"test-e6t4","type":"parent-child","created_at":"2026-01-30T14:14:33.875422-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t4s4","depends_on_id":"test-e6t4s2","type":"blocks","created_at":"2026-01-30T14:15:30.955848-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t5","title":"Organization and team management UI","description":"Build settings pages for organization management: org settings (name, FUB API key, default settings), team CRUD (create, edit team leads, delete), agent management (view, activate, deactivate, remove, resend invite), and pending invitations list.\n\n**Context:** Brokers need a central place to manage their whole office. This is the admin hub where they configure RealHerd for their brokerage and monitor agent status.\n\n**Testing Requirements:**\n- **Unit Tests:** Form validation, FUB API key format check, action button state logic\n- **Integration Tests:** Settings save to Convex, team CRUD operations, agent status changes reflect in queries, invite actions work","design":"Create /settings/organization route with tabs: General (org name, FUB key validation), Teams (list, create, assign leads), Agents (filterable table with status, actions dropdown), Invitations (pending list with resend/revoke). Use shadcn/ui components. Apply permission checks - only broker role sees full settings.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":480,"created_at":"2026-01-30T14:13:29.295848-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:29.295848-06:00","labels":["backend","convex","database","frontend","scheduling","settings","sms","ui"],"dependencies":[{"issue_id":"test-e6t5","depends_on_id":"test-e6t4","type":"blocks","created_at":"2026-01-30T12:10:01.264173-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t5","depends_on_id":"test-e6t1","type":"blocks","created_at":"2026-01-30T12:51:51.928664-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t5","depends_on_id":"test-e6","type":"parent-child","created_at":"2026-01-30T14:13:29.441493-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t5","depends_on_id":"test-e6t2","type":"blocks","created_at":"2026-01-30T14:15:31.155643-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t5","depends_on_id":"test-e6t3","type":"blocks","created_at":"2026-01-30T14:15:31.350071-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t5s1","title":"Create organization settings page with General tab","description":"Create /settings/organization route with tabbed navigation using shadcn/ui Tabs component. Implement General tab with: org name field (editable), FUB API key input with validation indicator (test connection button that shows success/error state), and default settings section. Add permission guard - only users with 'broker' role can access this page (redirect others to dashboard).\n\n**Context:** This is the admin hub entry point. Brokers need to configure their FUB integration and basic org settings before anything else works. The permission check is critical for B2B security.\n\n**Testing Requirements:**\n- **Unit Tests:** Test permission guard redirects non-broker roles, test FUB API key validation with mock success/failure responses, test org name update form submission, test tab navigation state management","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:34.034412-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:34.034412-06:00","labels":["backend","database","frontend","performance","prisma","settings","testing","utility"],"dependencies":[{"issue_id":"test-e6t5s1","depends_on_id":"test-e6t5","type":"parent-child","created_at":"2026-01-30T14:14:34.181169-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t5s2","title":"Build Teams tab with CRUD functionality","description":"Add Teams tab to organization settings showing teams list in a table/card layout. Include: Create Team button opening modal with name and description fields, edit team functionality (inline or modal) with team lead assignment dropdown populated from org agents, delete team with confirmation dialog warning about agent reassignment. Use shadcn/ui Table, Dialog, and Select components.\n\n**Context:** Team structure is how brokerages organize their agents (typically 4-12 per team). Team leads need to be assignable so they can manage their subset of agents.\n\n**Testing Requirements:**\n- **Unit Tests:** Test team creation form validation, test team lead dropdown populates with org agents, test delete confirmation dialog prevents accidental deletion, test edit modal pre-fills existing team data, test empty state when no teams exist","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:34.350649-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:34.350649-06:00","labels":["backend","convex","frontend","optimization","settings","typescript"],"dependencies":[{"issue_id":"test-e6t5s2","depends_on_id":"test-e6t5","type":"parent-child","created_at":"2026-01-30T14:14:34.499744-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t5s2","depends_on_id":"test-e6t5s1","type":"blocks","created_at":"2026-01-30T14:15:31.553046-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t5s3","title":"Build Agents tab with filterable management table","description":"Add Agents tab displaying all organization agents in a filterable table. Columns: name, email, team, status (active/inactive/pending), last sync date. Include: search/filter by name or team, status filter dropdown, actions dropdown per row (view profile, activate, deactivate, remove from org, resend invite for pending). Use shadcn/ui Table with sorting, DropdownMenu for actions. Style status badges using brand colors (Sage for active, Amber for pending, muted for inactive).\n\n**Context:** Brokers managing 20-100 agents need quick visibility into who's active and ability to manage agent access. The filterable table is essential at scale.\n\n**Testing Requirements:**\n- **Unit Tests:** Test table renders agent data correctly, test search filter updates displayed rows, test status filter (all/active/inactive/pending), test action dropdown items appear based on agent status, test activate/deactivate toggles status optimistically, test remove shows confirmation dialog","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:34.673907-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:34.673907-06:00","labels":["backend","frontend","service","settings","setup","testing","twilio","validation"],"dependencies":[{"issue_id":"test-e6t5s3","depends_on_id":"test-e6t5s2","type":"blocks","created_at":"2026-01-30T12:51:53.073226-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t5s3","depends_on_id":"test-e6t5","type":"parent-child","created_at":"2026-01-30T14:14:34.818804-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t5s3","depends_on_id":"test-e6t5s1","type":"blocks","created_at":"2026-01-30T14:15:31.749934-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t5s4","title":"Build Invitations tab with pending invite management","description":"Add Invitations tab showing pending invitations list. Display: invitee email, invited date, invited by, expiration status. Actions per invitation: resend invite (with success toast), revoke/cancel invite (with confirmation). Include empty state with Shep mascot and 'No pending invitations' message. Add 'Invite Agent' button that opens invite modal (or links to invite flow from Epic 6.3).\n\n**Context:** Brokers need to track who hasn't accepted yet and follow up. Expired or unwanted invites need cleanup options.\n\n**Testing Requirements:**\n- **Unit Tests:** Test invitation list renders with correct data, test resend invite API call and success toast, test revoke confirmation dialog and removal from list, test empty state displays when no pending invitations, test expiration status calculation (expired vs valid)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:35.021916-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:35.021916-06:00","labels":["api","backend","frontend","iteration","react","settings","user-testing","validation"],"dependencies":[{"issue_id":"test-e6t5s4","depends_on_id":"test-e6t5s3","type":"blocks","created_at":"2026-01-30T12:10:02.250312-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t5s4","depends_on_id":"test-e6t5s2","type":"blocks","created_at":"2026-01-30T12:51:53.358746-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t5s4","depends_on_id":"test-e6t5","type":"parent-child","created_at":"2026-01-30T14:14:35.171676-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t5s4","depends_on_id":"test-e6t5s1","type":"blocks","created_at":"2026-01-30T14:15:32.025794-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t6","title":"Team settings overrides","description":"Implement settings inheritance where team-level settings can override organization defaults. Build UI for team leads to configure their team's settings (quiet hours, call frequency, etc.) within bounds set by organization.\n\n**Context:** Different teams within a brokerage may have different workflows. Luxury team might want different quiet hours than new construction team. This flexibility makes RealHerd work for diverse brokerages.\n\n**Testing Requirements:**\n- **Unit Tests:** Settings merge logic with all override combinations, null handling for unset overrides\n- **Integration Tests:** Team lead can save overrides, agent queries return correctly merged settings, broker can restrict override fields","design":"Settings inheritance chain: agent membership -\u003e team settings_overrides -\u003e org settings. Create getEffectiveSettings(agentId) function that merges up the chain. Team settings UI only shows fields broker has allowed overrides for. Include 'reset to org default' option per field.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:29.643661-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:29.643661-06:00","labels":["analytics","backend","cron","fallback","frontend","settings","sms"],"dependencies":[{"issue_id":"test-e6t6","depends_on_id":"test-e6t3","type":"blocks","created_at":"2026-01-30T12:10:02.50393-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t6","depends_on_id":"test-e6t2","type":"blocks","created_at":"2026-01-30T12:51:53.719261-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t6","depends_on_id":"test-e6","type":"parent-child","created_at":"2026-01-30T14:13:29.80487-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t6","depends_on_id":"test-e6t5","type":"blocks","created_at":"2026-01-30T14:15:32.226529-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t6s1","title":"Create getEffectiveSettings() function with inheritance chain","description":"Implement the settings inheritance chain function that merges settings from: agent membership -\u003e team settings_overrides -\u003e org settings. The function getEffectiveSettings(agentId) should traverse up the chain, with more specific settings (agent/team) overriding less specific ones (org). Handle cases where agent has no team, or team has no overrides.\n\n**Context:** This is the core logic that enables different teams to have different workflows. Luxury team might want different quiet hours than new construction team. The inheritance chain ensures consistency while allowing flexibility.\n\n**Testing Requirements:**\n- **Unit Tests:** Test getEffectiveSettings() with: agent with team overrides, agent without team, team with partial overrides (some fields only), org-only defaults, null/undefined handling at each level. Verify override precedence is correct (agent \u003e team \u003e org).","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:35.441878-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:35.441878-06:00","labels":["backend","core-logic","database","sms"],"dependencies":[{"issue_id":"test-e6t6s1","depends_on_id":"test-e6t6","type":"parent-child","created_at":"2026-01-30T14:14:35.571811-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t6s2","title":"Add settings_overrides field to team schema and API","description":"Extend the team database schema to include settings_overrides JSON field. Create API endpoints for team leads to GET and PUT their team's settings overrides. Validate that override values are within bounds set by organization (e.g., quiet hours can be adjusted but not disabled if org requires them).\n\n**Context:** Teams need persistent storage for their overrides, and team leads need API access to modify them. Bounds checking ensures brokers maintain control over critical policies.\n\n**Testing Requirements:**\n- **Unit Tests:** Test CRUD operations on settings_overrides, test bounds validation rejects out-of-range values, test partial updates preserve existing overrides, test null/empty overrides are handled correctly.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:35.752823-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:35.752823-06:00","labels":["api","backend","cron","database","sms"],"dependencies":[{"issue_id":"test-e6t6s2","depends_on_id":"test-e6t6","type":"parent-child","created_at":"2026-01-30T14:14:35.889146-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t6s2","depends_on_id":"test-e6t6s1","type":"blocks","created_at":"2026-01-30T14:15:32.427737-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t6s3","title":"Build team settings override UI for team leads","description":"Create settings interface for team leads showing only fields the broker has allowed overrides for. Include settings for quiet hours, call frequency, and other team-configurable options. Each field should show current effective value and whether it's inherited from org or custom. Use RealHerd design system: Warm Cream backgrounds (#FAF7F2), Terracotta accents (#C4704D), 12px border-radius cards.\n\n**Context:** Team leads need a clear UI to configure their team's workflow without accessing org-level settings. Only showing allowed override fields prevents confusion about what can be changed.\n\n**Testing Requirements:**\n- **Unit Tests:** Test UI renders only allowed override fields, test form validation matches API bounds, test display of inherited vs custom values, test loading states and error handling.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:36.098768-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:36.098768-06:00","labels":["api","backend","frontend","fub-integration","llm","ui"],"dependencies":[{"issue_id":"test-e6t6s3","depends_on_id":"test-e6t6s1","type":"blocks","created_at":"2026-01-30T12:51:54.782161-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t6s3","depends_on_id":"test-e6t6","type":"parent-child","created_at":"2026-01-30T14:14:36.275231-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t6s3","depends_on_id":"test-e6t6s2","type":"blocks","created_at":"2026-01-30T14:15:32.601933-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t6s4","title":"Implement 'Reset to org default' functionality per field","description":"Add per-field reset buttons that remove team overrides and revert to organization defaults. Include confirmation dialog for reset action. Update UI to visually distinguish overridden fields from inherited ones (e.g., subtle indicator icon). Ensure reset triggers immediate re-fetch of effective settings.\n\n**Context:** Team leads may experiment with settings and want to easily revert. Clear visual distinction between custom and inherited settings helps avoid confusion about what's been modified.\n\n**Testing Requirements:**\n- **Unit Tests:** Test reset removes specific field from overrides, test reset preserves other overrides, test confirmation dialog prevents accidental resets, test UI updates immediately after reset, test getEffectiveSettings returns org default after reset.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:36.477481-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:36.477481-06:00","labels":["analytics","backend","frontend","notifications","testing"],"dependencies":[{"issue_id":"test-e6t6s4","depends_on_id":"test-e6t6s2","type":"blocks","created_at":"2026-01-30T12:51:55.114969-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t6s4","depends_on_id":"test-e6t6","type":"parent-child","created_at":"2026-01-30T14:14:36.67522-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t6s4","depends_on_id":"test-e6t6s3","type":"blocks","created_at":"2026-01-30T14:15:32.845845-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t7","title":"Quiet hours enforcement with timezone support","description":"Implement quiet hours system that respects each agent's timezone. RealHerd should not call agents during their configured quiet hours. Apply to all outbound calls (debriefs, check-ins, welcome calls).\n\n**Context:** Agents work across timezones and have personal boundaries. Calling during quiet hours destroys trust and could violate regulations. This is table stakes for a calling product.\n\n**Testing Requirements:**\n- **Unit Tests:** Quiet hours calculation across timezone boundaries, DST handling, weekend logic\n- **Integration Tests:** Calls scheduled during quiet hours get deferred, next-window calculation correct, timezone changes apply immediately","design":"Store quiet_hours as {start: '21:00', end: '08:00', timezone: 'America/New_York'} on membership. Create isQuietHours(agentId) check using date-fns-tz. Apply check before any outbound call scheduling. If in quiet hours, schedule for next available window. Include weekend handling option.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":240,"created_at":"2026-01-30T14:13:29.984556-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:29.984556-06:00","labels":["backend","frontend","scheduling","settings","timezone","ui"],"dependencies":[{"issue_id":"test-e6t7","depends_on_id":"test-e6t3","type":"blocks","created_at":"2026-01-30T12:10:03.66898-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t7","depends_on_id":"test-e6t6","type":"blocks","created_at":"2026-01-30T12:10:03.852559-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t7","depends_on_id":"test-e6","type":"parent-child","created_at":"2026-01-30T14:13:30.143808-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t7","depends_on_id":"test-e6t1","type":"blocks","created_at":"2026-01-30T14:15:33.274091-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t7","depends_on_id":"test-e6t4","type":"blocks","created_at":"2026-01-30T14:15:33.477499-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t7s1","title":"Add quiet_hours field to membership schema and types","description":"Extend the membership model to include quiet_hours configuration. Add field with structure: {start: string (HH:mm), end: string (HH:mm), timezone: string (IANA), weekends_off?: boolean}. Create TypeScript types for QuietHoursConfig. Add database migration for the new field on the memberships table.\n\n**Context:** Quiet hours must be stored per agent (membership) to respect individual boundaries and timezones. This is foundational for all quiet hours enforcement.\n\n**Testing Requirements:**\n- **Unit Tests:** Test QuietHoursConfig type validation, test migration applies cleanly, test default values (null = no quiet hours configured), test invalid timezone strings are rejected","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:36.858535-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:36.858535-06:00","labels":["backend","database","frontend"],"dependencies":[{"issue_id":"test-e6t7s1","depends_on_id":"test-e6t7","type":"parent-child","created_at":"2026-01-30T14:14:36.99946-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t7s2","title":"Implement isQuietHours utility function with timezone handling","description":"Create isQuietHours(agentId: string) async function using date-fns-tz. Fetch agent's quiet_hours from membership. Convert current time to agent's timezone. Handle overnight spans (e.g., 21:00-08:00 crossing midnight). Handle weekends_off flag. Return {isQuiet: boolean, nextAvailableTime: Date | null}. Include edge cases: no quiet hours configured (return false), invalid timezone fallback.\n\n**Context:** This is the core logic that protects agents from being called during their personal time. Using date-fns-tz ensures proper DST handling.\n\n**Testing Requirements:**\n- **Unit Tests:** Test overnight span (21:00-08:00), test same-day span (12:00-13:00), test timezone conversion (call at 9am EST when agent is PST), test weekend handling, test DST transition edge cases, test null quiet_hours returns {isQuiet: false}, test nextAvailableTime calculation accuracy","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:37.20407-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:37.20407-06:00","labels":["backend","frontend"],"dependencies":[{"issue_id":"test-e6t7s2","depends_on_id":"test-e6t7","type":"parent-child","created_at":"2026-01-30T14:14:37.513986-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t7s2","depends_on_id":"test-e6t7s1","type":"blocks","created_at":"2026-01-30T14:15:33.665373-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t7s3","title":"Integrate quiet hours check into outbound call scheduling","description":"Add isQuietHours check before scheduling any outbound call (debriefs, check-ins, welcome calls). If currently in quiet hours, automatically schedule call for nextAvailableTime instead of immediate. Log when calls are delayed due to quiet hours. Apply to: scheduleDebrief(), scheduleCheckIn(), scheduleWelcomeCall() or equivalent call initiation functions.\n\n**Context:** This enforcement point ensures no outbound calls violate agent boundaries. Automatic rescheduling maintains the value (calls still happen) while respecting preferences.\n\n**Testing Requirements:**\n- **Unit Tests:** Test debrief scheduled during quiet hours gets rescheduled, test check-in respects quiet hours, test welcome call respects quiet hours, test call during available hours proceeds immediately, test rescheduled time matches nextAvailableTime, test quiet hours logging is captured","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:37.729564-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:37.729564-06:00","labels":["backend","frontend"],"dependencies":[{"issue_id":"test-e6t7s3","depends_on_id":"test-e6t7","type":"parent-child","created_at":"2026-01-30T14:14:37.858309-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t7s3","depends_on_id":"test-e6t7s2","type":"blocks","created_at":"2026-01-30T14:15:33.954325-06:00","created_by":"David Habedank"}]}
{"id":"test-e6t7s4","title":"Add quiet hours configuration UI for agent settings","description":"Create QuietHoursSettings component for agent profile/settings page. Include time pickers for start/end times (HH:mm format). Include timezone selector with common US timezones prioritized (America/New_York, America/Chicago, America/Denver, America/Los_Angeles). Add weekends_off toggle. Auto-detect timezone from browser as default. Save to membership record. Show preview: 'Calls paused 9:00 PM - 8:00 AM Eastern'.\n\n**Context:** Agents need a simple way to configure their quiet hours. Using the warm, approachable RealHerd design language (Terracotta accents, Warm Cream backgrounds, 8px border radius on inputs).\n\n**Testing Requirements:**\n- **Unit Tests:** Test time picker validation (start \u003c end handled for overnight), test timezone selector renders common zones, test weekends_off toggle state, test form submission saves to API, test preview text updates on change, test browser timezone detection","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:38.04553-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:38.04553-06:00","labels":["frontend","integration"],"dependencies":[{"issue_id":"test-e6t7s4","depends_on_id":"test-e6t7s3","type":"blocks","created_at":"2026-01-30T12:10:04.483611-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t7s4","depends_on_id":"test-e6t7","type":"parent-child","created_at":"2026-01-30T14:14:38.191437-06:00","created_by":"David Habedank"},{"issue_id":"test-e6t7s4","depends_on_id":"test-e6t7s1","type":"blocks","created_at":"2026-01-30T14:15:34.128544-06:00","created_by":"David Habedank"}]}
{"id":"test-e7","title":"Brokerage Dashboard \u0026 Reporting","description":"Build the comprehensive dashboard for brokers and team leads with activity feeds, pipeline visibility, agent performance tracking, alerts, and reporting capabilities.\n\n**Context:** Brokers pay for RealHerd to get visibility they've never had. The dashboard is where they see ROI - which agents are active, what's in the pipeline, who needs attention.\n\n**Testing Requirements:**\n- **Unit Tests:** Activity feed filtering, pipeline aggregation calculations, compliance percentage calculations\n- **Integration Tests:** Real-time Convex subscriptions, data aggregation queries, export generation\n- **Type Tests:** Dashboard data types, filter types, report types\n- **E2E Tests:** Broker logs in → views activity feed → filters by agent → drills into call → views transcript","acceptance_criteria":"- Activity feed shows all calls across org/team with filtering\n- Pipeline overview displays leads by stage and temperature\n- Agent leaderboard shows debrief activity and compliance\n- Stale lead alerts highlight leads needing attention\n- Check-in compliance report shows call completion rates\n- Search and filter by agent, date range, lead temperature\n- Agent detail view shows individual activity and stats\n- Export capabilities for reports (CSV)\n- Mobile-responsive design works on phones\n- Empty states feature Shep mascot with helpful guidance","status":"open","priority":1,"issue_type":"epic","owner":"david@habedank.org","estimated_minutes":3840,"created_at":"2026-01-30T14:13:15.299207-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:15.299207-06:00","labels":["automation","calendar","dashboard","multi-tenant","onboarding","organization","phase-7","reporting","scheduling","teams","visibility"],"dependencies":[{"issue_id":"test-e7","depends_on_id":"test-e1","type":"blocks","created_at":"2026-01-30T14:15:34.293471-06:00","created_by":"David Habedank"},{"issue_id":"test-e7","depends_on_id":"test-e6","type":"blocks","created_at":"2026-01-30T14:15:34.492573-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t1","title":"Build activity feed with real-time updates","description":"Create the main activity feed component that displays all debrief calls across the organization/team with real-time updates via Convex subscriptions. Include filtering by agent, date range, and call type.\n\n**Context:** The activity feed is the heart of the dashboard - it's how brokers finally get visibility into what their agents are doing. Every debrief call, every database check-in shows up here in real-time. This is the ROI brokers are paying for.\n\n**Testing Requirements:**\n- **Unit Tests:** Activity item component rendering, filter logic, date range calculations, pagination cursor handling\n- **Integration Tests:** Convex subscription updates when new debriefs arrive, filter combinations, scroll performance with 100+ items","design":"Use Convex's reactive queries for real-time updates. Implement infinite scroll with cursor-based pagination. Filter state should be URL-synced for shareable views. Each activity item shows agent name, lead name, call type, timestamp, and key outcome. Use warm cream background with white cards per brand guidelines.","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:30.381263-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:30.381263-06:00","labels":["backend","convex","dashboard","database","frontend","google-calendar","oauth","schema"],"dependencies":[{"issue_id":"test-e7t1","depends_on_id":"test-e7","type":"parent-child","created_at":"2026-01-30T14:13:30.50793-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t1s1","title":"Create Convex schema and queries for activity feed","description":"Define the Convex schema for debrief activities (if not already covered by earlier tasks) and create reactive queries that fetch activities with filtering support. Implement: 1) Query that returns activities sorted by timestamp desc, 2) Support for filtering by agent ID, date range (startDate/endDate), and call type (debrief, check-in, etc.), 3) Cursor-based pagination returning 20 items per page with hasMore flag. Query should join with agents table to include agent name and with leads/contacts to include lead name.\n\n**Context:** Convex's reactive queries are the backbone of real-time updates - when a new debrief call completes, all connected dashboards see it instantly without polling. This is the 'magic' that makes brokers feel connected to their team.\n\n**Testing Requirements:**\n- **Unit Tests:** Test query returns activities in desc timestamp order, test filtering by single agent ID, test date range filtering (activities only within range), test call type filter, test pagination returns correct page size and hasMore flag, test empty state returns empty array not error","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:38.381372-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:38.381372-06:00","labels":["backend","convex","database"],"dependencies":[{"issue_id":"test-e7t1s1","depends_on_id":"test-e7t1","type":"parent-child","created_at":"2026-01-30T14:14:38.531414-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t1s2","title":"Build ActivityFeedItem component with brand styling","description":"Create the individual activity item card component following RealHerd brand guidelines. Each card shows: agent name (semibold), lead name, call type badge, relative timestamp ('2 min ago'), and key outcome summary (1-2 lines). Use white card on warm cream background (#FAF7F2 page, #FFFFFF card), 12px border-radius, 1px solid #E8DFD4 border, subtle box-shadow. Include terracotta (#C4704D) accent for call type badges. Text in Deep Walnut (#3D3029). Handle loading skeleton state.\n\n**Context:** These cards are what brokers scan dozens of times per day. Clean visual hierarchy lets them quickly identify which agent, which lead, and whether action is needed - all at a glance.\n\n**Testing Requirements:**\n- **Unit Tests:** Test renders all required fields (agent name, lead name, call type, timestamp, outcome), test applies correct brand colors (verify class names or inline styles), test loading skeleton renders when isLoading prop true, test truncates long outcome text appropriately, test relative timestamp formatting (seconds, minutes, hours, days)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:38.738742-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:38.738742-06:00","labels":["backend","frontend","security","typescript","ui"],"dependencies":[{"issue_id":"test-e7t1s2","depends_on_id":"test-e7t1","type":"parent-child","created_at":"2026-01-30T14:14:38.936935-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t1s2","depends_on_id":"test-e7t1s1","type":"blocks","created_at":"2026-01-30T14:15:34.665286-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t1s3","title":"Implement ActivityFeed container with infinite scroll and real-time subscription","description":"Create the main ActivityFeed component that: 1) Subscribes to Convex reactive query for real-time updates, 2) Implements infinite scroll using Intersection Observer to load more when user scrolls near bottom, 3) Manages filter state (agent, dateRange, callType) synced to URL search params for shareable views, 4) Shows loading state on initial load and when fetching more, 5) Handles empty state with friendly message (opportunity for Shep mascot). Use useQuery from Convex React for subscription.\n\n**Context:** URL-synced filters mean a broker can filter to 'Sarah's calls this week' and share that exact view with their operations manager. Real-time updates mean they see new calls appear without refreshing - this feels like magic compared to their old spreadsheet workflow.\n\n**Testing Requirements:**\n- **Unit Tests:** Test Convex subscription triggers re-render on new data, test infinite scroll triggers loadMore when sentinel enters viewport, test filter changes update URL params, test URL params on mount populate filter state, test empty state renders when no activities, test loading spinner shows during initial fetch","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:39.115519-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:39.115519-06:00","labels":["backend","convex","frontend","security"],"dependencies":[{"issue_id":"test-e7t1s3","depends_on_id":"test-e7t1","type":"parent-child","created_at":"2026-01-30T14:14:39.248061-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t1s3","depends_on_id":"test-e7t1s1","type":"blocks","created_at":"2026-01-30T14:15:34.856352-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t1s3","depends_on_id":"test-e7t1s2","type":"blocks","created_at":"2026-01-30T14:15:35.044721-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t1s4","title":"Add filter controls UI and verify end-to-end real-time behavior","description":"Build the filter bar component with: 1) Agent dropdown (populated from team members), 2) Date range picker (today, this week, this month, custom), 3) Call type multi-select (debrief, check-in, all). Style per brand: inputs with #FDFCFA background, #E8DFD4 border, 8px radius, terracotta focus ring. Integrate with ActivityFeed. Then manually test the full flow: create a test activity via Convex dashboard or seed script, verify it appears in feed within 1-2 seconds, verify filters work correctly, verify pagination loads more items, verify shared URL restores filter state.\n\n**Context:** The filter bar turns this from a firehose into a useful tool. Brokers can focus on one agent's activity when doing a 1:1, or see the whole team during Monday meetings. The end-to-end verification ensures the real-time promise actually works.\n\n**Testing Requirements:**\n- **Unit Tests:** Test agent dropdown populates from team data, test date range picker emits correct date values, test call type selector supports multi-select, test filter changes propagate to parent component, test clear filters resets all to default","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:39.601377-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:39.601377-06:00","labels":["api","backend","convex","frontend","react","testing","ui"],"dependencies":[{"issue_id":"test-e7t1s4","depends_on_id":"test-e7t1s1","type":"blocks","created_at":"2026-01-30T12:10:05.425749-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t1s4","depends_on_id":"test-e7t1s2","type":"blocks","created_at":"2026-01-30T12:51:58.22711-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t1s4","depends_on_id":"test-e7t1","type":"parent-child","created_at":"2026-01-30T14:14:39.761969-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t1s4","depends_on_id":"test-e7t1s3","type":"blocks","created_at":"2026-01-30T14:15:35.298895-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t1s5","title":"Integration test and verify complete OAuth flow","description":"Create end-to-end test scenarios: 1) Fresh connection flow - click connect, complete Google OAuth, verify CalendarConnection created with active status, 2) Token refresh - simulate expired token, make calendar API call, verify auto-refresh works, 3) Revoked access - simulate Google returning invalid_grant on refresh, verify connection marked as error and UI shows reconnect prompt. Test with real Google OAuth (staging credentials) in development.\n\n**Context:** OAuth flows have many edge cases. Integration testing catches issues that unit tests miss - wrong redirect URIs, scope mismatches, token format changes.\n\n**Testing Requirements:**\n- **Unit Tests:** Test complete flow with mocked Google responses for: successful auth, token refresh, revoked refresh token (invalid_grant error), network timeout, invalid client credentials","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:50:06.569769-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:59:07.735735-06:00","labels":["integration","testing"],"dependencies":[{"issue_id":"test-e7t1s5","depends_on_id":"test-e7t1","type":"parent-child","created_at":"2026-01-30T12:50:06.732426-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t1s5","depends_on_id":"test-e7t1s3","type":"blocks","created_at":"2026-01-30T12:51:58.635156-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t1s5","depends_on_id":"test-e7t1s4","type":"blocks","created_at":"2026-01-30T12:51:58.945352-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:59:07.735735-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e7t2","title":"Create pipeline overview with stage visualization","description":"Build pipeline visualization showing leads grouped by stage (New, Contacted, Engaged, Appointment Set, etc.) and colored by temperature (hot/warm/cold). Include counts per stage and click-through to filtered lead lists.\n\n**Context:** Brokers need to see their pipeline at a glance - how many leads at each stage, where the hot ones are, where deals are getting stuck. This replaces the spreadsheets and guesswork they've been using.\n\n**Testing Requirements:**\n- **Unit Tests:** Stage grouping logic, temperature color mapping, count calculations, empty state rendering\n- **Integration Tests:** Pipeline data aggregation queries, click-through navigation to filtered views, real-time count updates","design":"Horizontal funnel or kanban-style visualization. Use brand colors - terracotta for hot leads, warm sand for warm, sky blue for cold. Show counts prominently. Clicking a stage filters to those leads. Consider small Shep illustration for empty pipeline states.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:30.693456-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:30.693456-06:00","labels":["api","backend","convex","dashboard","frontend","fub-integration","settings"],"dependencies":[{"issue_id":"test-e7t2","depends_on_id":"test-e7","type":"parent-child","created_at":"2026-01-30T14:13:30.830664-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t2","depends_on_id":"test-e7t1","type":"blocks","created_at":"2026-01-30T14:15:35.511628-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t2s1","title":"Create pipeline stage types and data structures","description":"Define TypeScript types for pipeline stages (New, Contacted, Engaged, Appointment Set, etc.) and temperature classifications (hot/warm/cold). Create interfaces for stage counts, lead groupings, and click-through filter parameters. Map temperature to brand colors: terracotta (#C4704D) for hot, warm sand (#E8DFD4) for warm, sky blue (#7BA3C4) for cold.\n\n**Context:** Type-safe foundations ensure the visualization correctly represents pipeline data and enables proper filtering when users click through to lead lists.\n\n**Testing Requirements:**\n- **Unit Tests:** Test that all stage enum values are defined, temperature-to-color mapping returns correct hex values, stage count interfaces accept valid data and reject malformed input","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:39.935596-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:39.935596-06:00","labels":["backend","frontend","types","ui"],"dependencies":[{"issue_id":"test-e7t2s1","depends_on_id":"test-e7t2","type":"parent-child","created_at":"2026-01-30T14:14:40.080529-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t2s2","title":"Build pipeline stage card component with temperature indicators","description":"Create a reusable StageCard component showing: stage name, lead count (prominent per design notes), and visual breakdown by temperature using brand colors. Use card styling from PRD (white background, 1px solid #E8DFD4 border, 12px radius, subtle shadow). Include click handler prop for filtering. Typography: use semibold for counts, regular for labels per type scale.\n\n**Context:** Each stage column/card is the core unit of the visualization - needs to clearly show volume and temperature distribution at a glance.\n\n**Testing Requirements:**\n- **Unit Tests:** Test StageCard renders count correctly, displays temperature breakdown with correct colors, fires onClick with stage filter params, handles zero-count gracefully","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:40.340701-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:40.340701-06:00","labels":["api","backend","component","frontend"],"dependencies":[{"issue_id":"test-e7t2s2","depends_on_id":"test-e7t2","type":"parent-child","created_at":"2026-01-30T14:14:40.4813-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t2s2","depends_on_id":"test-e7t2s1","type":"blocks","created_at":"2026-01-30T14:15:35.720109-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t2s3","title":"Implement horizontal pipeline visualization layout","description":"Create PipelineOverview component arranging StageCards in horizontal funnel/kanban layout. Show progression left-to-right (New → Contacted → Engaged → Appointment Set → etc.). Use 24px spacing between cards per PRD spacing scale. Make responsive - stack on mobile, scroll horizontal on tablet, full display on desktop. Wire click handlers to navigate to filtered lead list routes.\n\n**Context:** The horizontal layout mirrors how brokers mentally model their sales funnel - leads flow from left (new) to right (converted), making bottlenecks visually obvious.\n\n**Testing Requirements:**\n- **Unit Tests:** Test PipelineOverview renders all stages in correct order, clicking stage navigates with correct filter params, responsive breakpoints trigger correct layouts, handles loading and error states","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:40.653882-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:40.653882-06:00","labels":["backend","component","database","frontend","service"],"dependencies":[{"issue_id":"test-e7t2s3","depends_on_id":"test-e7t2","type":"parent-child","created_at":"2026-01-30T14:14:40.923139-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t2s3","depends_on_id":"test-e7t2s2","type":"blocks","created_at":"2026-01-30T14:15:35.920009-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t2s4","title":"Add empty state with Shep illustration","description":"Create EmptyPipelineState component shown when no leads exist. Include Shep mascot illustration (simple geometric shapes, cream/terracotta/walnut palette per brand guidelines). Add encouraging message like 'Your pipeline is ready - let's get some leads moving!' with CTA to add first lead. Follow Shep guidelines: friendly for empty states, minimal/geometric style.\n\n**Context:** New brokers or those starting fresh need friendly onboarding, not a blank void. Shep softens the empty state and encourages action per brand personality.\n\n**Testing Requirements:**\n- **Unit Tests:** Test EmptyPipelineState renders when lead count is zero, CTA button navigates to lead creation, Shep illustration loads correctly, component doesn't render when leads exist","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:41.138149-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:41.138149-06:00","labels":["auth","backend","component","frontend","testing","ux"],"dependencies":[{"issue_id":"test-e7t2s4","depends_on_id":"test-e7t2","type":"parent-child","created_at":"2026-01-30T14:14:41.272748-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t2s4","depends_on_id":"test-e7t2s3","type":"blocks","created_at":"2026-01-30T14:15:36.117461-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t3","title":"Implement agent leaderboard and performance tracking","description":"Build agent leaderboard showing debrief completion rates, call activity, and compliance metrics. Include sortable columns and visual indicators for agents needing attention.\n\n**Context:** Team leads need to know who's participating and who's slacking. The leaderboard gamifies compliance while giving actionable data - which agents are doing debriefs, who has stale leads, who needs a conversation.\n\n**Testing Requirements:**\n- **Unit Tests:** Sorting logic, compliance rate calculations, threshold-based styling, date range filtering\n- **Integration Tests:** Aggregated agent metrics queries, real-time updates when agents complete debriefs, performance with 50+ agents","design":"Table with sortable columns: agent name, debriefs this week, compliance rate, active leads, last activity. Use success green for high performers, warning amber for agents below threshold. Link agent names to detail view. No literal leaderboard rankings - focus on metrics, not competition.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:31.03084-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:31.03084-06:00","labels":["backend","clerk","convex","core-feature","dashboard","frontend","onboarding","scheduling","telnyx"],"dependencies":[{"issue_id":"test-e7t3","depends_on_id":"test-e7t2","type":"blocks","created_at":"2026-01-30T12:52:00.317222-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t3","depends_on_id":"test-e7","type":"parent-child","created_at":"2026-01-30T14:13:31.166092-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t3","depends_on_id":"test-e7t1","type":"blocks","created_at":"2026-01-30T14:15:36.326647-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t3s1","title":"Create TypeScript types and API route for agent performance metrics","description":"Define TypeScript interfaces for agent performance data (AgentMetrics with fields: agentId, agentName, debriefCount, complianceRate, activeLeads, lastActivityDate). Create Next.js API route at /api/agents/metrics that aggregates data from debriefs and FUB contacts. Calculate compliance rate as debriefs completed / expected debriefs. Return sorted array of agent metrics.\n\n**Context:** The leaderboard needs structured data. Compliance rate is the key metric brokers care about - it shows who's actually using the system vs. who's ignoring it.\n\n**Testing Requirements:**\n- **Unit Tests:** Test AgentMetrics type validation, test compliance rate calculation edge cases (0 expected, partial completion), test API returns correct shape, test sorting by different fields, mock FUB data for consistent test results","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:41.455926-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:41.455926-06:00","labels":["api","backend","database"],"dependencies":[{"issue_id":"test-e7t3s1","depends_on_id":"test-e7t3","type":"parent-child","created_at":"2026-01-30T14:14:41.585986-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t3s2","title":"Build sortable data table component with column headers","description":"Create AgentLeaderboard component using shadcn/ui Table with sortable columns: Agent Name, Debriefs This Week, Compliance Rate (%), Active Leads, Last Activity. Implement client-side sorting with ascending/descending toggle. Use Deep Walnut (#3D3029) for headers, proper spacing from brand guidelines (16px standard). Agent names should be clickable links (href to detail view, can be placeholder route initially).\n\n**Context:** Team leads need to quickly scan and sort to find who needs attention. The table is the primary interface - it must be scannable and responsive to sorting.\n\n**Testing Requirements:**\n- **Unit Tests:** Test table renders all columns, test sorting toggles correctly for each column type (string, number, date), test empty state renders, test agent name links have correct href, test with mock data of 10+ agents","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:41.81083-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:41.81083-06:00","labels":["api","backend","frontend","resend","scheduling","telnyx","ui"],"dependencies":[{"issue_id":"test-e7t3s2","depends_on_id":"test-e7t3","type":"parent-child","created_at":"2026-01-30T14:14:42.17106-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t3s2","depends_on_id":"test-e7t3s1","type":"blocks","created_at":"2026-01-30T14:15:36.512199-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t3s3","title":"Add visual performance indicators with brand colors","description":"Implement visual indicators for agent performance thresholds: Success Green (#5B8A5B) for agents at/above 80% compliance, Warning Amber (#D4A84B) for agents 50-79% compliance, Error Coral (#C45D4D) for agents below 50%. Apply to compliance rate cell and optionally as subtle row highlight. Add visual indicator (dot or icon) for agents with no activity in 7+ days. Per PRD: focus on metrics not rankings - no position numbers or podium styling.\n\n**Context:** Visual cues let team leads spot problems instantly without reading every number. The amber threshold catches people who are slipping before they completely disengage.\n\n**Testing Requirements:**\n- **Unit Tests:** Test correct color applied at boundary values (49%, 50%, 79%, 80%), test stale activity indicator appears for 7+ day old lastActivity, test no ranking numbers displayed, verify hex colors match brand palette exactly","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T14:14:42.480211-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:42.480211-06:00","labels":["backend","clerk","frontend","scheduling","telnyx","ui"],"dependencies":[{"issue_id":"test-e7t3s3","depends_on_id":"test-e7t3","type":"parent-child","created_at":"2026-01-30T14:14:42.614519-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t3s3","depends_on_id":"test-e7t3s2","type":"blocks","created_at":"2026-01-30T14:15:36.706611-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t3s4","title":"Integrate leaderboard into dashboard and verify end-to-end","description":"Add AgentLeaderboard component to broker dashboard page. Connect to /api/agents/metrics endpoint with SWR or React Query for data fetching. Add loading skeleton state matching table dimensions. Include refresh capability. Test full flow: API returns data → table renders → sorting works → colors display correctly. Verify responsive behavior on tablet/desktop.\n\n**Context:** The leaderboard is where brokers see ROI - it needs to load fast and feel responsive. This is the payoff of the dashboard epic.\n\n**Testing Requirements:**\n- **Unit Tests:** Test loading state displays skeleton, test error state handled gracefully, test data refresh works, integration test with mocked API response, visual regression test for table layout","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:42.800141-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:42.800141-06:00","labels":["backend","frontend","integration","scheduling","telnyx","voice"],"dependencies":[{"issue_id":"test-e7t3s4","depends_on_id":"test-e7t3","type":"parent-child","created_at":"2026-01-30T14:14:42.942927-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t3s4","depends_on_id":"test-e7t3s3","type":"blocks","created_at":"2026-01-30T14:15:36.904341-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t4","title":"Build stale lead alerts and check-in compliance reports","description":"Create alerting system for stale leads (no contact in X days) and check-in compliance reports showing call completion rates by agent and time period.\n\n**Context:** The whole point of RealHerd is preventing leads from going cold. Stale lead alerts are proactive warnings before deals die. Compliance reports show whether agents are actually picking up when RealHerd calls.\n\n**Testing Requirements:**\n- **Unit Tests:** Stale lead threshold calculations, compliance percentage logic, alert priority sorting, date comparison functions\n- **Integration Tests:** Scheduled job that identifies stale leads, compliance data aggregation across date ranges, alert dismissal persistence","design":"Alerts panel with filterable list of stale leads, days since contact, and quick actions. Compliance report shows scheduled vs completed check-ins as percentage. Include Shep with encouraging message when compliance is high. Use warning amber for stale leads, error coral for critically overdue.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:31.352921-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:31.352921-06:00","labels":["alerts","backend","convex","dashboard","frontend","reliability","sms","teams","telnyx"],"dependencies":[{"issue_id":"test-e7t4","depends_on_id":"test-e7t3","type":"blocks","created_at":"2026-01-30T12:52:01.485826-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t4","depends_on_id":"test-e7","type":"parent-child","created_at":"2026-01-30T14:13:31.503085-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t4","depends_on_id":"test-e7t2","type":"blocks","created_at":"2026-01-30T14:15:37.124666-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t4s1","title":"Create stale lead detection service and data types","description":"Build TypeScript types and service for identifying stale leads. Define StaleLead interface with contactId, leadName, agentId, agentName, daysSinceContact, lastContactDate, lastContactType, priority level (warning/critical). Create staleness thresholds (e.g., 7 days = warning amber, 14 days = critical coral per PRD). Implement getStaleLeads() function that queries contacts with no activity within threshold periods.\n\n**Context:** The foundation for stale lead alerts - need clean data model and detection logic before building UI. PRD emphasizes 'preventing leads from going cold' as RealHerd's core value proposition.\n\n**Testing Requirements:**\n- **Unit Tests:** Test staleness calculation with various lastContactDate values, verify warning vs critical threshold classification, test edge cases (contact today, contact exactly on threshold, null lastContact), test filtering by agent","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:43.134013-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:43.134013-06:00","labels":["backend","core-logic","database"],"dependencies":[{"issue_id":"test-e7t4s1","depends_on_id":"test-e7t4","type":"parent-child","created_at":"2026-01-30T14:14:43.286393-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t4s2","title":"Build check-in compliance calculation service","description":"Create compliance data types and calculation logic. Define ComplianceReport interface with agentId, agentName, scheduledCheckIns, completedCheckIns, compliancePercentage, timePeriod. Implement getComplianceReport() that calculates scheduled vs completed check-ins by agent and time period (daily, weekly, monthly). Add aggregation for team-level compliance rates.\n\n**Context:** Compliance reports show whether agents answer when RealHerd calls. This is critical visibility for brokers to see who's engaged with the system and who might need coaching.\n\n**Testing Requirements:**\n- **Unit Tests:** Test compliance percentage calculation (0%, 50%, 100% cases), test aggregation across multiple agents, test time period filtering (day/week/month), verify handling of agents with zero scheduled check-ins","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:43.47126-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:43.47126-06:00","labels":["api","backend","core-logic"],"dependencies":[{"issue_id":"test-e7t4s2","depends_on_id":"test-e7t4s1","type":"blocks","created_at":"2026-01-30T12:52:01.783261-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t4s2","depends_on_id":"test-e7t4","type":"parent-child","created_at":"2026-01-30T14:14:43.897107-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t4s3","title":"Build StaleLeadAlerts panel component with filtering and quick actions","description":"Create StaleLeadAlerts React component displaying filterable list of stale leads. Show lead name, agent name, days since contact, last contact type. Use warning amber (#D4A84B) for stale, error coral (#C45D4D) for critically overdue per PRD. Add filter by agent, sort by staleness. Include quick action buttons: 'Schedule Call', 'View Contact'. Use warm cream background (#FAF7F2) with white cards (#FFFFFF) and 12px border radius per PRD.\n\n**Context:** This is the proactive warning system that prevents deals from dying. Quick actions let managers immediately address stale leads without navigating away.\n\n**Testing Requirements:**\n- **Unit Tests:** Test rendering with empty/populated stale lead lists, verify correct color coding for warning vs critical thresholds, test filter functionality, test quick action button callbacks, verify accessibility of alert indicators","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:44.140057-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:44.140057-06:00","labels":["backend","dashboard","frontend","integration","ui"],"dependencies":[{"issue_id":"test-e7t4s3","depends_on_id":"test-e7t4s2","type":"blocks","created_at":"2026-01-30T12:52:02.033477-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t4s3","depends_on_id":"test-e7t4","type":"parent-child","created_at":"2026-01-30T14:14:44.307179-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t4s3","depends_on_id":"test-e7t4s1","type":"blocks","created_at":"2026-01-30T14:15:37.328648-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t4s4","title":"Build ComplianceReport component with Shep encouragement","description":"Create ComplianceReport React component showing scheduled vs completed check-ins as percentage by agent. Display as table or card grid with agent name, completion rate (progress bar), period stats. Include Shep mascot with encouraging message when compliance is high (\u003e80%): geometric, minimal style using cream/terracotta/walnut palette per PRD. Use success green (#5B8A5B) for high compliance, warning amber for medium, error coral for low. Add time period selector (daily/weekly/monthly).\n\n**Context:** Brokers need to see if agents are actually picking up when RealHerd calls. Shep adds delight for positive states without being overused - only appears for genuine wins.\n\n**Testing Requirements:**\n- **Unit Tests:** Test rendering with various compliance percentages, verify Shep appears only above threshold, test time period switching, verify correct color coding by compliance level, test empty state handling","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:44.48523-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:44.48523-06:00","labels":["backend","dashboard","feature","frontend","integration","ui"],"dependencies":[{"issue_id":"test-e7t4s4","depends_on_id":"test-e7t4s3","type":"blocks","created_at":"2026-01-30T12:52:02.32904-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t4s4","depends_on_id":"test-e7t4","type":"parent-child","created_at":"2026-01-30T14:14:44.615513-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t4s4","depends_on_id":"test-e7t4s2","type":"blocks","created_at":"2026-01-30T14:15:37.522422-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t5","title":"Add agent detail view with individual stats","description":"Create detailed agent profile view showing individual activity history, lead assignments, debrief transcripts, compliance trends over time, and performance compared to team averages.\n\n**Context:** When a team lead clicks an agent's name, they need the full picture - not just today's numbers but trends over time. Is this agent improving? What leads are they working? What did they actually say in debriefs?\n\n**Testing Requirements:**\n- **Unit Tests:** Trend calculation over time periods, transcript formatting, comparison to team average calculations\n- **Integration Tests:** Agent data aggregation queries, transcript loading and expansion, chart rendering with real data","design":"Single-agent dashboard layout with activity timeline, lead list, and trend charts. Show 30/60/90 day trends for key metrics. Include recent debrief summaries with expandable transcripts. Use monospace font (JetBrains Mono) for transcript text per brand guidelines.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T14:13:31.719389-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:31.719389-06:00","labels":["backend","convex","dashboard","frontend","permissions","security","settings","ui"],"dependencies":[{"issue_id":"test-e7t5","depends_on_id":"test-e7t1","type":"blocks","created_at":"2026-01-30T12:52:02.533174-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t5","depends_on_id":"test-e7t2","type":"blocks","created_at":"2026-01-30T12:52:02.809454-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t5","depends_on_id":"test-e7t4","type":"blocks","created_at":"2026-01-30T12:52:03.049378-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t5","depends_on_id":"test-e7","type":"parent-child","created_at":"2026-01-30T14:13:31.866248-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t5","depends_on_id":"test-e7t3","type":"blocks","created_at":"2026-01-30T14:15:37.720503-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t5s1","title":"Create agent detail page route and data fetching","description":"Set up the /dashboard/agents/[id] route with server-side data fetching for agent profile, activity history, lead assignments, debrief transcripts, and performance metrics. Fetch 30/60/90 day historical data for trend calculations. Include team average metrics for comparison.\n\n**Context:** The foundation - we need the route and all the data before we can display anything. Fetching historical data upfront enables the trend charts and comparison features that team leads need to evaluate agent performance over time.\n\n**Testing Requirements:**\n- **Unit Tests:** Test data fetching for valid agent ID, test 404 handling for invalid agent, test date range calculations for 30/60/90 day periods, test team average calculation logic, test data transformation for chart-ready format","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:44.776508-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:44.776508-06:00","labels":["backend","frontend","security","ui"],"dependencies":[{"issue_id":"test-e7t5s1","depends_on_id":"test-e7t5","type":"parent-child","created_at":"2026-01-30T14:14:44.917928-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t5s2","title":"Build agent profile header and stats summary","description":"Create the top section showing agent name, profile info, and key stat cards. Display current metrics alongside 30/60/90 day trend indicators. Use Warm Cream (#FAF7F2) background with white cards per brand guidelines. Show comparison badges (above/below team average) using Soft Sage (#A8B5A0) for positive and Warning Amber (#D4A84B) for needs attention.\n\n**Context:** First impression when viewing an agent - the header sets context and the stats cards give immediate insight into whether this agent is performing well or needs attention, with trend context.\n\n**Testing Requirements:**\n- **Unit Tests:** Test stat card rendering with various metric values, test trend indicator logic (up/down/neutral), test comparison badge display logic (above/below average), test responsive layout at different breakpoints","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:45.106378-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:45.106378-06:00","labels":["backend","database","frontend","security","ui"],"dependencies":[{"issue_id":"test-e7t5s2","depends_on_id":"test-e7t5","type":"parent-child","created_at":"2026-01-30T14:14:45.321977-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t5s2","depends_on_id":"test-e7t5s1","type":"blocks","created_at":"2026-01-30T14:15:37.968176-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t5s3","title":"Implement activity timeline and lead assignments list","description":"Build the activity timeline showing recent agent actions (calls, debriefs, lead updates) with timestamps. Create lead assignments table showing current leads with status, last contact, and next action. Use Deep Walnut (#3D3029) for primary text, secondary color (#6B5D52) for timestamps.\n\n**Context:** Team leads need to see what the agent is actually doing day-to-day and which leads they're responsible for. This answers 'what are they working on?' and 'do they have bandwidth?'\n\n**Testing Requirements:**\n- **Unit Tests:** Test timeline rendering with various activity types, test chronological ordering, test lead list sorting and filtering, test empty state display with Shep mascot, test pagination for long lists","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:45.498646-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:45.498646-06:00","labels":["admin","api","backend","frontend","ui"],"dependencies":[{"issue_id":"test-e7t5s3","depends_on_id":"test-e7t5s2","type":"blocks","created_at":"2026-01-30T12:10:12.549305-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t5s3","depends_on_id":"test-e7t5","type":"parent-child","created_at":"2026-01-30T14:14:45.626204-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t5s3","depends_on_id":"test-e7t5s1","type":"blocks","created_at":"2026-01-30T14:15:38.19634-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t5s4","title":"Create debrief transcripts section with expandable view","description":"Build the debrief history section showing recent debrief summaries as cards. Each card shows date, lead name, AI-generated summary, and compliance status. Implement expandable/collapsible full transcript view using JetBrains Mono font for transcript text per brand guidelines. Style with card border-radius 12px and Warm Sand (#E8DFD4) borders.\n\n**Context:** This is unique to RealHerd - actually seeing what agents said in debriefs. Team leads can verify quality of follow-ups and spot coaching opportunities. The monospace transcript makes it feel like a proper record.\n\n**Testing Requirements:**\n- **Unit Tests:** Test transcript expand/collapse toggle, test summary truncation logic, test compliance badge display, test JetBrains Mono font application on transcript text, test loading state for transcript content, test empty state when no debriefs exist","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:45.817555-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:45.817555-06:00","labels":["backend","frontend","integration","testing"],"dependencies":[{"issue_id":"test-e7t5s4","depends_on_id":"test-e7t5s2","type":"blocks","created_at":"2026-01-30T12:52:03.952965-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t5s4","depends_on_id":"test-e7t5s3","type":"blocks","created_at":"2026-01-30T12:52:04.24083-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t5s4","depends_on_id":"test-e7t5","type":"parent-child","created_at":"2026-01-30T14:14:45.952438-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t5s4","depends_on_id":"test-e7t5s1","type":"blocks","created_at":"2026-01-30T14:15:38.392093-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t5s5","title":"Add trend charts for performance visualization","description":"Implement line/area charts showing key metrics over 30/60/90 day periods with toggle controls. Show metrics like debrief completion rate, response time, lead engagement alongside team average lines. Use Terracotta (#C4704D) for agent line, Sky (#7BA3C4) for team average, with Warm Sand (#E8DFD4) grid lines.\n\n**Context:** Trends tell the story that point-in-time stats can't. Is this agent improving or declining? How do they stack up against the team over time? This is where team leads find actionable coaching insights.\n\n**Testing Requirements:**\n- **Unit Tests:** Test chart rendering with sample data, test time period toggle (30/60/90 days), test team average overlay display, test tooltip interactions, test responsive chart sizing, test empty/insufficient data handling","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:46.140645-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:46.140645-06:00","labels":["frontend"],"dependencies":[{"issue_id":"test-e7t5s5","depends_on_id":"test-e7t5","type":"parent-child","created_at":"2026-01-30T14:14:46.290917-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t5s5","depends_on_id":"test-e7t5s1","type":"blocks","created_at":"2026-01-30T14:15:38.604914-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t5s5","depends_on_id":"test-e7t5s2","type":"blocks","created_at":"2026-01-30T14:15:38.977224-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t6","title":"Implement search, export, and mobile responsiveness","description":"Add global search across agents and leads, CSV export for all reports, and ensure entire dashboard works on mobile devices with appropriate responsive layouts.\n\n**Context:** Brokers check their dashboard from their phones constantly. They also need to pull data for team meetings or upload to other systems. Search lets them find specific agents or leads quickly.\n\n**Testing Requirements:**\n- **Unit Tests:** Search indexing and matching logic, CSV generation formatting, responsive breakpoint logic\n- **Integration Tests:** Full-text search across Convex data, CSV download in browser, mobile touch interactions and navigation","design":"Search bar in header with typeahead results for agents and leads. Export buttons on each report section generating CSV. Mobile layout collapses sidebar, stacks cards vertically, uses bottom navigation. Test on actual phones - 'responsive' in dev tools isn't enough.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:32.044267-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:32.044267-06:00","labels":["export","frontend","integration","mobile","search","testing","verification"],"dependencies":[{"issue_id":"test-e7t6","depends_on_id":"test-e7t3","type":"blocks","created_at":"2026-01-30T12:52:04.819718-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t6","depends_on_id":"test-e7","type":"parent-child","created_at":"2026-01-30T14:13:32.217977-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t6","depends_on_id":"test-e7t4","type":"blocks","created_at":"2026-01-30T14:15:39.215286-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t6","depends_on_id":"test-e7t5","type":"blocks","created_at":"2026-01-30T14:15:39.442164-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t6s1","title":"Build global search with typeahead for agents and leads","description":"Create search bar component in dashboard header with typeahead functionality. Search should query both agents and leads, showing categorized results (Agents section, Leads section). Use debounced input (300ms) to prevent excessive API calls. Display agent results with name and status indicator, lead results with name and associated agent. Clicking result navigates to agent detail or lead detail view. Include keyboard navigation (arrow keys, enter to select, escape to close).\n\n**Context:** Brokers need to quickly find specific agents or leads without scrolling through lists - especially useful on mobile when they're checking on someone specific before a call or meeting.\n\n**Testing Requirements:**\n- **Unit Tests:** Test debounce delays search execution, test search returns categorized results, test empty state messaging, test keyboard navigation (up/down/enter/escape), test result click navigation, test search with special characters sanitized","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:46.537799-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:46.537799-06:00","labels":["backend","feature","frontend","testing"],"dependencies":[{"issue_id":"test-e7t6s1","depends_on_id":"test-e7t6","type":"parent-child","created_at":"2026-01-30T14:14:46.673431-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t6s2","title":"Add CSV export functionality to all report sections","description":"Add export button to each dashboard report section (agent performance, pipeline overview, activity metrics). Button generates CSV with appropriate headers matching displayed data. Include timestamp in filename (e.g., 'agent-performance-2024-01-15.csv'). Handle large datasets by generating in background with progress indicator. CSV should include all data, not just visible rows if paginated.\n\n**Context:** Brokers pull data for team meetings and upload to other systems. They need clean CSV files they can open in Excel or Google Sheets without reformatting.\n\n**Testing Requirements:**\n- **Unit Tests:** Test CSV generation with correct headers, test filename format includes date, test special characters escaped properly in CSV, test empty data generates valid empty CSV with headers, test export button disabled during generation","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:46.873421-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:46.873421-06:00","labels":["backend","feature","frontend","testing"],"dependencies":[{"issue_id":"test-e7t6s2","depends_on_id":"test-e7t6s1","type":"blocks","created_at":"2026-01-30T12:52:05.827496-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t6s2","depends_on_id":"test-e7t6","type":"parent-child","created_at":"2026-01-30T14:14:46.99885-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t6s3","title":"Implement mobile-responsive layout with collapsible sidebar and bottom navigation","description":"Convert dashboard to mobile-responsive layout. Below 768px: sidebar collapses to hamburger menu, cards stack vertically in single column, implement bottom navigation bar for primary sections (Home, Agents, Pipeline, Reports). Use CSS container queries where beneficial. Ensure touch targets are minimum 44x44px. Tables convert to card-based layout on mobile. Search bar moves into hamburger menu or becomes icon that expands.\n\n**Context:** Brokers check their dashboard from phones constantly. 'Responsive' in Chrome DevTools isn't enough - the layout needs to be actually usable on a phone screen with touch interaction.\n\n**Testing Requirements:**\n- **Unit Tests:** Test sidebar collapses at breakpoint, test bottom nav renders on mobile, test touch targets meet 44px minimum, test cards stack vertically, test table-to-card conversion, test search icon expands to full search","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":120,"created_at":"2026-01-30T14:14:47.194293-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:47.194293-06:00","labels":["backend","frontend","mobile","testing"],"dependencies":[{"issue_id":"test-e7t6s3","depends_on_id":"test-e7t6s1","type":"blocks","created_at":"2026-01-30T12:52:06.083982-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t6s3","depends_on_id":"test-e7t6","type":"parent-child","created_at":"2026-01-30T14:14:47.328272-06:00","created_by":"David Habedank"}]}
{"id":"test-e7t6s4","title":"Test on actual mobile devices and fix touch/interaction issues","description":"Test entire dashboard on actual iOS and Android devices (not just simulators). Verify: touch scrolling is smooth, no horizontal overflow causing accidental swipes, bottom nav doesn't conflict with iOS home indicator or Android nav bar, charts are readable and interactive on touch, export downloads work on mobile browsers, search typeahead works with mobile keyboard. Document and fix any issues found.\n\n**Context:** Mobile browser behavior differs significantly from desktop responsive simulation. Safari iOS has unique quirks with fixed positioning, Android Chrome handles touch events differently. Real device testing catches issues DevTools misses.\n\n**Testing Requirements:**\n- **Unit Tests:** Test safe-area-inset CSS variables applied for notched devices, test no horizontal scroll on any viewport, test touch event handlers don't conflict with native gestures","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:47.504644-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:47.504644-06:00","labels":["backend","frontend","mobile","testing"],"dependencies":[{"issue_id":"test-e7t6s4","depends_on_id":"test-e7t6s2","type":"blocks","created_at":"2026-01-30T12:52:06.624114-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t6s4","depends_on_id":"test-e7t6","type":"parent-child","created_at":"2026-01-30T14:14:47.619782-06:00","created_by":"David Habedank"},{"issue_id":"test-e7t6s4","depends_on_id":"test-e7t6s3","type":"blocks","created_at":"2026-01-30T14:15:40.255507-06:00","created_by":"David Habedank"}]}
{"id":"test-e8","title":"Production Polish \u0026 Launch Readiness","description":"Final polish including onboarding flows, error handling, loading states, settings pages, help integration, performance optimization, and production deployment configuration.\n\n**Context:** A rough product won't get adoption. This epic ensures new brokerages can go live within 30 minutes with a polished, professional experience throughout.\n\n**Testing Requirements:**\n- **Unit Tests:** Form validation, error message generation, settings persistence\n- **Integration Tests:** Full onboarding flow, help widget integration, monitoring webhook delivery\n- **Type Tests:** Settings types, onboarding state types, error types\n- **E2E Tests:** New broker complete setup in \u003c30 minutes, agent onboarding from invite to first call","acceptance_criteria":"- Guided onboarding flow for new organizations (setup wizard)\n- Agent onboarding flow with clear expectations setting\n- All error states have helpful recovery messages\n- Loading states throughout the application\n- Settings pages complete (org, team, personal preferences)\n- Help/support integration (chat widget or help docs)\n- Performance optimized (\u003c3s initial load, real-time updates smooth)\n- Production deployment on Vercel with proper environment config\n- Monitoring and alerting configured for call failures\n- RealHerd brand consistently applied (colors, typography, Shep usage)","status":"open","priority":1,"issue_type":"epic","owner":"david@habedank.org","estimated_minutes":3360,"created_at":"2026-01-30T14:13:15.468461-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:15.468461-06:00","labels":["accountability","check-ins","core-feature","dashboard","phase-8","polish","production","reporting","visibility"],"dependencies":[{"issue_id":"test-e8","depends_on_id":"test-e1","type":"blocks","created_at":"2026-01-30T14:15:40.894164-06:00","created_by":"David Habedank"},{"issue_id":"test-e8","depends_on_id":"test-e2","type":"blocks","created_at":"2026-01-30T14:15:41.504229-06:00","created_by":"David Habedank"},{"issue_id":"test-e8","depends_on_id":"test-e3","type":"blocks","created_at":"2026-01-30T14:15:41.746431-06:00","created_by":"David Habedank"},{"issue_id":"test-e8","depends_on_id":"test-e4","type":"blocks","created_at":"2026-01-30T14:15:42.015519-06:00","created_by":"David Habedank"},{"issue_id":"test-e8","depends_on_id":"test-e5","type":"blocks","created_at":"2026-01-30T14:15:42.257688-06:00","created_by":"David Habedank"},{"issue_id":"test-e8","depends_on_id":"test-e6","type":"blocks","created_at":"2026-01-30T14:15:42.569599-06:00","created_by":"David Habedank"},{"issue_id":"test-e8","depends_on_id":"test-e7","type":"blocks","created_at":"2026-01-30T14:15:42.848915-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t1","title":"Implement Guided Setup Wizard for New Organizations","description":"Create a multi-step onboarding wizard that guides brokerage owners through initial RealHerd configuration. Steps include: FUB API connection, call settings (hours, frequency), team structure setup, and first agent invite. Should feel like a trusted partner walking them through setup, not a complex configuration tool.\n\n**Context:** Target is 30-minute go-live. Brokerage owners managing 20-100 agents need quick setup to see value. First impressions determine adoption - a confusing setup kills momentum before agents ever get a call.\n\n**Testing Requirements:**\n- **Unit Tests:** Step validation logic, wizard state persistence, FUB connection test, call schedule validation\n- **Integration Tests:** Complete wizard flow end-to-end, resume abandoned wizard, FUB API handshake, Clerk organization creation","design":"Use shadcn/ui Stepper or custom progress indicator. Store wizard state in Convex to allow resume if abandoned. Each step validates before proceeding. Final step triggers first agent invite flow. Apply RealHerd brand: Warm Cream backgrounds, Terracotta CTAs, Shep mascot for encouragement at milestones.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":480,"created_at":"2026-01-30T14:13:32.422834-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:32.422834-06:00","labels":["backend","convex","dashboard","database","frontend","onboarding","real-time","ux"],"dependencies":[{"issue_id":"test-e8t1","depends_on_id":"test-e8","type":"parent-child","created_at":"2026-01-30T14:13:32.552408-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t1s1","title":"Create wizard state schema and persistence layer","description":"Define Convex schema for wizard state that tracks: current step, completion status per step, all collected data (FUB credentials, call settings, team structure), timestamps, and abandonment tracking. Create mutations for saving/resuming wizard state. Schema should support partial saves so users can resume if they abandon mid-setup.\n\n**Context:** PRD requires 30-minute go-live and resume capability. Storing state in Convex allows brokerages to start setup on mobile, finish on desktop, or return days later without losing progress. This foundation enables all subsequent wizard functionality.\n\n**Testing Requirements:**\n- **Unit Tests:** Test createWizardState mutation, test updateWizardStep mutation, test getWizardState query returns correct data, test partial update doesn't overwrite other fields, test abandonment timestamp tracking","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:48.01379-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:48.01379-06:00","labels":["backend","convex","database","real-time"],"dependencies":[{"issue_id":"test-e8t1s1","depends_on_id":"test-e8t1","type":"parent-child","created_at":"2026-01-30T14:14:48.475642-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t1s2","title":"Build wizard shell with step navigation and progress indicator","description":"Create WizardShell component with shadcn/ui Stepper or custom progress indicator showing 4 steps: 1) FUB Connection, 2) Call Settings, 3) Team Structure, 4) First Agent Invite. Apply RealHerd brand: Warm Cream (#FAF7F2) background, progress bar in Terracotta (#C4704D), Deep Walnut (#3D3029) text. Include Shep mascot appearing at step completions with encouraging messages. Shell manages step state, validates before proceeding, and syncs with Convex persistence.\n\n**Context:** First impressions determine adoption. The wizard shell sets the tone - should feel like 'a trusted partner walking them through setup, not a complex configuration tool.' Shep mascot softens the experience and celebrates milestones per brand guidelines.\n\n**Testing Requirements:**\n- **Unit Tests:** Test step navigation forward/back, test validation blocks proceeding on incomplete step, test progress indicator reflects current step, test Shep appears on step completion, test state syncs to Convex on step change","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:48.766086-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:48.766086-06:00","labels":["backend","component","database","frontend","ui"],"dependencies":[{"issue_id":"test-e8t1s2","depends_on_id":"test-e8t1","type":"parent-child","created_at":"2026-01-30T14:14:48.975729-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t1s2","depends_on_id":"test-e8t1s1","type":"blocks","created_at":"2026-01-30T14:15:43.271576-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t1s3","title":"Implement individual wizard step components","description":"Create 4 step components: 1) FUBConnectionStep - API key input with validation and test connection button; 2) CallSettingsStep - business hours picker, call frequency selector, timezone; 3) TeamStructureStep - org name, team count estimate, optional team names; 4) FirstAgentInviteStep - email input for first agent with preview of invite. Each step validates inputs before allowing proceed, shows inline errors with Error Coral (#C45D4D), success with Soft Sage (#A8B5A0). Use form inputs with Warm Sand borders, Terracotta focus states per brand.\n\n**Context:** Each step must validate before proceeding to ensure clean data. Target users are brokerage owners managing 20-100 agents who need quick, confident setup. Clear validation and feedback prevents frustration and support tickets.\n\n**Testing Requirements:**\n- **Unit Tests:** Test FUB API key validation format, test connection test success/failure states, test call settings save correct format, test team structure accepts valid inputs, test agent email validation, test each step's canProceed logic","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":120,"created_at":"2026-01-30T14:14:49.172241-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:49.172241-06:00","labels":["backend","database","frontend","state-management","ui","ux"],"dependencies":[{"issue_id":"test-e8t1s3","depends_on_id":"test-e8t1s1","type":"blocks","created_at":"2026-01-30T12:10:14.286235-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t1s3","depends_on_id":"test-e8t1","type":"parent-child","created_at":"2026-01-30T14:14:49.326392-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t1s3","depends_on_id":"test-e8t1s2","type":"blocks","created_at":"2026-01-30T14:15:43.675063-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t1s4","title":"Wire wizard completion to trigger first agent invite flow","description":"On final step completion: 1) Mark wizard as complete in Convex, 2) Create organization record with all collected settings, 3) Trigger agent invite flow for the email entered in step 4, 4) Redirect to dashboard with success toast and Shep celebration. Handle edge cases: duplicate org names, invalid FUB credentials discovered late, invite email failures. Show completion screen with 'You're ready to go!' message and clear next steps.\n\n**Context:** The wizard must seamlessly hand off to the main product experience. A confusing transition after setup 'kills momentum before agents ever get a call.' Success state should feel like an achievement, reinforcing the 30-minute go-live promise was kept.\n\n**Testing Requirements:**\n- **Unit Tests:** Test organization creation with all wizard data, test invite triggered on completion, test redirect to correct dashboard route, test error handling for failed invite, test wizard marked complete prevents re-entry, test celebration UI renders","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:49.548068-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:49.548068-06:00","labels":["backend","frontend","integration","performance","types"],"dependencies":[{"issue_id":"test-e8t1s4","depends_on_id":"test-e8t1s2","type":"blocks","created_at":"2026-01-30T12:10:14.475041-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t1s4","depends_on_id":"test-e8t1","type":"parent-child","created_at":"2026-01-30T14:14:49.704074-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t1s4","depends_on_id":"test-e8t1s3","type":"blocks","created_at":"2026-01-30T14:15:44.058398-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t2","title":"Build Agent Onboarding Flow with Expectations Setting","description":"Create the agent-facing onboarding experience that sets clear expectations about RealHerd calls. Includes: welcome screen explaining what to expect, call preferences (best times, phone number confirmation), sample call preview, and explicit opt-in. Agents should understand this is their CRM manager, not surveillance.\n\n**Context:** Agents who don't understand what RealHerd does will ignore calls or feel surveilled. Clear expectation-setting from PRD: agents need to know calls are brief (2-5 min), what questions to expect, and that it helps THEM not just management.\n\n**Testing Requirements:**\n- **Unit Tests:** Phone number validation, preference persistence, opt-in state management\n- **Integration Tests:** Full agent invite flow from email to completed onboarding, preferences sync to call scheduling system","design":"Single-page flow with clear sections, not multi-step wizard (agents have less patience). Include audio preview of Shep's voice. Warm, approachable copy per brand guidelines. Mobile-optimized since agents are often on phones.","status":"open","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:32.941756-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:32.941756-06:00","labels":["agent-experience","algorithm","backend","convex","dashboard","frontend","fub-api","onboarding","visualization"],"dependencies":[{"issue_id":"test-e8t2","depends_on_id":"test-e8","type":"parent-child","created_at":"2026-01-30T14:13:33.08477-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t2","depends_on_id":"test-e8t1","type":"blocks","created_at":"2026-01-30T14:15:44.352309-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t2s1","title":"Create onboarding page layout and content sections","description":"Build the single-page agent onboarding component with responsive layout. Include sections for: welcome/introduction, what to expect from calls, call preferences form area, and opt-in section. Use brand colors (Warm Cream #FAF7F2 background, Deep Walnut #3D3029 text). Mobile-first design since agents are often on phones. Use card-based sections with proper spacing (24px between sections per brand guidelines).\n\n**Context:** Single-page flow was specifically chosen over multi-step wizard because agents have less patience than brokerage owners. The layout needs to feel approachable and warm, not corporate or surveillance-like.\n\n**Testing Requirements:**\n- **Unit Tests:** Test component renders all sections, test responsive breakpoints (mobile/tablet/desktop), test proper spacing and color values match brand guidelines, test accessibility (heading hierarchy, ARIA labels)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:49.909624-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:49.909624-06:00","labels":["backend","convex","frontend","queries","types","ui"],"dependencies":[{"issue_id":"test-e8t2s1","depends_on_id":"test-e8t2","type":"parent-child","created_at":"2026-01-30T14:14:50.074747-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t2s2","title":"Implement welcome content and Shep audio preview","description":"Create the welcome section with warm, approachable copy explaining RealHerd calls. Key messaging: calls are brief (2-5 minutes), this helps THEM manage their CRM not surveillance, Shep is their AI CRM manager. Include audio preview component with play button so agents can hear Shep's voice style before their first call. Use Shep mascot illustration for friendly empty state. Copy tone: 'Hey [name], ready for a quick debrief?' style per brand voice guidelines.\n\n**Context:** Agents who don't understand what RealHerd does will ignore calls or feel surveilled. The audio preview builds familiarity and trust before the first real call. Shep's role per brand guidelines: guide through onboarding, soften potentially intimidating moments.\n\n**Testing Requirements:**\n- **Unit Tests:** Test welcome message renders with agent name, test audio player controls (play/pause/seek), test Shep illustration displays correctly, test copy matches brand voice (no 'Howdy partner' style), test audio preview loads without blocking page","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:50.376105-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:50.376105-06:00","labels":["algorithm","backend","content","frontend","react","visualization"],"dependencies":[{"issue_id":"test-e8t2s2","depends_on_id":"test-e8t2","type":"parent-child","created_at":"2026-01-30T14:14:50.515905-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t2s2","depends_on_id":"test-e8t2s1","type":"blocks","created_at":"2026-01-30T14:15:44.580868-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t2s3","title":"Build call preferences form with phone confirmation","description":"Create the preferences section with: phone number display/confirmation (from invite), best times to call selector (morning/afternoon/evening checkboxes or time range picker), timezone auto-detection with override option. Use brand input styles (#FDFCFA background, #E8DFD4 border, Terracotta focus ring). Include helpful microcopy explaining preferences can be changed later.\n\n**Context:** Agents need control over when they're called to feel respected, not surveilled. Phone confirmation prevents wrong-number issues and builds trust that their info is correct.\n\n**Testing Requirements:**\n- **Unit Tests:** Test phone number displays correctly from invite data, test time preference selection persists, test timezone detection works and can be overridden, test form validation for phone number format, test input focus states match brand guidelines","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:50.695021-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:50.695021-06:00","labels":["algorithm","backend","charts","forms","frontend","recharts"],"dependencies":[{"issue_id":"test-e8t2s3","depends_on_id":"test-e8t2s2","type":"blocks","created_at":"2026-01-30T12:52:09.16317-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t2s3","depends_on_id":"test-e8t2","type":"parent-child","created_at":"2026-01-30T14:14:50.855472-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t2s3","depends_on_id":"test-e8t2s1","type":"blocks","created_at":"2026-01-30T14:15:44.823125-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t2s4","title":"Implement explicit opt-in and submission flow","description":"Create the opt-in section with clear checkbox and consent language. Primary CTA button (Terracotta #C4704D per brand) with text like 'I'm ready for my first call'. On submit: save preferences to agent record, mark agent as onboarded, show success state with Shep celebration. Handle loading and error states gracefully. Redirect to agent dashboard or show next steps after completion.\n\n**Context:** Explicit opt-in is legally important and builds psychological buy-in. The success moment with Shep celebration creates positive association before the first actual call. Error recovery should use Shep to soften frustration per brand guidelines.\n\n**Testing Requirements:**\n- **Unit Tests:** Test opt-in checkbox is required before submit, test submit button disabled state when incomplete, test API call to save preferences, test success state displays with Shep, test error handling shows friendly message, test redirect after completion, test loading state during submission","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:51.0605-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:51.0605-06:00","labels":["api-integration","backend","frontend","integration","navigation"],"dependencies":[{"issue_id":"test-e8t2s4","depends_on_id":"test-e8t2","type":"parent-child","created_at":"2026-01-30T14:14:51.220066-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t2s4","depends_on_id":"test-e8t2s2","type":"blocks","created_at":"2026-01-30T14:15:45.079218-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t2s4","depends_on_id":"test-e8t2s3","type":"blocks","created_at":"2026-01-30T14:15:45.403656-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t3","title":"Implement Comprehensive Error States and Loading States","description":"Audit all user-facing screens and add: (1) helpful error messages with recovery actions for all failure modes, (2) skeleton loaders for data-fetching states, (3) optimistic updates where appropriate, (4) empty states with Shep mascot. Every error should tell users what happened and what to do next.\n\n**Context:** A rough product won't get adoption. Users encountering silent failures or confusing errors will lose trust. PRD emphasizes RealHerd should feel like a 'trusted partner' - partners don't leave you hanging when things go wrong.\n\n**Testing Requirements:**\n- **Unit Tests:** Error boundary components, retry logic, skeleton component rendering\n- **Integration Tests:** Simulate API failures and verify user sees recovery options, test offline/reconnection behavior","design":"Error messages use Error Coral (#C45D4D) with clear recovery CTAs. Empty states feature Shep in minimal geometric style. Loading skeletons match card dimensions. Use react-query/Convex subscription states. Follow brand voice: warm but professional, acknowledge context.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:33.265041-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:33.265041-06:00","labels":["backend","convex","dashboard","frontend","llm","metrics","polish","telnyx","ux","voice"],"dependencies":[{"issue_id":"test-e8t3","depends_on_id":"test-e8t2","type":"blocks","created_at":"2026-01-30T12:52:10.078978-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t3","depends_on_id":"test-e8","type":"parent-child","created_at":"2026-01-30T14:13:33.408633-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t3s1","title":"Create Reusable Error State Components with Recovery Actions","description":"Build a set of reusable error components that follow brand guidelines. Create: (1) ErrorMessage component using Error Coral (#C45D4D) with clear recovery CTAs, (2) ErrorBoundary wrapper for catching React errors, (3) NetworkError component for connectivity issues, (4) ApiError component for server errors. Each component should display what happened and provide actionable next steps (retry button, contact support link, or navigation options). Use Deep Walnut (#3D3029) for text, Terracotta (#C4704D) for retry/action buttons. Voice should be warm but professional - acknowledge the problem without being robotic.\n\n**Context:** PRD emphasizes RealHerd should feel like a 'trusted partner' - partners don't leave you hanging when things go wrong. Every error needs to tell users what happened and what to do next.\n\n**Testing Requirements:**\n- **Unit Tests:** Test ErrorMessage renders with correct colors and CTA, test ErrorBoundary catches and displays child errors, test retry button onClick fires callback, test different error types render appropriate messages","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:51.41586-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:51.41586-06:00","labels":["backend","frontend","types","ux","voice"],"dependencies":[{"issue_id":"test-e8t3s1","depends_on_id":"test-e8t3","type":"parent-child","created_at":"2026-01-30T14:14:51.565583-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t3s2","title":"Implement Skeleton Loaders Matching Card Dimensions","description":"Create skeleton loading components that match the actual UI dimensions to prevent layout shift. Build: (1) SkeletonCard matching the card design (12px border-radius, proper padding), (2) SkeletonText for text placeholders, (3) SkeletonAvatar for profile images, (4) SkeletonTable for list views. Use Warm Sand (#E8DFD4) for skeleton background with subtle pulse animation. Integrate with react-query/Convex loading states. Create skeleton variants for: contact cards, agent list items, debrief transcript areas, dashboard stats.\n\n**Context:** Loading states should feel intentional and polished, not jarring. Matching skeleton dimensions to real content prevents the 'jumpy' feeling that erodes user trust.\n\n**Testing Requirements:**\n- **Unit Tests:** Test SkeletonCard renders with correct dimensions and border-radius, test pulse animation applies, test skeleton variants match their real component dimensions, test integration with useQuery isLoading state","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:51.745334-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:51.745334-06:00","labels":["ai","api","backend","frontend","security","ux","voice"],"dependencies":[{"issue_id":"test-e8t3s2","depends_on_id":"test-e8t3s1","type":"blocks","created_at":"2026-01-30T12:52:10.347355-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t3s2","depends_on_id":"test-e8t3","type":"parent-child","created_at":"2026-01-30T14:14:51.910707-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t3s3","title":"Create Empty States with Shep Mascot Illustrations","description":"Design and implement empty state components featuring Shep the sheepdog mascot. Create empty states for: (1) No contacts yet, (2) No recent debriefs, (3) No search results, (4) No pending tasks. Shep should be rendered in minimal geometric style using brand colors (Warm Cream, Terracotta, Deep Walnut) - 2D flat illustration with no outlines. Each empty state includes: Shep illustration, friendly message in brand voice, and a primary CTA button (Terracotta #C4704D) to guide users to take action. Messages should be warm but professional - 'No contacts yet. Let's connect your CRM to get started.' not 'Howdy partner!'\n\n**Context:** Per PRD, Shep's role includes empty states to provide a 'friendly face when there's no data' and should 'soften frustrating moments'. Empty states are opportunities to guide users toward value.\n\n**Testing Requirements:**\n- **Unit Tests:** Test each empty state renders Shep SVG, test CTA buttons have correct onClick handlers, test empty states appear when data arrays are empty, test messages match brand voice guidelines","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:52.123083-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:52.123083-06:00","labels":["backend","component","dashboard","database","design","frontend","ux","voice"],"dependencies":[{"issue_id":"test-e8t3s3","depends_on_id":"test-e8t3s1","type":"blocks","created_at":"2026-01-30T12:10:16.416918-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t3s3","depends_on_id":"test-e8t3s2","type":"blocks","created_at":"2026-01-30T12:52:10.59665-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t3s3","depends_on_id":"test-e8t3","type":"parent-child","created_at":"2026-01-30T14:14:52.324118-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t3s4","title":"Audit All Screens and Integrate Error/Loading/Empty States","description":"Systematically audit every user-facing screen and integrate the new components. Screens to audit: (1) Dashboard - add loading skeletons for stats and recent activity, empty state for new users, (2) Contacts list - skeleton loaders, empty state with 'sync CRM' CTA, error state for FUB API failures, (3) Debrief flow - loading state for transcription, error recovery for voice failures, (4) Agent management - skeleton table, empty state for no agents, (5) Settings/integrations - loading states for API checks. Add optimistic updates for: marking tasks complete, updating contact notes, agent status changes. Ensure react-query/Convex subscription error states are handled with ErrorMessage component.\n\n**Context:** This is the integration pass that ensures no screen is left with silent failures or confusing states. Every interaction should feel polished and professional to support the 30-minute onboarding goal.\n\n**Testing Requirements:**\n- **Unit Tests:** Test each screen renders appropriate skeleton during loading, test error states appear on API failures (mock network errors), test empty states appear with empty data, test optimistic updates show immediately then reconcile with server response","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":120,"created_at":"2026-01-30T14:14:52.586241-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:52.586241-06:00","labels":["backend","frontend","integration","testing","ux","voice"],"dependencies":[{"issue_id":"test-e8t3s4","depends_on_id":"test-e8t3","type":"parent-child","created_at":"2026-01-30T14:14:52.736127-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t3s4","depends_on_id":"test-e8t3s1","type":"blocks","created_at":"2026-01-30T14:15:45.603538-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t3s4","depends_on_id":"test-e8t3s2","type":"blocks","created_at":"2026-01-30T14:15:45.846011-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t3s4","depends_on_id":"test-e8t3s3","type":"blocks","created_at":"2026-01-30T14:15:46.077321-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t4","title":"Build Settings Pages (Organization, Team, Personal Preferences)","description":"Create complete settings UI: (1) Organization settings - business hours, default call frequency, FUB connection management, billing; (2) Team settings - member management, role assignments; (3) Personal preferences - notification settings, timezone, call preferences. All with proper permission checks.\n\n**Context:** Brokers need control over their organization. Team leads need team management. Agents need personal preferences. Without settings, users feel trapped and support burden increases.\n\n**Testing Requirements:**\n- **Unit Tests:** Form validation, permission checks, settings persistence\n- **Integration Tests:** Settings changes propagate to call scheduling, FUB reconnection flow, role-based UI visibility","design":"Tab-based navigation within settings. Use shadcn/ui form components. Dangerous actions (disconnect FUB, remove members) require confirmation modals. Apply card-based layout with Warm Sand borders. Respect Clerk role permissions for what's visible/editable.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T14:13:33.628547-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:33.628547-06:00","labels":["backend","convex","dashboard","export","frontend","fub-api","permissions","reporting","settings"],"dependencies":[{"issue_id":"test-e8t4","depends_on_id":"test-e8t3","type":"blocks","created_at":"2026-01-30T12:52:11.278034-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t4","depends_on_id":"test-e8","type":"parent-child","created_at":"2026-01-30T14:13:33.850265-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t4s1","title":"Create settings page layout with tab navigation","description":"Build the main settings page structure at /settings with tab-based navigation between Organization, Team, and Personal sections. Use shadcn/ui Tabs component with proper routing (query params or nested routes). Apply Warm Cream (#FAF7F2) background with card-based layout using white (#FFFFFF) cards and Warm Sand (#E8DFD4) borders. Implement permission-based tab visibility using Clerk roles - only show Organization tab to admins, Team tab to admins/team leads.\n\n**Context:** Central hub for all settings. Tab structure keeps related settings grouped while allowing quick switching. Permission checks at navigation level prevent confusion from seeing tabs users can't actually use.\n\n**Testing Requirements:**\n- **Unit Tests:** Test tab rendering based on user role (admin sees all 3 tabs, team lead sees Team + Personal, agent sees only Personal). Test tab switching updates content. Test URL reflects active tab for bookmarkability.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:52.919496-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:52.919496-06:00","labels":["backend","database","frontend","settings"],"dependencies":[{"issue_id":"test-e8t4s1","depends_on_id":"test-e8t4","type":"parent-child","created_at":"2026-01-30T14:14:53.081972-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t4s2","title":"Build Organization settings section","description":"Create Organization settings tab content with sections for: (1) Business hours configuration (start/end time, timezone, working days); (2) Default call frequency settings; (3) FUB connection management showing connection status with disconnect option requiring confirmation modal; (4) Billing section placeholder linking to Stripe portal. Use shadcn/ui form components with proper validation. Apply Terracotta (#C4704D) for primary actions, Error Coral (#C45D4D) for dangerous actions like disconnect.\n\n**Context:** Brokers need control over org-wide defaults. FUB disconnect is dangerous (breaks sync) so must require explicit confirmation. Billing handled externally but needs clear access point.\n\n**Testing Requirements:**\n- **Unit Tests:** Test business hours form validation (end \u003e start). Test FUB disconnect shows confirmation modal before action. Test only admin role can view/edit these settings. Test form submission calls correct API endpoints.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":120,"created_at":"2026-01-30T14:14:53.308574-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:53.308574-06:00","labels":["backend","components","frontend","integration","settings"],"dependencies":[{"issue_id":"test-e8t4s2","depends_on_id":"test-e8t4","type":"parent-child","created_at":"2026-01-30T14:14:53.437352-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t4s2","depends_on_id":"test-e8t4s1","type":"blocks","created_at":"2026-01-30T14:15:46.361843-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t4s3","title":"Build Team settings section with member management","description":"Create Team settings tab with: (1) Team member list showing name, email, role, status; (2) Role assignment dropdown (admin, team_lead, agent) with save action; (3) Remove member action with confirmation modal ('Remove [name] from team?'). Display members in card-based list. Use Sky (#7BA3C4) for info elements, Success Green (#5B8A5B) for active status. Implement Clerk role checks - only admins can change roles, team leads can view but not modify.\n\n**Context:** Team leads need visibility into their team. Admins need to manage roles. Member removal is significant action affecting their access, requiring confirmation to prevent accidents.\n\n**Testing Requirements:**\n- **Unit Tests:** Test member list renders all team members. Test role dropdown only enabled for admin users. Test remove member shows confirmation before API call. Test team lead sees read-only view. Test role change persists after save.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:53.614347-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:53.614347-06:00","labels":["backend","frontend","reporting","settings"],"dependencies":[{"issue_id":"test-e8t4s3","depends_on_id":"test-e8t4s2","type":"blocks","created_at":"2026-01-30T12:52:12.113219-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t4s3","depends_on_id":"test-e8t4","type":"parent-child","created_at":"2026-01-30T14:14:53.83188-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t4s3","depends_on_id":"test-e8t4s1","type":"blocks","created_at":"2026-01-30T14:15:46.581789-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t4s4","title":"Build Personal preferences section","description":"Create Personal preferences tab with: (1) Notification settings - toggles for call reminders, weekly digest, system alerts; (2) Timezone selector dropdown with common timezones; (3) Call preferences - preferred call times, max calls per day. All fields auto-save or have explicit save button with Success Green (#5B8A5B) confirmation toast. Available to all authenticated users regardless of role. Use Inter font at Body size (16px) for form labels.\n\n**Context:** Every user needs personal control over their experience. Timezone critical for accurate scheduling. Notification preferences reduce alert fatigue. These settings improve daily usability and reduce support requests.\n\n**Testing Requirements:**\n- **Unit Tests:** Test all form fields save to user preferences API. Test timezone dropdown includes major US timezones. Test notification toggles persist state. Test preferences load correctly on page mount. Test any authenticated user can access this tab.","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:54.052154-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:54.052154-06:00","labels":["backend","export","frontend","settings","testing"],"dependencies":[{"issue_id":"test-e8t4s4","depends_on_id":"test-e8t4s3","type":"blocks","created_at":"2026-01-30T12:52:12.402802-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t4s4","depends_on_id":"test-e8t4","type":"parent-child","created_at":"2026-01-30T14:14:54.181293-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t4s4","depends_on_id":"test-e8t4s1","type":"blocks","created_at":"2026-01-30T14:15:46.798814-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t5","title":"Production Deployment Configuration and Performance Optimization","description":"Configure production deployment: Vercel environment setup with proper env vars, Convex production deployment, Clerk production instance, Telnyx production credentials. Optimize for \u003c3s initial load: code splitting, image optimization, font loading strategy. Set up monitoring for call failures and API errors.\n\n**Context:** Go-live readiness requires production infrastructure. Performance target from PRD: \u003c3s initial load, smooth real-time updates. Monitoring ensures call failures (the core product) are caught immediately.\n\n**Testing Requirements:**\n- **Unit Tests:** Environment variable validation, build configuration\n- **Integration Tests:** Full production deploy to staging, load testing for concurrent users, call failure alert triggers correctly, verify \u003c3s load time with Lighthouse","design":"Use Vercel Edge Config for feature flags. Implement Convex real-time subscriptions efficiently (batch where possible). Set up Vercel Analytics + custom Convex function for call failure alerting. Consider Sentry for error tracking. Font preloading for Inter/DM Sans.","status":"open","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":480,"created_at":"2026-01-30T14:13:34.032524-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:13:34.032524-06:00","labels":["agent-view","backend","convex","dashboard","deployment","frontend","infrastructure","mobile","monitoring","performance","scheduled-jobs","telnyx"],"dependencies":[{"issue_id":"test-e8t5","depends_on_id":"test-e8","type":"parent-child","created_at":"2026-01-30T14:13:34.163799-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t5","depends_on_id":"test-e8t1","type":"blocks","created_at":"2026-01-30T14:15:47.019754-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t5","depends_on_id":"test-e8t2","type":"blocks","created_at":"2026-01-30T14:15:47.266785-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t5","depends_on_id":"test-e8t3","type":"blocks","created_at":"2026-01-30T14:15:47.487037-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t5","depends_on_id":"test-e8t4","type":"blocks","created_at":"2026-01-30T14:15:47.883835-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t5s1","title":"Configure production environment variables and deployments","description":"Set up Vercel production environment with all required env vars: CONVEX_DEPLOYMENT (production), CLERK_SECRET_KEY and CLERK_PUBLISHABLE_KEY (production instance), TELNYX_API_KEY and TELNYX_PUBLIC_KEY (production credentials), FUB_API_KEY. Deploy Convex to production using 'npx convex deploy --prod'. Configure Clerk production instance with proper redirect URLs. Set up Vercel Edge Config for feature flags (call recording toggle, agent limits per tier).\n\n**Context:** Production deployment requires separate credentials from development to ensure security and proper billing. Edge Config enables runtime feature flag changes without redeployment.\n\n**Testing Requirements:**\n- **Unit Tests:** Verify all env vars are set in Vercel dashboard, test Convex production deployment responds, verify Clerk production redirects work, confirm Telnyx production credentials authenticate","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:54.365393-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:54.365393-06:00","labels":["backend","dashboard","database","devops","frontend","infrastructure"],"dependencies":[{"issue_id":"test-e8t5s1","depends_on_id":"test-e8t5","type":"parent-child","created_at":"2026-01-30T14:14:54.491432-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t5s2","title":"Implement performance optimizations for \u003c3s initial load","description":"Optimize bundle for target \u003c3s initial load: Configure Next.js code splitting with dynamic imports for heavy components (call interface, analytics charts). Set up next/image optimization for any images. Implement font loading strategy for Inter and DM Sans using next/font with display: swap and preload. Configure Convex real-time subscriptions to batch where possible (use useQueries for dashboard data). Add prefetch for likely navigation paths from dashboard.\n\n**Context:** PRD specifies \u003c3s initial load target. Font preloading for Inter/DM Sans specifically mentioned in design notes. Batched Convex subscriptions reduce connection overhead for real-time updates.\n\n**Testing Requirements:**\n- **Unit Tests:** Run Lighthouse audit targeting \u003e90 performance score, verify fonts load without FOIT, test bundle analyzer shows proper code splitting, measure Time to Interactive \u003c3s on throttled connection","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T14:14:54.677635-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:54.677635-06:00","labels":["backend","convex","frontend","performance","telnyx"],"dependencies":[{"issue_id":"test-e8t5s2","depends_on_id":"test-e8t5","type":"parent-child","created_at":"2026-01-30T14:14:54.826479-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t5s2","depends_on_id":"test-e8t5s1","type":"blocks","created_at":"2026-01-30T14:15:48.410294-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t5s3","title":"Set up monitoring and alerting for call failures and errors","description":"Implement monitoring stack: Set up Vercel Analytics for performance tracking. Create Convex function 'internal/monitoring.ts' that detects call failures (status: 'failed' or 'error') and triggers alerts. Integrate Sentry for error tracking with proper source maps. Create alert mechanism for call failures - the core product metric. Set up Convex dashboard monitoring for function execution times and errors. Add structured logging for Telnyx webhook failures.\n\n**Context:** Monitoring ensures call failures (the core product) are caught immediately. PRD emphasizes reliability - brokers need to trust the system with client calls.\n\n**Testing Requirements:**\n- **Unit Tests:** Verify Sentry captures errors with stack traces, test call failure detection function triggers on failed call status, confirm Vercel Analytics dashboard shows data, test webhook failure logging","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T14:14:55.003581-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:55.003581-06:00","labels":["backend","convex","devops","frontend","integration","monitoring","telnyx","webhooks"],"dependencies":[{"issue_id":"test-e8t5s3","depends_on_id":"test-e8t5s2","type":"blocks","created_at":"2026-01-30T12:52:13.221256-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t5s3","depends_on_id":"test-e8t5","type":"parent-child","created_at":"2026-01-30T14:14:55.137394-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t5s3","depends_on_id":"test-e8t5s1","type":"blocks","created_at":"2026-01-30T14:15:48.795392-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t5s4","title":"Production verification and go-live checklist","description":"Execute production verification: Test complete call flow end-to-end in production (Telnyx → webhook → Convex → FUB). Verify Clerk authentication works with production instance. Confirm real-time updates work across multiple browser sessions. Test mobile responsiveness on actual devices. Verify all brand assets load correctly (fonts, colors per PRD: Warm Cream #FAF7F2, Terracotta #C4704D). Document any production-specific configuration for future deployments.\n\n**Context:** Go-live readiness requires production infrastructure verified end-to-end. PRD specifies mobile-first design must work on actual devices, not just simulators.\n\n**Testing Requirements:**\n- **Unit Tests:** Complete end-to-end call test in production, verify multi-device real-time sync, confirm \u003c3s load on mobile 4G, test all Clerk flows (sign-up, sign-in, org switching)","status":"open","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T14:14:55.409561-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:14:55.409561-06:00","labels":["backend","convex","devops","frontend","testing","workflow"],"dependencies":[{"issue_id":"test-e8t5s4","depends_on_id":"test-e8t5s1","type":"blocks","created_at":"2026-01-30T12:10:19.264727-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t5s4","depends_on_id":"test-e8t5","type":"parent-child","created_at":"2026-01-30T14:14:55.534063-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t5s4","depends_on_id":"test-e8t5s2","type":"blocks","created_at":"2026-01-30T14:15:49.051101-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t5s4","depends_on_id":"test-e8t5s3","type":"blocks","created_at":"2026-01-30T14:15:49.333553-06:00","created_by":"David Habedank"}]}
{"id":"test-e8t6","title":"Add check-in configuration UI and compliance dashboard","description":"Build the settings UI for configuring check-in frequency at org/team level, and a compliance view showing which agents have completed their check-ins vs missed them.\n\n**Context:** Brokerage owners and team leads need to configure how aggressive the check-in cadence is and see who's actually using the system. This visibility is core to the 'virtual sales manager' value prop - managers can see accountability metrics without manually tracking.\n\n**Testing Requirements:**\n- **Unit Tests:** Config form validation, compliance calculation functions\n- **Integration Tests:** Config save/load round-trip, real-time compliance updates when check-ins complete","design":"Settings page with frequency selector (daily, every 2 days, every 3 days, weekly), time window preferences. Compliance dashboard showing: agents with completed/missed/upcoming check-ins, streak tracking, completion rate over time. Use existing shadcn/ui components and dashboard patterns.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":300,"created_at":"2026-01-30T12:47:54.516384-06:00","created_by":"David Habedank","updated_at":"2026-01-30T14:00:06.04537-06:00","labels":["dashboard","frontend","ui"],"dependencies":[{"issue_id":"test-e8t6","depends_on_id":"test-e8","type":"parent-child","created_at":"2026-01-30T12:47:54.683855-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t6","depends_on_id":"test-e8t5","type":"blocks","created_at":"2026-01-30T12:52:13.796653-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T14:00:06.04537-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e8t6s1","title":"Create check-in settings form component with frequency controls","description":"Build a React component for check-in configuration using shadcn/ui form components. Include: frequency selector (daily/every 2 days/every 3 days/weekly) using RadioGroup or Select, time window preferences (morning/afternoon/evening or specific time range), and scope selector (org-wide default vs team-level override). Store configuration in Convex with org_id/team_id foreign keys. The form should show current settings and allow saving changes with optimistic UI updates.\n\n**Context:** This is the configuration entry point - brokerage owners set the cadence here. Getting the UX right matters because overly aggressive check-ins will cause pushback, while too lenient defeats the accountability purpose.\n\n**Testing Requirements:**\n- **Unit Tests:** Test form validation (frequency required, valid time ranges), test save handler calls mutation with correct payload, test loading state shows current settings, test team-level override shows inheritance indicator from org default","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:26.433349-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:48.579841-06:00","labels":["frontend","settings"],"dependencies":[{"issue_id":"test-e8t6s1","depends_on_id":"test-e8t6","type":"parent-child","created_at":"2026-01-30T12:50:26.612551-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:48.579841-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e8t6s2","title":"Build Convex schema and queries for check-in compliance data","description":"Create Convex schema for check_in_configs table (org_id, team_id nullable, frequency, time_window_start, time_window_end). Add queries: getComplianceStats(org_id, date_range) returning per-agent stats, getAgentCheckInHistory(agent_id, limit) for individual drill-down, getStreakData(org_id) for streak calculations. Compliance stats should calculate: completed count, missed count, completion_rate, current_streak, longest_streak per agent.\n\n**Context:** The compliance dashboard needs aggregated data efficiently. Pre-computing streaks and rates in queries (vs client-side) keeps the dashboard fast even with 100 agents.\n\n**Testing Requirements:**\n- **Unit Tests:** Test getComplianceStats returns correct counts for mixed completed/missed check-ins, test streak calculation resets on miss, test date range filtering excludes out-of-range records, test team_id filter returns only team members","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:26.875208-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:47.984546-06:00","labels":["backend","convex"],"dependencies":[{"issue_id":"test-e8t6s2","depends_on_id":"test-e8t6","type":"parent-child","created_at":"2026-01-30T12:50:27.035463-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:47.984546-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e8t6s3","title":"Implement compliance dashboard with agent status grid","description":"Build the compliance dashboard view showing all agents' check-in status. Use a data table (shadcn/ui Table or DataTable) with columns: agent name, last check-in date, status (completed/missed/upcoming), current streak, completion rate (last 30 days). Add visual indicators: green checkmark for completed, red X for missed, yellow clock for upcoming/due today. Include filters for team and date range. Add summary cards at top showing org-wide: total completion rate, agents with perfect streaks, agents needing attention (missed 2+).\n\n**Context:** This is the 'virtual sales manager' view - at a glance, managers see who's engaged vs who's slipping. The 'needing attention' metric is the actionable insight that drives follow-up conversations.\n\n**Testing Requirements:**\n- **Unit Tests:** Test status badge renders correct color/icon for each state, test completion rate formats as percentage, test team filter updates displayed agents, test summary cards calculate from visible data, test empty state when no check-ins exist","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":105,"created_at":"2026-01-30T12:50:27.325708-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:47.518346-06:00","labels":["dashboard","frontend"],"dependencies":[{"issue_id":"test-e8t6s3","depends_on_id":"test-e8t6","type":"parent-child","created_at":"2026-01-30T12:50:27.554552-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t6s3","depends_on_id":"test-e8t6s2","type":"blocks","created_at":"2026-01-30T12:52:14.058368-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:47.518346-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e8t6s4","title":"Add completion trend chart and agent drill-down modal","description":"Enhance compliance dashboard with: 1) A line/area chart showing org completion rate over time (last 30/60/90 days) using existing chart library or recharts. 2) Clickable agent rows that open a modal/sheet showing that agent's check-in history (date, status, time completed), their personal trend, and streak details. This drill-down lets managers have specific conversations about patterns rather than just 'you missed check-ins'.\n\n**Context:** The trend chart shows if accountability is improving over time (value of the system). The drill-down enables managers to have data-driven 1:1s with specific agents about their engagement patterns.\n\n**Testing Requirements:**\n- **Unit Tests:** Test chart renders with mock time-series data, test date range selector updates chart data, test agent row click opens modal with correct agent_id, test modal displays check-in history in chronological order, test empty history state in modal","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:27.781507-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:47.171891-06:00","labels":["charts","dashboard","frontend"],"dependencies":[{"issue_id":"test-e8t6s4","depends_on_id":"test-e8t6","type":"parent-child","created_at":"2026-01-30T12:50:28.195969-06:00","created_by":"David Habedank"},{"issue_id":"test-e8t6s4","depends_on_id":"test-e8t6s3","type":"blocks","created_at":"2026-01-30T12:52:14.30973-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:47.171891-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9","title":"Organization \u0026 Team Management","description":"Build multi-tenant support for brokerages including organization setup, agent invitations, team structure, role-based permissions, and onboarding flows.\n\n**Context:** RealHerd sells to brokerages, not individual agents. Organizations need to invite agents, create teams, assign team leads, and configure settings at org and team levels. Role-based access controls who sees what.\n\n**Testing Requirements:**\n- **Unit Tests:** Permission checking logic, invitation token generation, role hierarchy validation\n- **Integration Tests:** Invitation flow end-to-end, onboarding call trigger, team assignment\n- **Type Tests:** Organization model, User roles, Team structure validation\n- **E2E Tests:** Broker creates org, invites agent, agent onboards, team lead created with correct permissions","acceptance_criteria":"- Organization creation with FUB API key configuration\n- Agent invitation flow via email and SMS\n- Agent onboarding welcome call explaining the system\n- Team creation with team lead assignment\n- Role-based permissions (broker sees all, team lead sees team, agent sees self)\n- Team-level settings can override org defaults\n- Agent activate/deactivate functionality\n- Org settings page with all configuration options","status":"tombstone","priority":1,"issue_type":"epic","owner":"david@habedank.org","estimated_minutes":2400,"created_at":"2026-01-30T12:47:21.027658-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:16.91803-06:00","labels":["multi-tenant","onboarding","permissions","polish","production","teams","ux"],"dependencies":[{"issue_id":"test-e9","depends_on_id":"test-e1","type":"blocks","created_at":"2026-01-30T12:10:19.496303-06:00","created_by":"David Habedank"},{"issue_id":"test-e9","depends_on_id":"test-e7","type":"blocks","created_at":"2026-01-30T12:10:19.699137-06:00","created_by":"David Habedank"},{"issue_id":"test-e9","depends_on_id":"test-e8","type":"blocks","created_at":"2026-01-30T12:52:14.564376-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:16.91803-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"test-e9t1","title":"Implement organization data model and creation flow","description":"Create the multi-tenant organization schema in Convex including organizations table with FUB API key storage, billing info, and settings. Build the organization creation flow for new brokerage signups.\n\n**Context:** RealHerd sells to brokerages, so organizations are the primary billing/subscription unit. Each org needs their own FUB API key to sync their CRM data. This is foundational - agents, teams, and all features are scoped to organizations.\n\n**Testing Requirements:**\n- **Unit Tests:** Organization creation mutation, FUB API key validation, settings merge logic, organization lookup queries\n- **Integration Tests:** Full org creation flow with Clerk, FUB API key validation against real FUB test account, organization membership syncing","design":"Convex schema: organizations table with id, name, fub_api_key (encrypted), settings (JSONB), created_at, subscription_status. Use Clerk's organization feature if available, or build custom org membership. FUB API key should be validated on save by making a test API call.","status":"tombstone","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T12:47:54.931703-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:57:53.818709-06:00","labels":["backend","database","frontend","multi-tenant","onboarding","ux"],"dependencies":[{"issue_id":"test-e9t1","depends_on_id":"test-e9","type":"parent-child","created_at":"2026-01-30T12:47:55.090569-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:57:53.818709-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t1s1","title":"Create Convex organizations schema with all required fields","description":"Define the organizations table in Convex schema with fields: id (auto), name (string), fub_api_key (string, will store encrypted value), fub_api_key_validated (boolean), settings (object for org preferences), subscription_status (string enum: trial, active, past_due, cancelled), billing_email (optional string), created_at (number timestamp), updated_at (number timestamp). Include appropriate indexes for querying by subscription_status. Add TypeScript types for Organization and OrganizationSettings.\n\n**Context:** This is the foundational data model for multi-tenancy. Every other feature (agents, teams, deals) will be scoped to an organization. Getting this schema right is critical for data isolation and billing.\n\n**Testing Requirements:**\n- **Unit Tests:** Test schema validation rejects invalid subscription_status values, test required fields are enforced, test settings object accepts nested preferences, test indexes are created for common query patterns","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T12:50:28.534625-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:46.810855-06:00","labels":["backend","convex","database","frontend"],"dependencies":[{"issue_id":"test-e9t1s1","depends_on_id":"test-e9t1","type":"parent-child","created_at":"2026-01-30T12:50:28.756045-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:46.810855-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t1s2","title":"Implement FUB API key validation helper function","description":"Create a server-side helper function that validates a FUB API key by making a test API call to the FUB API (e.g., GET /v1/me or /v1/people?limit=1). Function should: accept API key as parameter, make authenticated request, return {valid: boolean, error?: string}. Handle common error cases: invalid key (401), rate limited (429), network errors. This will be called during org creation to ensure the API key works before saving.\n\n**Context:** Validating the FUB API key on save prevents organizations from being created with invalid credentials, which would cause sync failures later. Early validation improves user experience by catching config errors immediately.\n\n**Testing Requirements:**\n- **Unit Tests:** Test returns valid:true for successful API response, test returns valid:false with error message for 401, test handles 429 rate limit gracefully, test handles network timeout, test handles malformed API key format","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:50:29.071885-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:46.517998-06:00","labels":["backend","frontend","integration","ui"],"dependencies":[{"issue_id":"test-e9t1s2","depends_on_id":"test-e9t1","type":"parent-child","created_at":"2026-01-30T12:50:29.253753-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t1s2","depends_on_id":"test-e9t1s1","type":"blocks","created_at":"2026-01-30T12:52:14.825409-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:46.517998-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t1s3","title":"Build organization creation mutation with API key validation","description":"Create a Convex mutation 'createOrganization' that: accepts name and fub_api_key, calls the FUB validation helper, only creates org if API key is valid, stores the API key (note: encryption to be added in security task), sets initial subscription_status to 'trial', returns the new organization or validation error. Also create 'getOrganization' and 'updateOrganization' queries/mutations for basic CRUD. Integrate with Clerk's organization feature if using Clerk, or track org membership separately.\n\n**Context:** This mutation is the entry point for new brokerage signups. The validation step ensures only organizations with working FUB connections are created, preventing broken states.\n\n**Testing Requirements:**\n- **Unit Tests:** Test createOrganization succeeds with valid API key, test createOrganization fails with invalid API key and returns error, test getOrganization returns null for non-existent org, test updateOrganization preserves existing fields not being updated, test subscription_status defaults to trial","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:29.48722-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:46.267733-06:00","labels":["api","backend","frontend","integration","ui"],"dependencies":[{"issue_id":"test-e9t1s3","depends_on_id":"test-e9t1","type":"parent-child","created_at":"2026-01-30T12:50:29.649427-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t1s3","depends_on_id":"test-e9t1s2","type":"blocks","created_at":"2026-01-30T12:52:15.159841-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:46.267733-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t1s4","title":"Create organization setup UI component and flow","description":"Build a React component for organization creation with form fields: organization name (required), FUB API key (required, with helper text explaining where to find it in FUB settings). Show loading state during API key validation, display validation errors inline, redirect to dashboard on success. Include a link to FUB documentation for getting API keys. Wire up to the createOrganization mutation.\n\n**Context:** This is the first touchpoint for new brokerage customers. A clear, helpful UI that validates immediately reduces support burden and improves conversion from signup to active use.\n\n**Testing Requirements:**\n- **Unit Tests:** Test form validates required fields before submit, test displays loading spinner during API validation, test shows error message when API key invalid, test redirects to dashboard on successful creation, test helper text renders with FUB docs link","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:29.916663-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:45.850751-06:00","labels":["analytics","frontend","ui","ux"],"dependencies":[{"issue_id":"test-e9t1s4","depends_on_id":"test-e9t1","type":"parent-child","created_at":"2026-01-30T12:50:30.080261-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t1s4","depends_on_id":"test-e9t1s3","type":"blocks","created_at":"2026-01-30T12:52:15.471005-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:45.850751-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t2","title":"Build agent invitation and onboarding flow","description":"Create the invitation system for brokers to invite agents via email and SMS. Include invite tracking, acceptance flow, and welcome onboarding that culminates in scheduling a welcome call to explain the system.\n\n**Context:** Brokerages need to onboard 20-100 agents efficiently. Agents receive invites, create accounts via Clerk, and get a welcome call explaining RealHerd. The welcome call is critical for adoption - agents who understand the 'why' behind accountability tracking are more likely to use the system.\n\n**Testing Requirements:**\n- **Unit Tests:** Invitation token generation/validation, expiration logic, SMS message formatting, onboarding step completion tracking\n- **Integration Tests:** Full invite flow via email and Telnyx SMS, Clerk account creation from invite, welcome call scheduling integration","design":"Convex schema: invitations table with token, org_id, email, phone, status, invited_by, expires_at. Use Telnyx for SMS invites. Onboarding wizard: 1) Accept invite, 2) Clerk signup, 3) Profile setup, 4) Schedule welcome call (use Calendly embed or custom scheduler). Track onboarding completion percentage.","status":"tombstone","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":480,"created_at":"2026-01-30T12:47:55.363144-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:57:46.196209-06:00","labels":["backend","design","frontend","onboarding","telnyx","ux"],"dependencies":[{"issue_id":"test-e9t2","depends_on_id":"test-e9","type":"parent-child","created_at":"2026-01-30T12:47:55.56756-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t2","depends_on_id":"test-e9t1","type":"blocks","created_at":"2026-01-30T12:52:15.847716-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:57:46.196209-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t2s1","title":"Create invitation schema and generation API","description":"Create Convex invitations table with fields: token (unique, cryptographically secure), org_id, email, phone, status (pending/accepted/expired/revoked), invited_by (user_id), expires_at, created_at, accepted_at. Build mutation to generate invitations with 7-day expiration, unique tokens via crypto.randomUUID(), and validation that email isn't already a member of the org.\n\n**Context:** Invitations are the entry point for agent onboarding. Secure tokens prevent unauthorized access. Tracking status enables brokers to see who hasn't accepted yet and resend invites.\n\n**Testing Requirements:**\n- **Unit Tests:** Test createInvitation mutation: generates unique token, sets correct expiration, rejects duplicate email in same org, stores invited_by correctly. Test getInvitation query: returns null for expired tokens, returns invitation for valid tokens.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:30.28978-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:45.568107-06:00","labels":["backend","database","design-system","frontend"],"dependencies":[{"issue_id":"test-e9t2s1","depends_on_id":"test-e9t2","type":"parent-child","created_at":"2026-01-30T12:50:30.462694-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:45.568107-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t2s2","title":"Implement invitation sending via email and Telnyx SMS","description":"Create sendInvitation action that sends both email (via Resend/SendGrid) and SMS (via Telnyx) with personalized invite link containing token. Include brokerage name, inviter name, and clear CTA. Build Telnyx integration with proper error handling for invalid phone numbers. Create invite link format: /invite/[token].\n\n**Context:** Dual-channel delivery (email + SMS) maximizes invite visibility. Agents check SMS more frequently than email, but email provides a searchable record. Personalization increases acceptance rates.\n\n**Testing Requirements:**\n- **Unit Tests:** Test sendInvitation action: calls email provider with correct template data, calls Telnyx API with formatted phone number, handles Telnyx 400 errors gracefully, marks invitation as sent. Mock both external APIs.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:30.780785-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:45.299201-06:00","labels":["backend","design","frontend","integration"],"dependencies":[{"issue_id":"test-e9t2s2","depends_on_id":"test-e9t2","type":"parent-child","created_at":"2026-01-30T12:50:30.953508-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t2s2","depends_on_id":"test-e9t2s1","type":"blocks","created_at":"2026-01-30T12:52:16.109704-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:45.299201-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t2s3","title":"Build invitation acceptance and Clerk signup flow","description":"Create /invite/[token] page that validates token (not expired, not used), displays brokerage info, and initiates Clerk signup. On Clerk signup completion, use webhook or useUser() to associate new user with org_id from invitation, update invitation status to 'accepted', and create agent record with org membership. Handle edge cases: expired token shows 'request new invite' message, already-accepted shows 'sign in instead'.\n\n**Context:** Seamless transition from invite to account creation is critical for conversion. Agents should never wonder what to do next. Automatic org association eliminates manual admin work for brokers.\n\n**Testing Requirements:**\n- **Unit Tests:** Test invite validation: rejects expired tokens, rejects already-accepted tokens, returns org details for valid tokens. Test post-signup hook: creates user-org membership, updates invitation status, handles race conditions if webhook fires twice.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:31.207097-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:44.946628-06:00","labels":["auth","backend","frontend","ux"],"dependencies":[{"issue_id":"test-e9t2s3","depends_on_id":"test-e9t2s2","type":"blocks","created_at":"2026-01-30T12:10:21.3924-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t2s3","depends_on_id":"test-e9t2","type":"parent-child","created_at":"2026-01-30T12:50:31.389145-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t2s3","depends_on_id":"test-e9t2s1","type":"blocks","created_at":"2026-01-30T12:52:16.37572-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:44.946628-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t2s4","title":"Create onboarding wizard with welcome call scheduling","description":"Build multi-step onboarding wizard after signup: 1) Profile setup (photo, phone, license number), 2) Brief intro to RealHerd value prop (what brokers see, why accountability helps), 3) Schedule welcome call via Calendly embed (use their React component or iframe). Track onboarding_completed_at and onboarding_step in user record. Show progress indicator. Allow skip-for-now on call scheduling but mark as incomplete.\n\n**Context:** The welcome call is the highest-leverage moment for adoption. Agents who understand WHY their broker wants pipeline visibility (to help, not micromanage) embrace the tool. The wizard builds trust before asking for the commitment of a call.\n\n**Testing Requirements:**\n- **Unit Tests:** Test profile update mutation: validates required fields, stores photo URL correctly. Test onboarding progress tracking: correctly increments step, marks complete only when all steps done or call scheduled. Test Calendly embed: renders correctly, fires callback on booking.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":105,"created_at":"2026-01-30T12:50:31.687496-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:44.624955-06:00","labels":["backend","frontend","polish","testing"],"dependencies":[{"issue_id":"test-e9t2s4","depends_on_id":"test-e9t2","type":"parent-child","created_at":"2026-01-30T12:50:31.869628-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t2s4","depends_on_id":"test-e9t2s3","type":"blocks","created_at":"2026-01-30T12:52:16.684327-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:44.624955-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t3","title":"Implement team structure and team lead assignment","description":"Build the team management system allowing brokers to create teams, assign agents to teams, and designate team leads. Teams can have their own settings that override org defaults.\n\n**Context:** Brokerages organize agents into teams of 4-12 people. Team leads need visibility into their team's pipeline without seeing the whole brokerage. Team-level settings (e.g., different call quotas, different notification preferences) allow customization without affecting the whole org.\n\n**Testing Requirements:**\n- **Unit Tests:** Team creation, member assignment, team lead promotion, settings inheritance/merge logic, team deletion with member handling\n- **Integration Tests:** Create team, add members, assign lead, verify settings cascade correctly, verify team lead can see only team data","design":"Convex schema: teams table with org_id, name, team_lead_id, settings (JSONB, nullable - null means inherit from org). team_memberships table linking agents to teams. An agent can be on one team (simplify v1). Settings inheritance: team.settings ?? org.settings for each setting key.","status":"tombstone","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T12:47:55.793709-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:08.988282-06:00","labels":["backend","database","error-handling","frontend","teams","ux"],"dependencies":[{"issue_id":"test-e9t3","depends_on_id":"test-e9","type":"parent-child","created_at":"2026-01-30T12:47:55.990117-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t3","depends_on_id":"test-e9t1","type":"blocks","created_at":"2026-01-30T12:52:17.296787-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t3","depends_on_id":"test-e9t2","type":"blocks","created_at":"2026-01-30T12:52:17.584314-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:08.988282-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t3s1","title":"Create Convex schema for teams and team_memberships tables","description":"Define the teams table with fields: _id, org_id (reference to organizations), name (string), team_lead_id (optional reference to users), settings (optional object for JSONB-style overrides), created_at, updated_at. Define team_memberships table with: _id, team_id (reference to teams), user_id (reference to users), joined_at. Add index on team_memberships for user_id to enforce one-team-per-agent constraint in v1. Add index on teams for org_id.\n\n**Context:** Teams are the organizational unit between org and individual agent. The schema must support settings inheritance (null settings means inherit from org) and the constraint that agents belong to exactly one team in v1.\n\n**Testing Requirements:**\n- **Unit Tests:** Verify schema compiles with npx convex dev. Test that teams table accepts null settings. Test that team_memberships properly references both teams and users tables.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":30,"created_at":"2026-01-30T12:50:32.130222-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:44.362682-06:00","labels":["backend","database","error-handling","frontend"],"dependencies":[{"issue_id":"test-e9t3s1","depends_on_id":"test-e9t3","type":"parent-child","created_at":"2026-01-30T12:50:32.287491-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:44.362682-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t3s2","title":"Implement team CRUD mutations with org-scoped access control","description":"Create mutations: createTeam(orgId, name, teamLeadId?, settings?), updateTeam(teamId, name?, teamLeadId?, settings?), deleteTeam(teamId). All mutations must verify the calling user has broker/admin role in the org. createTeam should validate teamLeadId belongs to the org if provided. deleteTeam should also remove all team_memberships. Implement getTeamsByOrg query for listing teams.\n\n**Context:** Brokers need to manage team structure. Only org admins/brokers can create or modify teams. Team deletion must cascade to memberships to prevent orphaned records.\n\n**Testing Requirements:**\n- **Unit Tests:** Test createTeam creates team with correct org_id. Test updateTeam only works for users with broker role. Test deleteTeam removes associated memberships. Test createTeam rejects teamLeadId not in org. Test getTeamsByOrg returns only teams for specified org.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:50:32.506521-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:43.847252-06:00","labels":["api","backend","error-handling","frontend"],"dependencies":[{"issue_id":"test-e9t3s2","depends_on_id":"test-e9t3","type":"parent-child","created_at":"2026-01-30T12:50:32.6583-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t3s2","depends_on_id":"test-e9t3s1","type":"blocks","created_at":"2026-01-30T12:52:17.828728-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:43.847252-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t3s3","title":"Implement team membership mutations with one-team constraint","description":"Create mutations: addAgentToTeam(teamId, userId), removeAgentFromTeam(teamId, userId), transferAgent(userId, newTeamId). addAgentToTeam must first check if user is already on a team and reject if so (v1 constraint). transferAgent handles the atomic removal from old team and addition to new team. Implement getTeamMembers(teamId) and getAgentTeam(userId) queries.\n\n**Context:** Agents can only be on one team in v1 to simplify permissions and reporting. The transfer operation needs to be atomic to prevent agents being on zero or multiple teams during the operation.\n\n**Testing Requirements:**\n- **Unit Tests:** Test addAgentToTeam fails if agent already on a team. Test removeAgentFromTeam properly deletes membership. Test transferAgent atomically moves agent (no intermediate state with 0 or 2 teams). Test getTeamMembers returns correct list. Test getAgentTeam returns null for unassigned agents.","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T12:50:32.87997-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:43.146931-06:00","labels":["api","backend","frontend","loading-states"],"dependencies":[{"issue_id":"test-e9t3s3","depends_on_id":"test-e9t3","type":"parent-child","created_at":"2026-01-30T12:50:33.080387-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t3s3","depends_on_id":"test-e9t3s1","type":"blocks","created_at":"2026-01-30T12:52:18.125934-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:43.146931-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t3s4","title":"Implement settings inheritance helper and team lead assignment","description":"Create a getEffectiveSettings(teamId) function that merges team.settings with org.settings, with team settings taking precedence for any defined keys. Create assignTeamLead(teamId, userId) mutation that validates userId is a member of the team before assignment. Create getTeamForLead(userId) query that returns teams where user is team_lead_id.\n\n**Context:** Settings inheritance allows teams to customize specific settings while inheriting org defaults for others. Team leads must be members of their team to ensure they have context for the agents they're leading.\n\n**Testing Requirements:**\n- **Unit Tests:** Test getEffectiveSettings returns org settings when team settings is null. Test getEffectiveSettings merges correctly (team overrides org for same key, org provides defaults for missing keys). Test assignTeamLead fails if user not on team. Test assignTeamLead succeeds and updates team_lead_id. Test getTeamForLead returns correct team(s).","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T12:50:33.321565-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:42.682089-06:00","labels":["api","backend","error-handling","frontend","integration"],"dependencies":[{"issue_id":"test-e9t3s4","depends_on_id":"test-e9t3s1","type":"blocks","created_at":"2026-01-30T12:10:21.860179-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t3s4","depends_on_id":"test-e9t3","type":"parent-child","created_at":"2026-01-30T12:50:33.537207-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t3s4","depends_on_id":"test-e9t3s2","type":"blocks","created_at":"2026-01-30T12:52:18.46825-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t3s4","depends_on_id":"test-e9t3s3","type":"blocks","created_at":"2026-01-30T12:52:18.941588-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:42.682089-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t4","title":"Build role-based permissions system","description":"Implement RBAC with three core roles: broker (sees all org data), team_lead (sees team data), agent (sees only self). Create permission checking utilities and apply them to all data queries.\n\n**Context:** Data visibility is critical for trust. Agents shouldn't see each other's pipelines. Team leads need accountability over their team. Brokers need the full picture. Getting permissions wrong breaks trust and potentially violates privacy expectations.\n\n**Testing Requirements:**\n- **Unit Tests:** Permission check functions for each role combination, edge cases (agent with no team, team lead viewing non-team member, broker viewing any agent)\n- **Integration Tests:** End-to-end permission checks: broker dashboard shows all agents, team lead dashboard shows only team, agent dashboard shows only self","design":"Roles: broker, team_lead, agent stored on user membership. Create canViewAgent(viewerId, targetAgentId) utility that checks: same person, team lead of their team, or broker. Apply to all agent-specific queries. Consider Convex's built-in auth patterns. Add role to Clerk user metadata for quick access.","status":"tombstone","priority":0,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T12:47:56.224086-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:57:45.11589-06:00","labels":["backend","frontend","rbac","security","settings"],"dependencies":[{"issue_id":"test-e9t4","depends_on_id":"test-e9","type":"parent-child","created_at":"2026-01-30T12:47:56.485685-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t4","depends_on_id":"test-e9t3","type":"blocks","created_at":"2026-01-30T12:52:19.194882-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:57:45.11589-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t4s1","title":"Define role types and permission schema","description":"Create TypeScript types for the three roles (broker, team_lead, agent) and add role field to organization membership schema. Define the Role enum type, update the organizationMemberships table to include role field with appropriate default (agent), and create types for permission contexts.\n\n**Context:** Clean type definitions prevent permission bugs. The role field on membership is the source of truth for all permission checks throughout the app.\n\n**Testing Requirements:**\n- **Unit Tests:** Test that Role type only accepts 'broker' | 'team_lead' | 'agent', verify schema migration adds role field with 'agent' default, test that existing memberships get default role","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T12:50:33.874643-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:42.246429-06:00","labels":["auth","backend","database","frontend"],"dependencies":[{"issue_id":"test-e9t4s1","depends_on_id":"test-e9t4","type":"parent-child","created_at":"2026-01-30T12:50:34.049159-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:42.246429-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t4s2","title":"Implement core permission checking utilities","description":"Create permission utility functions: getUserRole(ctx, userId, orgId) to fetch user's role, canViewAgent(ctx, viewerId, targetAgentId) that returns true if same person OR viewer is team_lead of target's team OR viewer is broker in same org. Also create canEditAgent(), isOrgBroker(), isTeamLead() helper functions.\n\n**Context:** Centralized permission logic prevents scattered, inconsistent checks. Every data query will use these utilities, so they must be correct and performant.\n\n**Testing Requirements:**\n- **Unit Tests:** Test canViewAgent returns true for same user, true for broker viewing any org agent, true for team_lead viewing team member, false for team_lead viewing other team's agent, false for agent viewing another agent. Test edge cases: user not in org, invalid IDs","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:34.264172-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:41.566659-06:00","labels":["backend","frontend"],"dependencies":[{"issue_id":"test-e9t4s2","depends_on_id":"test-e9t4","type":"parent-child","created_at":"2026-01-30T12:50:34.441216-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t4s2","depends_on_id":"test-e9t4s1","type":"blocks","created_at":"2026-01-30T12:52:19.468355-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:41.566659-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t4s3","title":"Apply permission checks to all agent-specific queries","description":"Audit and update all Convex queries that return agent-specific data (pipelines, contacts, activities, deals) to use the permission utilities. Add withPermissionCheck wrapper or inline checks. Ensure queries throw appropriate errors for unauthorized access rather than returning empty results.\n\n**Context:** This is where RBAC becomes real. Without applying checks to actual queries, the permission utilities are unused code. Every endpoint that could leak cross-agent data must be protected.\n\n**Testing Requirements:**\n- **Unit Tests:** Test that getPipeline throws for unauthorized viewer, test that listDeals filters correctly by role, test broker sees all org data, test agent only sees own data, test team_lead sees exactly their team's data","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:34.692259-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:40.763649-06:00","labels":["backend","frontend"],"dependencies":[{"issue_id":"test-e9t4s3","depends_on_id":"test-e9t4s1","type":"blocks","created_at":"2026-01-30T12:10:23.256454-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t4s3","depends_on_id":"test-e9t4","type":"parent-child","created_at":"2026-01-30T12:50:34.850366-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t4s3","depends_on_id":"test-e9t4s2","type":"blocks","created_at":"2026-01-30T12:52:19.780186-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:40.763649-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t4s4","title":"Add role management UI and verify end-to-end","description":"Create UI for brokers to assign/change roles (in org settings or member list). Add role display to team member views. Test complete flow: create org, invite agents, assign team_lead, verify data visibility matches expectations. Run dev server and manually verify each role can only see appropriate data.\n\n**Context:** Role assignment needs to be accessible to brokers without requiring database access. End-to-end verification catches integration issues that unit tests miss.\n\n**Testing Requirements:**\n- **Unit Tests:** Test role change mutation validates only broker can change roles, test role change emits appropriate audit event, integration test: full flow of broker assigning team_lead and verifying permissions change","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:35.376327-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:40.38319-06:00","labels":["backend","frontend"],"dependencies":[{"issue_id":"test-e9t4s4","depends_on_id":"test-e9t4s1","type":"blocks","created_at":"2026-01-30T12:10:23.46503-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t4s4","depends_on_id":"test-e9t4","type":"parent-child","created_at":"2026-01-30T12:50:35.609458-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t4s4","depends_on_id":"test-e9t4s3","type":"blocks","created_at":"2026-01-30T12:52:20.052707-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:40.38319-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t5","title":"Create organization and team settings UI","description":"Build the settings pages for organization configuration (FUB API key, notification defaults, branding) and team settings (overrides). Include agent activate/deactivate functionality for managing agent access.\n\n**Context:** Brokers need self-service configuration. Common settings: FUB API key rotation, default notification preferences, call recording policies, team-specific quotas. Agent deactivation is important when agents leave - their data stays for reporting but they can't log in.\n\n**Testing Requirements:**\n- **Unit Tests:** Settings form validation, FUB API key masking/reveal logic, agent status toggle mutations\n- **Integration Tests:** Full settings update flow, verify FUB connection test works, verify deactivated agent cannot access system, verify team settings properly override org defaults","design":"Next.js pages: /settings/organization, /settings/teams/[teamId]. Use shadcn/ui form components. FUB API key field with 'Test Connection' button. Agent list with activate/deactivate toggle (soft delete - set status, don't remove). Settings form with clear inheritance indicators ('Using org default' badge on team settings).","status":"tombstone","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":360,"created_at":"2026-01-30T12:47:56.698978-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:08.542656-06:00","labels":["devops","frontend","monitoring","performance","settings","shadcn"],"dependencies":[{"issue_id":"test-e9t5","depends_on_id":"test-e9t2","type":"blocks","created_at":"2026-01-30T12:10:24.270108-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t5","depends_on_id":"test-e9t3","type":"blocks","created_at":"2026-01-30T12:10:24.463416-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t5","depends_on_id":"test-e9","type":"parent-child","created_at":"2026-01-30T12:47:56.850988-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t5","depends_on_id":"test-e9t4","type":"blocks","created_at":"2026-01-30T12:52:20.340739-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:08.542656-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t5s1","title":"Create organization settings page with FUB API configuration","description":"Build /settings/organization page with shadcn/ui form components. Include sections for: FUB API key input with masked display and 'Test Connection' button that validates the key against FUB API, notification defaults (email/SMS preferences, frequency settings), call recording policy toggle, and basic branding options (logo upload, primary color). Use React Hook Form with Zod validation. API key should show last 4 characters when saved.\n\n**Context:** FUB API key is critical - brokers need to connect their Follow Up Boss account. Test Connection gives immediate feedback that their key works before saving.\n\n**Testing Requirements:**\n- **Unit Tests:** Test form validation for required fields, test API key masking shows only last 4 chars, test 'Test Connection' button calls validation endpoint and shows success/error states, test form submission calls correct API endpoint with sanitized data","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":90,"created_at":"2026-01-30T12:50:35.903777-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:39.799916-06:00","labels":["frontend","performance","settings"],"dependencies":[{"issue_id":"test-e9t5s1","depends_on_id":"test-e9t5","type":"parent-child","created_at":"2026-01-30T12:50:36.086102-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:39.799916-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t5s2","title":"Build team settings page with inheritance indicators","description":"Create /settings/teams/[teamId] page showing team-specific overrides. Display each setting with 'Using org default' badge when not overridden, and 'Custom' badge when team has own value. Include: notification preferences override, team-specific quotas (deal count thresholds, activity minimums), team lead assignment dropdown. Form should allow clearing overrides to revert to org defaults.\n\n**Context:** Team leads may want different settings than org defaults. Clear inheritance indicators prevent confusion about which settings are active. Reverting to defaults keeps configuration manageable.\n\n**Testing Requirements:**\n- **Unit Tests:** Test inheritance badge shows 'Using org default' when team setting is null, test 'Custom' badge appears when override exists, test clearing override reverts to org default value in UI, test form only submits changed fields","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:36.353617-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:39.490369-06:00","labels":["backend","convex","frontend","performance","settings"],"dependencies":[{"issue_id":"test-e9t5s2","depends_on_id":"test-e9t5","type":"parent-child","created_at":"2026-01-30T12:50:36.540923-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t5s2","depends_on_id":"test-e9t5s1","type":"blocks","created_at":"2026-01-30T12:52:20.625839-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:39.490369-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t5s3","title":"Implement agent list with activate/deactivate functionality","description":"Add agent management section to organization settings. Display table of all agents with columns: name, email, team, status (active/inactive), last login date. Include activate/deactivate toggle per agent that performs soft delete (sets status field, preserves data). Add confirmation modal for deactivation explaining data retention. Filter/search by name, team, status.\n\n**Context:** When agents leave the brokerage, their historical data must remain for reporting and compliance. Deactivation prevents login while preserving deal history and activity records.\n\n**Testing Requirements:**\n- **Unit Tests:** Test toggle calls API with correct agent ID and new status, test confirmation modal appears before deactivation, test inactive agents show visual distinction (grayed row), test search filters agent list correctly, test status filter works","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:36.772533-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:39.306149-06:00","labels":["frontend","performance","settings"],"dependencies":[{"issue_id":"test-e9t5s3","depends_on_id":"test-e9t5","type":"parent-child","created_at":"2026-01-30T12:50:37.045511-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t5s3","depends_on_id":"test-e9t5s1","type":"blocks","created_at":"2026-01-30T12:52:21.307782-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:39.306149-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t5s4","title":"Wire settings pages to API and verify end-to-end functionality","description":"Connect all settings forms to backend API endpoints. Implement optimistic updates with rollback on error. Add toast notifications for save success/failure. Ensure FUB API test connection shows loading state and detailed error messages (invalid key, rate limited, network error). Test complete flow: update org setting → verify team inherits → override at team level → deactivate agent → verify agent cannot access app.\n\n**Context:** Settings changes must persist correctly and provide clear feedback. The inheritance chain (org → team → agent) is core to multi-tenant configuration.\n\n**Testing Requirements:**\n- **Unit Tests:** Test API integration with MSW mocks for success and error cases, test optimistic update reverts on API failure, test toast messages appear for all outcomes, test FUB connection error messages are user-friendly","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:50:37.344973-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:38.921071-06:00","labels":["devops","frontend","integration","monitoring","testing"],"dependencies":[{"issue_id":"test-e9t5s4","depends_on_id":"test-e9t5","type":"parent-child","created_at":"2026-01-30T12:50:37.575976-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t5s4","depends_on_id":"test-e9t5s1","type":"blocks","created_at":"2026-01-30T12:52:21.593747-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t5s4","depends_on_id":"test-e9t5s2","type":"blocks","created_at":"2026-01-30T12:52:21.869611-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t5s4","depends_on_id":"test-e9t5s3","type":"blocks","created_at":"2026-01-30T12:52:22.241168-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:38.921071-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t6","title":"Verify organization and team management end-to-end","description":"Test the complete multi-tenant workflow: create org, configure FUB, invite agents, create teams, assign roles, verify permissions work correctly across all views.\n\n**Context:** Multi-tenant systems have complex permission interactions. This verification ensures a broker can onboard their entire team and that data isolation works correctly - critical for selling to brokerages who need to trust their agents' data is protected.\n\n**Testing Requirements:**\n- **Unit Tests:** N/A - this is an integration verification task\n- **Integration Tests:** Full E2E test with Playwright: org creation → agent invites → team setup → permission verification across all three roles","design":"Create test scenario: 1 org, 2 teams, 1 broker, 2 team leads, 6 agents. Verify: broker sees all 8 people, team lead A sees only their 3 agents, agent sees only self. Test edge cases: team lead viewing cross-team agent (should fail), deactivated agent login (should fail), settings inheritance.","status":"tombstone","priority":1,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":240,"created_at":"2026-01-30T12:47:57.085613-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:08.197001-06:00","labels":["e2e","testing","verification"],"dependencies":[{"issue_id":"test-e9t6","depends_on_id":"test-e9","type":"parent-child","created_at":"2026-01-30T12:47:57.244999-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t6","depends_on_id":"test-e9t5","type":"blocks","created_at":"2026-01-30T12:52:22.525892-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:08.197001-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t6s1","title":"Create test organization with complete team hierarchy","description":"Set up the test scenario: create 1 organization, 2 teams (Team A, Team B), and 8 user accounts with roles: 1 broker (org owner), 2 team leads (1 per team), 6 agents (3 per team). Configure FUB API credentials at org level. Ensure all users are properly assigned to their teams with correct roles.\n\n**Context:** This establishes the complete test hierarchy needed to verify all permission boundaries. The 1-2-6 structure (broker-leads-agents) mirrors real brokerage org charts and tests all three permission levels.\n\n**Testing Requirements:**\n- **Unit Tests:** Verify org created with correct settings, verify all 8 users exist with correct roles (1 broker, 2 team_lead, 5 agent), verify team assignments (3 agents + 1 lead per team), verify FUB credentials stored at org level","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":45,"created_at":"2026-01-30T12:50:37.84007-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:38.482234-06:00","labels":["backend","testing"],"dependencies":[{"issue_id":"test-e9t6s1","depends_on_id":"test-e9t6","type":"parent-child","created_at":"2026-01-30T12:50:38.140033-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:38.482234-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t6s2","title":"Test broker-level visibility and access","description":"Login as broker account and verify: can see all 8 users in user management, can view activity/pipelines for all teams, can access org settings and FUB configuration, can create/edit/delete teams, can change any user's role or team assignment. Test that broker dashboard shows aggregate metrics across all teams.\n\n**Context:** Brokers pay for RealHerd and need complete visibility into their organization. This verifies the 'god mode' access that makes the product valuable to brokerage owners who need pipeline visibility across 20-100 agents.\n\n**Testing Requirements:**\n- **Unit Tests:** Assert broker sees 8 users in list, assert broker can view Team A and Team B pipelines, assert org settings page accessible, assert team CRUD operations succeed, assert dashboard metrics include all 8 users' data","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:50:38.396618-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:38.226788-06:00","labels":["backend","frontend","testing"],"dependencies":[{"issue_id":"test-e9t6s2","depends_on_id":"test-e9t6","type":"parent-child","created_at":"2026-01-30T12:50:38.665066-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t6s2","depends_on_id":"test-e9t6s1","type":"blocks","created_at":"2026-01-30T12:52:22.780367-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:38.226788-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t6s3","title":"Test team lead visibility and permission boundaries","description":"Login as Team Lead A and verify: can see only their 3 agents (not Team B's 3 agents), can view pipeline/activity for their team only, cannot access org-level settings or FUB configuration, cannot modify other team's users. Then login as Team Lead B and verify same isolation. Test cross-team access attempts return 403 forbidden.\n\n**Context:** Team leads managing 4-12 agents need real-time deal visibility for their team only. This tests the critical middle-tier permission boundary - team leads should never see other teams' sensitive deal data.\n\n**Testing Requirements:**\n- **Unit Tests:** Assert Team Lead A sees exactly 3 agents, assert Team Lead A cannot fetch Team B agent list (403), assert Team Lead A cannot access /api/org/settings (403), assert Team Lead A pipeline query returns only Team A deals, assert same tests pass for Team Lead B with inverse team visibility","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":60,"created_at":"2026-01-30T12:50:38.963033-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:37.720092-06:00","labels":["backend","security","testing"],"dependencies":[{"issue_id":"test-e9t6s3","depends_on_id":"test-e9t6","type":"parent-child","created_at":"2026-01-30T12:50:39.218401-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t6s3","depends_on_id":"test-e9t6s1","type":"blocks","created_at":"2026-01-30T12:52:23.121663-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:37.720092-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"test-e9t6s4","title":"Test agent-level isolation and edge cases","description":"Login as agent and verify: can only see own profile and activity, cannot see other agents even on same team, cannot access team management. Test edge cases: 1) Team lead attempting to view cross-team agent profile (should 403), 2) Deactivated agent login attempt (should fail auth), 3) Settings inheritance (agent inherits team settings, team inherits org settings), 4) Agent trying to access admin routes (403).\n\n**Context:** Data isolation is critical for selling to brokerages - they need to trust that competitive agents on the same team can't spy on each other's pipelines. Edge cases catch permission escalation vulnerabilities.\n\n**Testing Requirements:**\n- **Unit Tests:** Assert agent profile shows only self, assert agent cannot list other agents (403), assert deactivated user auth returns 401, assert agent inherits correct notification settings from team→org cascade, assert agent accessing /api/admin/* returns 403, assert audit log captures all permission denial events","status":"tombstone","priority":2,"issue_type":"task","owner":"david@habedank.org","estimated_minutes":75,"created_at":"2026-01-30T12:50:39.446077-06:00","created_by":"David Habedank","updated_at":"2026-01-30T13:58:37.381998-06:00","labels":["backend","security","testing"],"dependencies":[{"issue_id":"test-e9t6s4","depends_on_id":"test-e9t6","type":"parent-child","created_at":"2026-01-30T12:50:39.606383-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t6s4","depends_on_id":"test-e9t6s2","type":"blocks","created_at":"2026-01-30T12:52:23.407036-06:00","created_by":"David Habedank"},{"issue_id":"test-e9t6s4","depends_on_id":"test-e9t6s3","type":"blocks","created_at":"2026-01-30T12:52:23.77033-06:00","created_by":"David Habedank"}],"deleted_at":"2026-01-30T13:58:37.381998-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
